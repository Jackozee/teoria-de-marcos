\chapter{Operadores en un marco}




En el capítulo anterior definimos los núcleos de un marco y vimos
éstos están en correspondencia con los cocientes del marco.
Ahora veremos que los núcleos de un marco tienen una importancia
central en la estructura del marco base.
El teorema principal es que el conjunto $NA$ de los núcleos de un
marco $A$ es, de nuevo, un marco, llamado el
ensamble de $A$ y, de hecho $A$ es un submarco de $NA$.

Además de los núcleos, arriba definimos los operadores cerradura
y vimos que los núcleos son algunos operadores cerradura.
En nuestro estudio sistemático del ensamble, usaremos otras
familias de operadores monótonos.

\section{Familias de derivadas}

\begin{definition}[Derivadas]
  Una \emph{inflación o derivada} en $A$ es una función $f\colon A\to A$ que
  es monótona e infla.
  Es decir:
\begin{enumerate}[(i)]
  \item $a\leq b$ implica $f(a) \leq f(b)$.
  \item $a\leq f(a)$.
  \end{enumerate}
  Usaremos la notación $DA$ para el conjunto de todas las
  derivadas en $A$.
\end{definition}
Notemos que un operador cerradura (definición
\ref{def:operador-cerradura}) es una derivada idempotente, y
recordemos que usamos la notación $CA$ para el conjunto de los 
operadores cerradura en $A$.

\begin{definition}[Derivadas estables]
  Una derivada $f\in DA$ es \emph{estable} si
  \[
    f(x)\inf y \leq f(x\inf y)
  \]
  para cualesquiera $x,y\in A$.
  Denotamos como $SA$ al conjunto de derivadas estables en $A$.
\end{definition}

\begin{definition}[Prenúcleos]
  Un \emph{prenúcleo} sobre $A$ es una derivada $f\in DA$ tal que
  \[
    f(x)\inf f(y) \leq f(x\inf y)
  .\]
  Notemos que la otra desigualdad se cumple para cualquier
  función monótona, de modo que los prenúcleos separan ínfimos
  binarios.
  Usaremos la notación $PA$ para referirnos al conjunto de
  prenúcleos de $A$.
  Además, cualquier prenúcleo es estable, ya que $y\leq f(y)$ implica
  \begin{align*}
    f(x) \inf y
    &\leq f(x) \inf f(y) \\
    &\leq f(x\inf y) & \text{ pues $f\in PA$}
  \end{align*}
\end{definition}

En resumen tenemos las contenciones
\begin{align*}
  NA \subseteq PA \subseteq SA \subseteq DA \\
  NA \subseteq CA \subseteq DA.
\end{align*}
También es claro que $NA=PA\cap CA$. Es decir, un núcleo es
exactamente un prenúcleo idempotente.
De hecho, tenemos $NA=SA\cap CA$.
Estos conjuntos son, en sí mismos, conjuntos parcialmente
ordenados, donde el orden está dado puntualmente.
Esto es, dadas dos funciones $f,g:A\to A$, decimos que $f\leq g$
si, y solo si,
\[
  \forall x\in A,\; f(x)\leq g(x)
.\]

Notemos que las derivadas $DA$, las estables $SA$ y los
prenúcleos $PA$ son cerrados bajo composición.
Es decir:
\begin{enumerate}[(i)]
  \item si $f,g\in DA$, entonces $fg,gf\in DA$,
  \item si $f,g\in SA$, entonces $fg,gf\in SA$,
  \item si $f,g\in PA$, entonces $fg,gf\in PA$.
\end{enumerate}
Por otro lado, los operadores cerradura $CA$ y los núcleos $NA$
no lo son, en general.





%\subsubsection{Ínfimos}
Veremos que cada uno de estos conjuntos tiene más
estructura que la de conjunto parcialmente ordenado. Observemos primero que tenemos infimos arbitrarios, sea $J\subseteq DA$, 
definimos la función $\Inf J\colon A\to A$ como
\[
  (\Inf J)(a) = \Inf\{f(a) \mid f\in J\}
.\]
Afirmamos que $\Inf J$ es una derivada y, de hecho, es el ínfimo
de $J$ en $DA$:
\begin{enumerate}[(1)]
  \item
  Si $a\leq b\in A$, entonces $f(a)\leq f(b)$ para cada $f\in J$.
  Luego, cada elemento de $\{f(b)\mid f\in J\}$ está acotado
  inferiormente por un elemento de $\{f(a)\mid f\in J\}$, por lo
  cual
  \[
    \Inf\{f(a)\mid f\in J\} \leq \Inf\{f(b)\mid f\in J\}
  .\]
  \item
  Similarmente $\Inf J$ infla.
  \item
  Si $h\in DA$ es una derivada que está por debajo de cada
  elemento $f\in J$.
  Esto es, para cualesquiera $a\in A$ y $f\in J$ se tiene
  $h(a)\leq f(a)$.
  Luego, $h(a)$ es cota inferior de $\{f(a) \mid f\in J\}$, por
  lo cual $h(a)\leq (\Inf J)(a)$.
\end{enumerate}

De hecho, se puede probar lo siguiente:
\begin{lemma}%[Dante $\checkmark$ ]
    \leavevmode
  \begin{enumerate}
    \item si $J\subseteq SA$, entonces $\Inf J\in SA$,
    \item si $J\subseteq PA$, entonces $\Inf J\in PA$,
    \item si $J\subseteq CA$, entonces $\Inf J\in CA$,
    \item si $J\subseteq NA$, entonces $\Inf J\in NA$.
  \end{enumerate}
\end{lemma}
\begin{proof}
    \begin{enumerate}
        \item Sean $x,y \ \in A$.  Así, 
        \begin{align*}
            \Inf J(x)\inf y&=\Inf\{j(x):j\in J\}\inf y\\
            &\leq j(x)\inf y\\
            &\leq j(x\inf y) \ \forall j \ \in J
        \end{align*}
        Por lo que $\Inf J(x)\inf y$ es una cota inferior del conjunto $\{j(x\inf y) : j \ \in J\}$. Así, como $\Inf J(x\inf y)$ es el ínfimo de $\{j(x\inf y) : j \ \in J\}$, se cumple que $\Inf J(x)\inf y\leq \Inf J(x\inf y)$, y $\inf J \ \in SA$.
        \item Sean $x, y \ \in A$. 
        \begin{align*}
            \Inf J(x)\inf \Inf J(y)&=\Inf\{j(x):j \ \in J\} \inf \Inf \{j(y) : j \ \in J\}\\
            &\leq j(x) \ \inf j(y) \\
            &\leq j(x\inf y) \ \forall j \ \in J
        \end{align*}
        por lo que $J(x)\inf \Inf J(y)$ es una cota inferior del conjunto $\{j(x\inf y): j \in J\}$. Así, se cumple que $\Inf J(x) \inf \Inf J(y)\leq \Inf J(x\inf y)$, y entonces $\Inf J \ \in PA$.
        \item Nótese que si $j\in J$, $j$ infla, y se cumple que 
        $$f(x)\leq j(f(x)) \ \forall j,f \in J$$
        Por lo tanto, 
        $$\Inf J(x)\leq f(\Inf J(x)) \ \forall x\in A, f\in J$$
        y $\Inf J$ es cota inferior del conjunto $\{f(\Inf J(x)):f\in J\}$.
        \\
        Ahora bien, sea $f\in DA$ tal que $f(x) \leq j(\Inf J(x)) \ \forall x\in A, j\in J$. Entonces, como $j(j(x))=j(x) \ \forall j\in J$, ocurre que 
        $$f(x)\leq j(x) \ \forall j\in J$$
        $$\Rightarrow f(x)\leq \Inf J(x) ' \forall x\in A$$
        Por lo anterior, $\Inf J(\Inf J(x))=\Inf J(x)$, y $\Inf J \in CA$.
        \item sean $x,y\in A$. Así, 
        \begin{align*}
            \Inf J(x\inf y)&=\Inf\{j(x\inf y):j\in J\}\\
            &=\Inf\{j(x)\inf j(y):j\in J\}\\
            &=\big(\Inf\{j(x):j\in J\}\big)
            \inf\big( \Inf\{j(y):j\in J\}\big)\\
            &=\Inf J(x)\inf J(y)
        \end{align*}
        Por lo tanto, $\Inf J \in NA$
    \end{enumerate}
\end{proof}

\subsubsection{Supremos de derivadas \tps{($DA$)}{(DA)}}

\begin{definition}
  Si $J\subseteq DA$ es un conjunto de derivadas,
  definimos el supremo puntual $\pSup J:A\to A$ de $J$ como la
  función dada por
  \[
    (\pSup J)(a) = \Sup\{f(a) \mid f\in J\}
  \]
  para todo $a\in A$.
\end{definition}
Notemos que, si $J=\emptyset\subseteq DA$, entonces
\begin{align*}
  (\pSup\emptyset)(a)
  &= \Sup\{f(a) \mid f\in\emptyset\} \\
  &= \Sup\emptyset \\
  &= 0 \in A
\end{align*}
lo cual ya no es una derivada (a menos que $A$ sea trivial).
Sin embargo, si $J\neq\emptyset$ es una familia de derivadas,
entonces $\pSup J$ es una derivada y es el supremo de $J$ en
$DA$.
Es decir, los supremos (no vacíos) en $DA$ se calculan
puntualmente.

Observemos que, en $DA$, el menor elemento es la identidad
$\id:A\to A$ y el mayor elemento es $\tp:A\to A$ dada como
$\tp(a)=1$.

\subsubsection{Supremos de estables \tps{($SA$)}{(SA)}}

Supongamos que $J$ es un conjunto no vacío de derivadas estables
($\emptyset\neq J\subseteq SA$).
Entonces, para cualesquiera $a,b\in A$, la derivada $\pSup J$ satisface
\begin{align*}
  (\pSup J)(a)\inf b
  &= \Sup\{f(a) \mid f\in J\} \inf b \\
  &= \Sup\{f(a)\inf b \mid f\in J\}
    & \text{por la ley distributiva de marcos} \\
  &\leq \Sup\{f(a\inf b) \mid f\in J \}
    & \text{cada $f\in SA$} \\
  &= (\pSup J)(a\inf b),
\end{align*}
de modo que $\pSup J\in SA$.
Es decir, los supremos (no vacíos) en $SA$ se calculan
puntualmente.

\subsubsection{Supremos de prenúcleos \tps{($PA$)}{(PA)}}

En contraste con lo que sucede con derivadas y estables, el supremo
de una familia de prenúcleos no se calcula puntualmente, en general.

\begin{example}
  Tomemos el marco $A$ dado como
  \[
    \begin{tikzcd}
      & 1 \\
      & c \ar[u,no head] \\
      a \ar[ur,no head] & & b \ar[ul,no head] \\
      & 0 \ar[ur, no head] \ar[ul, no head]
    \end{tikzcd}
  \]
  Después de algunos cálculos obtenemos la siguiente tabla de
  los valores de los núcleos abiertos, cerrados y regulares.
  Nótese que, como todo núcleo $j$ fija al $1$ y preserva ínfimos,
  es suficiente conocer los valores de $j$ en $a,c$ y $b$
  (ya que $0=a\inf b$).
    \[ 
        \begin{array}{|c|c|c|c|}
            \hline
            j & j(a) & j(c) & j(b) \\
            \hline
            \vnuc a = \wnuc b & 1 & 1 & b \\
            \vnuc b = \wnuc a & a & 1 & 1 \\
            \vnuc c & a & 1 & b \\
            \unuc a & a & c & c \\
            \unuc b & c & c & b \\
            \unuc c = \wnuc c & c & c & c \\
            \hline
        \end{array}
    \]
    En particular, todos estos son prenúcleos.
    Sin embargo, afirmamos que $\vnuc a \psup \vnuc b$ no es prenúcleo.
    En efecto, tenemos
    \begin{align*}
        (\vnuc a \psup \vnuc b)(a\inf b)
        &= (\vnuc a \psup \vnuc b)(0) \\
        &= \vnuc a(0) \sup \vnuc b(0) \\
        &= b \sup a \\
        &= c,
        \\
        (\vnuc a \psup \vnuc b)(a)
        \inf (\vnuc a \psup \vnuc b)(b)
        &= (\vnuc a(a)\sup\vnuc b(a))
            \inf
            (\vnuc a(b)\sup\vnuc b(b)) \\
        &= (1\sup a)\inf(b\sup 1) \\
        &= 1,
    \end{align*}
    así que $\vnuc a\psup\vnuc b$ no es un prenúcleo.
\end{example}

Sin embargo, hasta cierto punto, esto se puede enmendar:
si $J\subseteq PA$ es dirigido (en particular, no vacío), el supremo
puntual $\pSup J$ sí es un prenúcleo, ya que
  \begin{align*}
    (\pSup J)(a) \inf (\pSup J)(b)
    &= \Sup\{f(a)\inf g(b) \mid f,g\in J\}
      & \text{ ley distributiva de marcos} \\
    &= \Sup\{h(a) \inf h(b)  \mid h\in J \}
      & \text{ $J$ es dirigido} \\
    &\leq \Sup\{h(a \inf b)  \mid h\in J \}
      & \text{ cada $h\in J$ es prenúcleo} \\
    &= (\pSup J)(a\inf b),
  \end{align*}
por lo cual $\pSup J$ es el supremo de $J$ en $PA$.

\section{El teorema fundamental de la teoría de marcos}

\subsubsection{Las derivadas estables forman un marco}

Ya vimos que, en $DA$ y en $SA$, todos los ínfimos
y los supremos no vacíos se calculan puntualmente,
mientras que $\Sup\emptyset=\id$.


Ahora veremos cómo interactúan los ínfimos finitos
y los supremos en $SA$.
Tomemos un subconjunto $J\subseteq SA$.
Si $J=\emptyset$, entonces la igualdad
\[
  f\inf \Sup J = \Sup\{f\inf g \mid g\in J\}
\]
se cumple, pues ambos lados son $\id:A\to A$.
Por otro lado, si $J\neq\emptyset$, entonces para todo $x\in A$
se tiene
\begin{align*}
  (f\inf \pSup J)(x)
  &= f(x)\inf (\pSup J)(x) \\
  &= f(x)\inf \Sup\{g(x) \mid g\in J\} \\
  &= \Sup\{f(x)\inf g(x) \mid g\in J\}
    & \text{ley distributiva de marcos} \\
  &= \Sup\{(f\inf g)(x) \mid g\in J\} \\
  &= (\pSup\{f\inf g \mid g\in J\})(x).
\end{align*}
de modo que $f\inf\Sup J = \Sup\{f\inf g\mid g\in J\}$.
Esto muestra que $SA$ es un marco.
En particular, $SA$ tiene una implicación.

\subsubsection{Los núcleos forman un marco}

La afirmación es que $NA$ es un subconjunto implicativo de $SA$.
Es decir: $NA$ es cerrado bajo ínfimo (lo cual ya sabemos) y,
para cualquier estable $f\in SA$ y cualquier núcleo $k\in NA$, la
derivada estable $(f\succ k)$ es un núcleo.
Como toda derivada estable e idempotente es núcleo,
basta demostrar que $(f\succ k)$ es idempotente.

Sea $G=\{g\in SA \mid f\inf g\leq k\}$.
Como $G$ no es vacío (por ejemplo, $\id\in G$), tenemos
\[
  (f\succ k) = \pSup\{g\in SA \mid f\inf g\leq k\}
.\]

Primero mostraremos que $G$ es cerrado bajo composiciones.
Observemos que, para cualesquiera $g,h\in G$ y $x\in A$, tenemos
\begin{align*}
  (f\inf gh)(x)
  &= f(x)\inf g(h(x)) \\
  &= f(x)\inf f(x) \inf g(h(x)) \\
  &\leq f(x) \inf g(f(x)\inf h(x))
    & g\in SA \\
  &\leq f(x) \inf g(k(x))
    & f\inf h \leq k, \text{ pues } h\in G \\
  &\leq f(k(x)) \inf g(k(x)) \\
  &\leq k(k(x))
    & f\inf g \leq k, \text{ pues } g\in G \\
  &= k(x).
\end{align*}
Esto prueba que $f\inf gh \leq k$ y, así, $gh\in G$, como se
quería.

Ahora mostraremos que $j=(f\succ k)\in G$.
En efecto, para todo $x\in A$ se tiene
\begin{align*}
  (f\inf j)(x)
  &= f(x) \inf (\pSup G)(x) \\
  &= f(x) \inf \Sup\{g(x) \mid g\in G\} \\
  &= \Sup\{f(x) \inf g(x) \mid g\in G\} \\
  &= k(x),
\end{align*}
como se quería.
Luego, $j^2=jj\in G$, así que $j^2\leq\pSup G = j$.
Concluimos que $j^2=j$.
Como $j$ es una derivada estable e idempotente,
se sigue que es un núcleo.

Esto muestra lo que queríamos probar: que $NA$ es un subconjunto
implicativo de $SA$.
Una consecuencia inmediata es

\begin{theorem}[Isbell-Simmons-Johnstone]
  Para cada marco $A$, el ensamble $NA$ es un marco.
\end{theorem}
\begin{proof}
    $NA$ es $\Inf$-cerrado y, $(j\in k)\in NA$ para cualesquiera
    $k\in SA$, $k\in NA$.
    Es decir, $NA$ es un subconjunto implicativo del marco $SA$,
    por lo cual es un marco.
\end{proof}
Sin embargo, el hecho de que $NA$ sea un subconjunto
implicativo de $SA$ nos dice aún más.
Todo subconjunto implicativo de un marco es un cociente de éste,
así que $NA$ es de la forma $NA=(SA)_j$ para algún núcleo
$j:SA\to SA$.
La pregunta es, ¿qué núcleo?

\section{Iteración transfinita}
\subsubsection{Iteraciones en \tps{$DA$}{DA}.}

Denotaremos como $\Ord$ a la clase de ordinales y, para cada
ordinal, definimos
\begin{align*}
  f^0 &= \id \\
  f^{\alpha+1} &= ff^\alpha \\
  f^\lambda &= \Sup\{f^\alpha \mid \alpha<\lambda\}
    & \text{ si $\lambda$ es límite.}
\end{align*}
De este modo, obtenemos una cadena de derivadas
\[
  f^0\leq f^1\leq f^2\leq\dots\leq f^\alpha\leq f^{\alpha+1}
  \leq\dots
.\]
Como $\Ord$ no es cardinable, la cadena
$(f^\alpha \mid \alpha\in \Ord )$ se detiene, por fuerza, en
algún ordinal $\gamma$, es decir: $f^{\gamma+1}=f^\gamma$.
Además, dado que la clase de ordinales es bien ordenada,
existe un primer ordinal
$\infty\in\Ord$ tal que $f^\infty=f^{\infty+1}$.
Dado que $f^{\infty+1}=f^\infty$, se sigue que $f^\alpha
f^\infty=f^\infty$ para todo $\alpha\in\Ord$, por inducción en
$\alpha$. En particular,
$f^\infty$ es idempotente, así que es un operador cerradura en $A$.
Más aún, $f^\infty$ es el menor operador cerradura en $A$
que está por encima de $f$.
Para ver esto, mostraremos que, si $k$ es un operador cerradura
que está por encima de $f$, entonces también está por encima de
toda la cadena de iteraciones de $f$.
Tomemos $k\in CA$ con $f\leq k$ y hagamos inducción.
\begin{itemize}
  \item Para $\alpha=0$, tenemos $f^0=\id\leq k$.
  \item Supongamos que $f^\alpha\leq k$.
  Entonces
  \begin{align*}
    f^{\alpha+1}
    &= ff^\alpha \\
    &\leq kk \\
    &= k.
  \end{align*}
  \item Finalmente, si $\lambda$ es un ordinal límite, supongamos
  que $f^\alpha\leq k$ para todo $\alpha<\lambda$.
  Entonces
  $f^\lambda=\Sup\{f^\alpha\mid \alpha<\lambda\}\leq k$.
\end{itemize}
Como esto es válido para todo ordinal, en particular tenemos
$f^\infty\leq k$.
Luego, $f^\infty$ es el menor operador cerradura que está por
arriba de $f$.

\subsubsection{\tps{$CA$}{CA} como un conjunto fijo}
Luego, tenemos el siguiente resultado:
\begin{theorem}
    La construcción $({-})^\infty$ es un operador cerradura en $DA$
    cuyos puntos fijos son los operadores cerradura en $A$:
    \begin{align*}
      ({-})^\infty &\in CDA \\
      (DA)_\infty &= CA.
    \end{align*}
\end{theorem}
\begin{proof}
  Claramente, $f\leq f^\infty$, así que $(-)^\infty$ infla.
  Como $f^\infty$ es idempotente, tenemos $(f^\infty)^\alpha=f^\infty$
  para todo ordinal $\alpha$.
  En particular, $(f^\infty)^\infty=f^\infty$, así que
  $(-)^\infty$ es idempotente.
  Finalmente, si $f\leq g$ son derivadas, veamos que
  $f^\alpha\leq g^\alpha$ para todo ordinal $\alpha$.
  \begin{itemize}
    \item El caso $\alpha=0$ es obvio.
    \item Supongamos que $f^\alpha\leq g^\alpha$.
    Entonces
    \begin{align*}
        f^{\alpha+1}
        &= ff^\alpha \\
        &\leq gg^\alpha \\
        &= g^{\alpha+1}
    \end{align*}
    \item Supongamos que $\lambda$ es un ordinal límite y que
    $f^\alpha\leq g^\alpha$ para todo $\alpha<\lambda$.
    Entonces
    \begin{align*}
        f^\lambda(x)
        &= \Sup\{f^\alpha(x)\mid \alpha<\lambda\} \\
        &\leq \Sup\{g^\alpha(x) \mid \alpha<\lambda\} \\
        &= g^\lambda(x)
    \end{align*}
    para todo $x\in A$, así que $f^\lambda\leq g^\alpha$.
  \end{itemize}
  En particular, $f^\infty\leq g^\infty$, así que $(-)^\infty$ es
  monótono.
  Finalmente, la igualdad $(DA)_\infty=CA$ se obtiene al observar
  que todo operador cerradura es un punto fijo de $(-)^\infty$.
\end{proof}

%\section*{(SESIÓN 11: 19 OCT)}

\subsubsection{Iteraciones en \tps{$SA$}{SA}.}

\begin{lemma}
  Si $f$ es un prenúcleo en $A$, entonces cada iteración
  $f^\alpha$ es un prenúcleo, $f^\infty$ es un núcleo y, más aún,
  $f^\infty$ es el menor núcleo por encima de $A$.
\end{lemma}
\begin{proof}
  Sea $f\in PA$.
  Mostraremos, usando inducción, que $f^\alpha\in PA$ para cada
  ordinal $\alpha$.
  \begin{itemize}
    \item Si $\alpha=0$, entonces $f^0=\id\in PA$.
    \item Supongamos que $f^\alpha$ es prenúcleo.
    Como los prenúcleos son cerrados bajo composición,
    $f^{\alpha+1}=ff^\alpha$ es prenúcleo.
    \item Si $\lambda$ es un ordinal límite, supongamos que
    $f^\alpha\in PA$ para cada ordinal $\alpha<\lambda$.
    Recordemos que
    $f^\lambda=\pSup\{f^\alpha\mid\alpha<\lambda\}$.
    Hay que probar que $f^\lambda$ es prenúcleo.
    Para cada $x,y\in A$ tenemos
    \begin{align*}
      &f^\lambda(x) \inf f^\lambda(y) \\
      &\hspace{10mm}
      = \Sup\{f^\alpha(x) \inf f^\beta(y) \mid
        \alpha,\beta<\lambda\}
        && \text{ley distributiva para marcos} \\
      &\hspace{10mm}
      = \Sup\{f^\gamma(x)\inf f^\gamma(y)
        \mid \gamma<\lambda\} \\
      &\hspace{10mm}
      \leq \Sup\{f^\gamma(x\inf y) \mid \gamma<\lambda\}
        && f^\gamma\in PA \text{ por hipótesis}\\
      &\hspace{10mm}
      = f^\lambda(x\inf y).
    \end{align*}
  \end{itemize}
  En particular, $f^\infty$ es un prenúcleo y, como también es
  idempotente, se sigue que $f^\infty$ es un núcleo.

  Finalmente, recordemos que $f^\infty$ es el menor operador
  cerradura por encima de $f$.
  Luego, para cualquier núcleo $j\in NA$ que esté por encima de
  $f$, se tiene $f^\infty\leq j$, así que $f^\infty$ es el menor
  núcleo por encima del prenúcleo $f$.
\end{proof}

Este resultado se puede refinar un poco más:
\begin{lemma}
  Si $f\in SA$ es cualquier estable, entonces $f^\alpha$ es
  estable para todo ordinal $\alpha$.
  Más aún, $f^\lambda$ es un prenúcleo, para cada ordinal límite
  $\lambda$ y, finalmente, $f^\infty$ es el menor núcleo por
  encima de $f$.
\end{lemma}
\begin{proof}
  Sea $f$ una derivada estable.
  Por inducción, probamos que $f^\alpha$ es estable para cada
  ordinal $\alpha$.
  El caso $\alpha=0$ y el paso inductivo de $\alpha$ a $\alpha+1$
  es exactamente igual a la demostración anterior (porque $SA$ es
  cerrado bajo composición).
  Ahora, si $\lambda$ es un ordinal límite, tenemos
  $f^\lambda = \pSup\{f^\alpha \mid \alpha < \lambda\}$, de modo
  que, para cualesquiera $x,y\in A$ se tiene
  \begin{align*}
    f^\lambda(x)\inf y
    &= \Sup\{f^\alpha(x) \mid \alpha <\lambda\} \inf y \\
    &= \Sup\{f^\alpha(x)\inf y\mid \alpha <\lambda\}
      & \text{ley distributiva para marcos} \\
    &\leq \Sup\{f^\alpha(x\inf y)\mid \alpha <\lambda\} \\
    &= f^\lambda(x\inf y),
  \end{align*}
  como se quería.

  Más aún, debemos probar que $f^\lambda$ es prenúcleo, siempre
  que $\lambda$ es un ordinal límite.
  Para cualesquiera $x,y\in A$ tenemos
  \begin{align*}
    &f^\lambda(x)\inf f^\lambda(y) \\
    &\hspace{10mm}
    = \Sup\{f^\alpha(x)\inf f^\beta(y) \mid \alpha,\beta <\lambda\}
      & \text{ley distributiva de marcos} \\
    &\hspace{10mm}
    \leq \Sup\{f^\alpha(x\inf f^\beta(y)) \mid \alpha,\beta <\lambda\}
      & f^\alpha \in SA \\
    &\hspace{10mm}
    \leq \Sup\{f^\alpha(f^\beta(x\inf y)) \mid \alpha,\beta <\lambda\}
      & f^\beta \in SA \\
    &\hspace{10mm}
    \leq \Sup\{f^\gamma(x\inf y) \mid \gamma<\lambda\}
      & (?) \\
    &\hspace{10mm}
    = f^\lambda(x\inf y),
  \end{align*}
  como se quería.
\end{proof}

\subsubsection{\tps{$NA$}{NA} como un conjunto fijo}
Con estas observaciones, tenemos el siguiente teorema.
\begin{theorem}
  Para cada marco $A$, el operador cerradura $({-})^\infty:SA\to
  SA$ es un núcleo cuyo conjunto de puntos fijos es el ensamble
  de $A$:
  \[
    (SA)_\infty = NA
  .\]
\end{theorem}
\begin{proof}
  Como $({-})^\infty:SA\to SA$ es un operador cerradura,
  solo queda demostrar que $(-)^\infty$ es prenúcleo.
  Es decir, que la desigualdad
  \[
    f^\infty \inf g^\infty \leq (f\inf g)^\infty
  \]
  se cumple para cualesquiera estables $f,g\in SA$.

  Sea $l=(f \inf g)^\infty$.
  Por inducción, mostraremos que $f^\alpha\inf g\leq l$ para todo
  ordinal $\alpha$.
  \begin{enumerate}[(i)]
    \item Para $\alpha=0$, tenemos $f^0\inf g=\id \leq l$.
    \item Supongamos que $f^\alpha\inf g\leq l$.
    Entonces, para todo $x\in A$ tenemos
    \begin{align*}
      (f^{\alpha+1}\inf g)(x)
      &= f(f^\alpha(x)) \inf g(x) \\
      &= f(f^\alpha(x)) \inf g(x) \inf g(x) \\
      &\leq f(f^\alpha(x)) \inf g(f^\alpha(x)) \inf g(x)
        && \text{pues } x\leq f^\alpha(x) \\
      &\leq l(f^\alpha(x)) \inf g(x) && f\inf g\leq (f\inf
      g)^\infty =l \\
      &\leq l(f^\alpha(x) \inf g(x)) && l\in SA \\
      &\leq l(l(x)) && f^\alpha\inf g\leq l \\
      &= l(x) && l\in CA.
    \end{align*}
    \item
    Si $\lambda$ es límite, supongamos que $f^\alpha\inf g\leq l$
    para todo ordinal $\alpha <\lambda$.
    Entonces, para todo $x\in A$, tenemos
    \begin{align*}
      (f^\lambda\inf g)(x)
      &= f^\lambda(x) \inf g(x) \\
      &= \Sup\{f^\alpha(x) \mid \alpha<\lambda\} \inf g(x) \\
      &= \Sup\{f^\alpha(x)\inf g(x) \mid \alpha<\lambda\} \\
      &\leq l(x) && \text{ pues } f^\alpha\inf g\leq l.
    \end{align*}
  \end{enumerate}
  Esto muestra que $f^\infty \inf g\leq l$.
  De manera similar, podemos probar que $f^\infty \inf
  g^\alpha\leq l$ para todo $\alpha$.
  Luego, $f^\infty \inf g^\infty \leq l$, como se quería.

  Como $f^\infty$ es un núcleo para cada $f\in SA$, la
  igualdad $(SA)_\infty=NA$ se obtiene de observar que todo
  núcleo $k$ es un punto fijo de $({-})^\infty:SA\to SA$.
\end{proof}


