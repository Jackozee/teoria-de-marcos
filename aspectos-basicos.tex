\chapter{Aspectos básicos}\label{chap 1}

El objetivo de este capítulo es presentar las estructuras que serán
base de las construcciones del resto del texto. A lo largo del
capítulo hay múltiples observaciones planteadas en términos
categóricos. Aunque
no se necesita teoría de categorías para entender la parte principal
del texto, se le invita al lector a familiarizarse con este
formalismo, pues se usa de manera central en capítulos subsecuentes.
En el apéndice \ref{chap:categorias} se ofrece una visión general del
lenguaje de las categorías, funtores y transformaciones naturales.

\section{Conjuntos parcialmente ordenados}\label{copos}

Un \emph{ conjunto parcialmente ordenado } (copo) es un par $(A,\leq)$
donde $A$ es un conjunto y $\leq$ es una relación en $A$ que
satisface:
\begin{itemize}
  \item[(1)] reflexividad: $a\leq a$ para todo $a\in A$.
  \item[(2)]  transitividad: si $a\leq b$ y $b\leq c$, entonces $a\leq c$.
  \item[(3)] antisimetría: si $a\leq b$ y $b\leq a$, entonces $a=b$.
\end{itemize}

\begin{example} \leavevmode
  \begin{itemize}
    \item
      Para cualquier conjunto $S$, el conjunto $\cal PS$ de los
      subconjuntos de $S$, es un copo con el orden de contención $\subseteq$.
    \item
      Si $A$ es un copo, cualquier subconjunto $B\subseteq A$ también
      es un copo, con el orden heredado de $A$.
    \item
      Si $X$ un espacio topológico, su topología $\cal OX\subseteq\cal
      PS$ es un copo con el orden de contención $\subseteq$. Esta es
      una instancia de los dos puntos anteriores.
  \end{itemize}
\end{example}

Un \emph{morfismo} $f:A\to B$ entre dos copos $A,B$, es una función
monótona (creciente), es decir, siempre que $a\leq b\in A$, se tiene
que $f(a)\leq f(b)$.
Dado que la composición de dos funciones monótonas también es
monótona y la función identidad de cualquier copo es un monótona,
éstos forman una categoría, a la cual denotamos $\Pos$.

Si $A$ es un copo y $X\subseteq A$ es cualquier subconjunto,
un elemento $a\in A$ es una \emph{ cota superior } de $X$
si $x\leq a$ para todo $x\in X$. Simbólicamente, escribimos $X\leq a$.
Similarmente, si $a\leq x$ para todo $x\in X$, entonces decimos
que $a$ es una \emph{ cota inferior } de $X$ y escribimos $a\leq X$.
\\
Si $a\leq X$ y, además, $a\in X$, entonces $a$ es el único elemento de
$A$ con ambas propiedades y decimos que es \emph{el menor elemento de
$X$}. Similarmente, si $a\in X$ y $X\leq a$, entonces $a$ es \emph{el mayor
elemento de $X$}. \\
Si el conjunto de cotas superiores de $X$ tiene un menor
elemento, este elemento se llama supremo de $X$ y lo denotamos
como $\Sup X$.  Entonces
\begin{equation}
  a\leq X \quad\iff\quad a\leq \Inf X
\end{equation}
Similarmente, si el conjunto de cotas inferiores de $X$ tiene un
mayor elemento, este elemento se llama ínfimo de $X$ y lo
denotamos $\Inf X$. Entonces
\begin{equation}
  X\leq a \quad\iff\quad \Sup X\leq a
\end{equation}
Nótese que, si $X$ tiene un menor o un mayor elemento, entonces este
es el ínfimo o el supremo de $X$, respectivamente.

\begin{remark}
  Un copo $A$ se puede entender como una categoría pequeña en la que
  hay, a lo más, un morfismo entre cada par de objetos.
  Desde este punto de vista, un morfismo de copos $f:A\to B$ es,
  sencillamente, un funtor; mientras que el supremo y el ínfimo de un
  subconjunto $X\subseteq A$ son el colímite y el límite del funtor
  de inclusión $X\to A$.
\end{remark}

\section{Semiretículas}
\label{ss:semireticulas}
Decimos que un copo es una \emph{semirretícula superior},
o $\sup$-semirretícula, si $A$ tiene un menor elemento $0\in A$ (el
supremo del conjunto vacío) y todo par
de elementos $a,b$ tiene supremo $a\sup b$.
Equivalentemente, un copo es una semiretícula superior si
todo subconjunto finito de $A$ tiene supremo (ejercicio
\ref{exe:equiv-1-def-sup-poset}).

Sea $A$ una semirretícula inferior.
Como $0\leq a$ para todo $a\in A$, entonces $a\sup 0=a$.
Además, $a\sup b=b\sup a$, $(a\sup b)\sup c=a\sup(b\sup c)$
y $a\sup a=a$ para cualesquiera $a,b,c\in A$.
Por lo tanto, el conjunto $A$ equipado con el supremo (pensado
como operación binaria en $A$) es un monoide
conmutativo donde todo elemento es idempotente.
De hecho, esta es otra posible definición de una semirretícula
inferior (ejercicio \ref{exe:monoide-conmutativo-equiv-sup-pos}).
\iffalse
Recíprocamente, si $(A,\sup,0)$ es un monoide conmutativo
en el cual todo elemento es idempotente,
entonces la relación definida como
\[
  a\leq b \ssi a\sup b=b
\]
es un orden parcial en $A$ tal que el supremo es $\sup$.
%[Alfredo $\checkmark$ ]
\begin{proof}
    En efecto, esto es un orden parcial:
    \begin{itemize}
        \item (Refl). Como $a$ es idempotente, tenemos $a\sup a=a$.
        Luego, $a\leq a$.
        \item (Antisim). Supongamos que $a\leq b$ y $b\leq a$.
        Es decir, $a\sup b=b$ y $b\sup a=a$.
        Como $\sup$ es conmutativo, tenemos
        \[
            b = a\sup b = b\sup a = a
        .\]
        \item (Trans). Supongamos que $a\leq b$ y que $b\leq c$.
        Es decir, $a\sup b = b$ y $b\sup c = c$.
        Como $\sup$ es asociativo, tenemos
        \[
            a\sup c = a\sup(b\sup c) = (a\sup b)\sup c = b\sup c = c
        .\]
        Esto es, $a\leq c$.
    \end{itemize}
    Ahora mostraremos que $\sup$ es el supremo de este orden.
    Por inducción, basta mostrarlo en el vacío y en
    pares de elementos.
    Como $0\sup a=a$, entonces $0\leq a$ para todo $a\in A$.
    Ahora sean $a,b\in A$, y supongamos que $c\in A$ es tal que
    $a,b\leq c$.
    Esto es, $a\sup c = c$ y $b\sup c = c$.
    Luego,
    \[
        (a\sup b)\sup c = (a\sup c)\sup(b\sup c) = c\sup c = c
    .\]
    Por lo tanto, $a\sup b\leq c$.
\end{proof}
\fi

Si $A,B$ son $\sup$-semiretículas,
decimos que una función $f:A\to B$ es
un $\sup$-morfismo (o un morfismo de $\sup$-semiretículas)
si $f(0)=0$ y si $f(a\sup b)=f(a)\sup f(b)$.
Las $\sup$-semiretículas con sus morfismos forman una
categoría, a la cual denotamos como $\Pos^\sup$.

Dado que $a\leq b$ si, y solo si, $a\sup b=a$, entonces
cualquier morfismo de retículas es una función monótona,
pues $a\sup b=a$ implica $f(a)\sup f(b)=f(a)$.
Así, tenemos un funtor $\Pos^\sup\to\Pos$. Sin embargo, este
funtor no es pleno, pues existen funciones monótonas que no
preservan el supremo.

\begin{example}
  Si $G$ es un grupo, entonces el conjunto $\Sub_\Grp(G)$ de subgrupos
  de $G$ es un subcopo del conjunto potencia $\cal PG$.
  Más aún, tanto $\cal PG$ como $\Sub_\Grp(G)$ son semirretículas
  superiores: el supremo en $\cal PG$ es la unión y el supremo en
  $\Sub_\Grp(G)$ es el subgrupo generado por la unión $H\sup K=\<H\cup
  K\>$. Así, la inclusión
  \begin{equation}
    \Sub_\Grp(G) \to \cal PG
  \end{equation}
  es un morfismo de copos que, en general, no es morfismo de
  $\sup$-semirretículas.
\end{example}

Las definiciones y observaciones de esta sección se pueden hacer
de manera análoga usando ínfimos en vez de supremos, obteniendo
la noción de semiretículas inferiores, $\inf$-morfismos, la
categoría $\Pos^{\inf}$ y un funtor $\Pos^{\inf}\to\Pos$.

\section{Retículas}\label{ret}

Decimos que un copo $A$ es una \emph{ retícula } si cualquier
subconjunto finito $X\subseteq A$ tiene supremo e ínfimo en $A$.
Equivalentemente, un copo $A$ es una retícula si, y solo si:
\begin{enumerate}
    \item
      cualquier par de elementos $a,b\in A$ tiene supremo $a\sup b$ e
      ínfimo $a\inf b$ en $A$,
    \item
      $A$ tiene un menor elemento $0$ y un mayor elemento $1$.
      Éstos son el supremo y el ínfimo del subconjunto vacío
      $\emptyset\subseteq A$, respectivamente.
\end{enumerate}
Sin embargo, un subconjunto infinito de una retícula $A$
no tiene por qué tener supremo o ínfimo.

Algunos autores denominan retículas a los copos que
cumplen el punto 1 aunque no cumplan el punto 2.
Con esa terminología (que no adoptaremos aquí), lo que nosotros
llamamos retícula se llama \emph{retícula acotada}.

Ahora definimos la categoría de retículas $\Lat$.
Sus objetos son las retículas y sus
morfismos son funciones que preservan el $1$, el $0$,
el ínfimo y el supremo: $f(0)=0$, $f(1)=1$,
$f(a\sup b)=f(a)\sup f(b)$ y $f(a\inf b)=f(a)\inf f(b)$.
De este modo, tenemos funtores fieles
\begin{equation}
  \Pos^{\inf}\from\Lat\to\Pos^{\sup}.
\end{equation}
Sin embargo, estos no son plenos, ya que una función entre retículas
puede preservar supremos sin preservar ínfimos o viceversa.

\subsection*{Distributividad}

Sean $a,b,c$ elementos de una retícula $A$.
Por definición del supremo, siempre tenemos
$a\leq a\sup b$ y $a\leq a\sup c$,
es decir, $a$ es cota inferior de $\{(a\sup b),(a\sup c)\}$.
Así, $a\leq (a\sup b)\inf(a\sup c)$.
Además,
\begin{align*}
  b\inf c &\leq b\leq a\sup b \\
  b\inf c &\leq c\leq a\sup c.
\end{align*}
Por lo tanto, $b\inf c$ también es cota inferior de $\{(a\sup
b),(a\sup c)\}$, por lo cual $b\inf c\leq(a\sup b)\inf(a\sup c)$.
Esto muestra que $(a\sup b)\inf(a\sup c)$ es cota superior de
$\{a,(b\inf c)\}$. Se sigue que
\[
  a\sup(b\inf c)
  \leq (a\sup b)\inf(a\sup c)
.\]
Un argumento similar muestra que
\[
  a\inf(b\sup c)
  \geq (a\inf b)\sup(a\inf c)
.\]
Sin embargo, estas desigualdades no siempre son igualdades.
Un retícula es \emph{ distributiva } si las ecuaciones
\begin{align*}
  a\sup(b\inf c) &= (a\sup b)\inf (a\sup c) \\
  a\inf(b\sup c) &= (a\inf b)\sup(a\inf c)
\end{align*}
son válidas para cualesquiera $a,b,c\in A$.
La primera igualdad es la distributividad del supremo sobre el
ínfimo y la segunda es la distributividad del ínfimo sobre el
supremo.
De hecho, basta pedir una de las dos igualdades:
si en una retícula $A$ se cumple una de las ecuaciones para
cualesquiera $a,b,c\in A$, entonces la otra también se cumple.
\begin{proof}
    Sean $a,b,c\in A$.
    \begin{enumerate}
      \item
      Supongamos que el supremo distribuye sobre el ínfimo,
      entonces tenemos la primera y tercera igualdad en
      \begin{align*}
          (a\inf b)\sup(a\inf c)
          &= ((a\inf b)\sup a)\inf((a\inf b)\sup c) \\
          &= a\inf((a\inf b)\sup c) \\
          &= a\inf(a\sup c)\inf (b\sup c) \\
          &= a\inf (b\sup c).
      \end{align*}

      \item
      Por otro lado, si el ínfimo distribuye sobre el
      supremo, entonces
      \begin{align*}
          (a\sup b)\inf(a\sup c)
          &= ((a\sup b)\inf a)\sup((a\sup b)\inf c) \\
          &= a\sup((a\sup b)\inf c) \\
          &= a\sup (a\inf c)\sup (b\inf c) \\
          &= a\sup (b\inf c).
      \end{align*}
    \end{enumerate}
\end{proof}

La categoría $\DLat$ se define como la subcategoría plena de
$\Lat$ cuyos objetos son las retículas distributivas.
Es decir, los morfismos en $\DLat$ son simplemente morfismos de
retículas. Así, tenemos una inclusión $\DLat\rmono\Lat$.
En un diagrama, esto es
\[
    \begin{tikzcd}
        & \Pos \\
        \Pos^\wedge \arrow[ru]
            & \Lat \arrow[r] \arrow[l]
            & \Pos^\vee \arrow[lu] \\
        & \DLat \arrow[u,hook]
    \end{tikzcd}
\]
donde todos los funtores son fieles y la flecha con gancho
($\hookrightarrow$) indica un funtor fielmente pleno.

En las secciones siguientes nos dedicaremos a describir varias
categorías que tienen funtores ``de olvido'' a la categoría de
retículas distributivas. Es decir, todos sus objetos son retículas
distributivas, pero tienen estructura o propiedades extra.

\section{Álgebras booleanas}
\label{ss:complementos-algebras-booleanas}

\begin{definition}[Álgebras booleanas]
  Un álgebra booleana $A$ es una retícula distributiva
  donde, para todo elemento $a\in A$ existe un elemento $b\in B$ tal
  que
  \begin{equation}\label{eq:def-complemento}
    a\inf b = 0, \qquad a\sup b = 1.
  \end{equation}
  Si $A$ es un álgebra booleana, para cada $a\in A$ hay un único $b$
  con esta propiedad (ejercicio \ref{exe:dist-unicidad-complementos}).
  Le llamamos \emph{el complemento de $a$} y lo denotamos como $a'$ o
  $\neg a$.
\end{definition}

Si una retícula $A$ no es distributiva, para un elemento $a\in A$
puede haber más de un $b\in A$ que cumpla las identidades
\ref{eq:def-complemento}. Por este motivo, en este contexto decimos
que cada uno de estos $b$ es \emph{un complemento} de $a$ (en lugar de
``\emph{el} complemento'').
Por ejemplo, si $A$ es la retícula de
subespacios vectoriales de un espacio vectorial $V$,
entonces un complemento de un subespacio $U\in A$ es cualquier otro
subespacio $W\in A$ tal que $U\oplus W=V$.

\iffalse
La unicidad de los complementos en un álgebra booleana se debe
a la distributividad. En efecto, si $a\in A$ es un elemento con
complementos $b_1,b_2$, entonces tenemos
%\begin{proof}%[Yareli $\checkmark$ ]
  \begin{align*}
    a\wedge b_1&=0 & a\vee b_1&=1 \\
    a\wedge b_2&=0 & a\vee b_2&=1.
  \end{align*}
  Por distributividad, tenemos
  \[
    b_1
    =b_1\vee 0
    =b_1\vee (a\wedge b_2)
    =(b_1\vee a)\wedge (b_1\vee b_2)
    =1\wedge (b_1\vee b_2)
    =b_1\vee b_2
  \]
  por lo cual $b_2\leq b_1$.
  Similarmente,
  \[
    b_2
    =b_2\vee 0
    =b_2\vee (a \wedge b_1)
    =(b_2\vee a)\wedge (b_2\vee b_1)
    =1\wedge (b_2\vee b_1)
    =b_2\vee b_1
  \]
  por lo cual $b_1\leq b_2$.
  Así, $b_1=b_2$.
%\end{proof}
\fi

\begin{example}[Conjunto potencia]
    Dado cualquier conjunto $S$, el conjunto potencia $\cal PS$ es un
    álgebra booleana: el complemento de un subconjunto $X\subseteq S$
    es el complemento en el sentido usual:
    \[
      X' = \{s\in S \mid s\not\in X\}
    .\]
\end{example}

\begin{remark}\label{obs:bool-plena-en-dlat}
La definición obvia (y correcta) de un morfismo de álgebras booleanas
es un morfismo de retículas que preserva complementos. Sin embargo,
cualquier morfismo de retículas entre álgebras booleanas cumple esto.

De hecho, si $A$ es una retícula y $B$ es una retícula distributiva,
entonces cualquier morfismo morfismo de retículas $f:A\to B$ preserva
todos los complementos que existan en $A$, ya que, si $a\sup b=1$
y $a\inf b=0$, entonces
\begin{align*}
  f(a)\inf f(b)=f(a\inf b)=f(0)=0, \\
  f(a)\sup f(b)=f(a\sup b)=f(1)=1.
\end{align*} 
En particular, si $A$ y $B$ son álgebras booleanas, tenemos
$f(a')=f(a)'$.
De este modo, hay una \emph{igualdad} entre los conjuntos de
morfismos:
\[
  \Bool(A,B) = \DLat(A,B) = \Lat(A,B)
,\]
por lo cual tenemos inclusiones de subcategorías plenas:
\begin{equation}
  \Bool \rmono \DLat \rmono \Lat.
\end{equation}
\end{remark}

\section{Álgebras de Heyting}
\label{ss:heyting}

\begin{definition}[Álgebra de Heyting]\label{defn:heyting}
  Un álgebra de Heyting es una retícula distributiva equipada con una
  operación binaria $(-\succ-)$ (llamada implicación) que cumple
  \begin{equation}\label{eq:defn-implicacion}
    a \inf b \leq c \iff a \leq (b\succ c)
  \end{equation}
  para cualesquiera $a,b,c\in A$.

  Un morfismo de álgebras de Heyting es un morfismo de retículas
  que preserva la implicación.
\end{definition}

En realidad, no es necesario pedir la distributividad: cualquier
retícula $A$ equipada con una implicación $(-\succ-)$ que cumple
\eqref{eq:defn-implicacion} es distributiva y, por lo tanto, un
álgebra de Heyting.

\begin{proof}
    Notemos que $a\wedge b \leq (a\wedge b)\vee (a\wedge c)$ y de
    igual manera $a\wedge c\leq  (a\wedge b)\vee (a\wedge c)$. Por la
    definición de implicación, estas desigualdades equivalen a las
    siguientes:
    $$b\leq (a \succ ((a \wedge b) \vee (a \wedge c))) \mbox{ y } c
    \leq (a\succ ((a \wedge b) \vee (a \wedge c)))$$
    Entonces $b \vee c \leq (a \succ ((a \wedge b) \vee (a \wedge
    c)))$ y de nuevo por la definición de implicación resulta $a
    \wedge (b \vee c)\leq (a\wedge b)\vee (a \wedge c)$. Además, para
    cualquier retícula se cumple que $a \wedge (b \vee c)\geq (a\wedge
    b)\vee (a \wedge c)$, es decir, $a \wedge (b \vee c)= (a\wedge
    b)\vee (a \wedge c)$, pero esto pasa si y sólo si $a \vee (b
    \wedge c)= (a\vee b)\wedge (a \vee c)$.
\end{proof}

Ahora veremos la relación entre álgebras booleanas y álgebras de
Heyting:
\begin{lemma}
  Toda álgebra booleana es un álgebra de Heyting y, de hecho,
  todo morfismo de álgebras booleanas es un morfismo de álgebras de
  Heyting. Esto nos da un funtor fiel $\Bool\to\Heyt$.

  Más aún, este funtor también es pleno: todo morfismo de álgebras de
  Heyting entre álgebras booleanas también preserva los complementos.
\end{lemma}

La primera parte es consecuencia del lema siguiente, el cual es un
poco más general:

\begin{lemma}[Caballo de batalla] \label{lemma:caballo}
    Sea $A$ una retícula distributiva
    y $a\in A$ un elemento con complemento $\neg a$.
    Entonces
    \[
        a\inf x \leq y  \ssi x\leq \neg a\sup y
    \]
    para cualesquiera $x,y\in A$.
\end{lemma}
\begin{proof}
    Por un lado, supongamos que $a\inf x\leq y$.
    Entonces
    \begin{align*}
        x
        &= x \inf 1 \\
        &= x \inf (a\sup \neg a) \\
        &= (x\inf a)\sup(x\inf\neg a) \\
        &\leq y \sup (x\inf \neg a) \\
        &\leq y \sup \neg a.
    \end{align*}
    Recíprocamente, si $x\leq \neg a\sup y$, entonces tenemos
    \begin{align*}
        a\inf x
        &\leq a\inf(\neg a\sup y) \\
        &= (a\inf\neg a) \sup (a\inf y) \\
        &= 0\sup (a\inf y) \\
        &= a\inf y \\
        &\leq y,
    \end{align*}
    como se quería.
\end{proof}

Nuestro ``caballo de batalla'' muestra que toda álgebra booleana tiene
implicación dada como $(x\succ y)=\neg x\sup y$. De aquí también es
inmediato que todo morfismo de álgebras booleanas preserva
la implicación, pues ya preserva complementos y supremos.
Poniendo $y=0$, obtenemos que $(x\succ 0)=\neg x$.
Se sigue que, si $f:A\to B$ es un morfismo de Heyting entre
álgebras booleanas, entonces también preserva complementos, pues $f$
ya preserva implicaciones y el cero, así que $f$ es un morfismo
booleano.

Por definición, toda álgebra de Heyting es distributiva y todo
morfismo de álgebras de Heyting es un morfismo de retículas
(distributivas). Por lo tanto, tenemos un funtor fiel $\Heyt\to\DLat$.
Sin embargo, a diferencia del caso de álgebras booleanas (c.f. con la
observación \ref{obs:bool-plena-en-dlat}), no todo morfismo de
retículas entre álgebras de Heyting preserva la implicación.

En resumen, tenemos el siguiente triángulo de funtores fieles:
\begin{equation} \label{diag:bool-heyt-dlat}
\begin{tikzcd}
  \Bool \ar[dr,hook] \ar[rr,hook] &               & \DLat \\
                                  & \Heyt \ar[ur]
\end{tikzcd}
\end{equation}
($\hookrightarrow$ indica un funtor fielmente pleno).

\section{Completez}
\label{ss:completez}
Ahora veremos que el triángulo \eqref{diag:bool-heyt-dlat}
tiene un análogo con categorías de retículas completas:
\begin{equation} \label{diag:cbool-cheyt-frm}
\begin{tikzcd}
  \CBA \ar[dr,hook] \ar[rr,hook] &               & \Frm \\
                                  & \cHeyt \ar[ur]
\end{tikzcd}
\end{equation}
pero antes daremos las definiciones básicas.

\begin{definition}
  Decimos que un copo $A$ es superiormente completo
  si cualquier subconjunto $X\subseteq A$ tiene supremo $\Sup X$.
  En este caso, también decimos que $A$ es una $\Sup$-semiretícula.
  Un $\Sup$-morfismo es una función que preserva supremos arbitrarios;
  es decir: $f(\Sup X)=\Sup\{f(x)\mid x\in X\}$
  para todo subconjunto $X\subseteq A$. En particular, un
  $\Sup$-morfismo es una función monótona.

  Las $\Sup$-semiretículas, junto con sus morfismos,
  forman una categoría $\SupLat$.
\end{definition}
Notemos que una $\Sup$-semiretícula es, en particular,
una $\sup$-semiretícula y que todo morfismo de $\Sup$-semiretículas es
un morfismo de $\sup$-semiretículas (aunque no al revés).
Así, tenemos un funtor $\SupLat\to\Pos^\sup$.

De manera completamente análoga, decimos que un copo es
inferiormente completo (o es una $\Inf$-semiretícula)
si todo subconjunto $X\subseteq A$ tiene ínfimo $\Inf X$; tenemos
morfismos de $\Inf$-semiretículas y un funtor
$\InfLat\to\Pos^{\inf}$.

\begin{definition}
  Una retícula completa (o copo completo) es un copo $A$
  donde todo subconjunto $X\subseteq A$ tiene ínfimo $\Inf X$ y
  supremo $\Sup X$.

  Un morfismo completo entre retículas completas es una función que
  preserva supremos arbitrarios e ínfimos arbitrarios.
  Así, las retículas completas y los morfismos completos forman una
  categoría $\CLat$.
\end{definition}
De la definición, una retícula completa es una
$\Sup$-semiretícula y una $\Inf$-semiretícula, mientras que todo
morfismo completo es un $\Sup$-morfismo y un $\Inf$-morfismo.
Así, tenemos funtores fieles
\begin{equation}
  \SupLat \leftarrow \CLat \to \InfLat.
\end{equation}
Sin embargo, estos funtores no son plenos, ya que hay morfismos entre
retículas completas que preservan supremos pero no preservan ínfimos y
viceversa.

Ahora, el siguiente teorema nos dice que las categorías $\InfLat$,
$\SupLat$ y $\CLat$ tienen exactamente los mismos objetos.
Esto puede causar confusión, pero hay que recordar que los morfismos
son distintos en cada caso, ya que las contenciones
\[
  \InfLat(A,B)\supseteq \CLat(A,B)\subseteq\SupLat(A,B)
\]
son propias.
\begin{proposition}
  Un copo $A$ es superiormente completo si, y solo si, es
  inferiormente completo.
\end{proposition}
\begin{proof}
  Si $A$ es superiormente completo, entonces
  dado un subconjunto $X\subseteq A$ podemos considerar el conjunto
  $\cotInf X$ de cotas inferiores de $X$.
  \[
    \cotInf X = \{a\in A \mid a\leq X\}
  .\]
  Notemos que, todo $x\in X$ es una cota superior de $\cotInf X$,
  ya que tenemos $a\leq x$ para todo $a\in\cotInf X$.
  Así, $\Sup\cotInf X\leq x$, por lo cual
  $\Sup\cotInf X\in\cotInf X$.
  Esto significa que $\Sup\cotInf X$ es el menor elemento de $\cotInf
  X$, es decir, el ínfimo de $X$:
  \[
    \Sup\cotInf X = \Inf X
  .\]
  Como $X\subseteq A$ era cualquier subconjunto,
  esto muestra que, si $A$ es superiormente completo, entonces
  también es inferiormente completo.
  Análogamente, si $A$ es inferiormente completo, entonces también
  es superiormente completo.
\end{proof}


%\section*{(SESIÓN 3: 14 SEP)}
\section{Marcos}
La definición de un marco surge al estudiar las propiedades
algebraicas de las topologías:
si $S$ es un espacio topológico, la topología $\cal OS$ es
un subcopo del conjunto potencia $\cal PS$ que,
por definición, es cerrado bajo ínfimos finitos y
supremos arbitrarios. Es decir, $\cal OS$ es una
sub-$\inf$-semiretícula y una sub-$\Sup$-semiretícula de $\cal
PS$.
Además, como en $\cal PS$ se cumple la ley distributiva
\begin{equation}
  U\cap\bigcup \cal F=\bigcup\{U\cap V\mid V\in\cal F\},
\end{equation}
entonces la misma ley se satisface en $\cal OS$.
Estas son las propiedades de una topología que abstrae un marco.

\begin{definition}
  Un marco $A$ es una retícula completa que satisface la siguiente
  ley distributiva:
  \[
      y\inf\Sup X = \Sup\{y\inf x\mid x\in X\}
  .\]
  Un morfismo de marcos es un morfismo de copos que respeta
  supremos arbitrarios e ínfimos finitos.
  Los morfismos de marcos son cerrados
  bajo composición, así que obtenemos una categoría $\Frm$.
\end{definition}

Notemos que, en particular, un marco es una retícula distributiva.
Además, cualquier morfismo de marcos preserva ínfimos y supremos
finitos (en particular, preservan el $1$ y el $0$). Así que todo
morfismo de marcos es morfismo de retículas distributivas. Por lo
tanto, obtenemos un funtor fiel $\Frm\to\DLat$. Este funtor no es
pleno, pues para que un morfismo de retículas entre marcos sea
morfismo de marcos necesita preservar supremos arbitrarios, lo cual no
necesariamente sucede.

Además, nótese que un morfismo de marcos puede no preservar ínfimos
arbitrarios, mientras que los supremos finitos no necesariamente
distribuyen sobre ínfimos arbitrarios.

\begin{example}
  \begin{enumerate}
    \item Dado un conjunto $S$ cualquiera, el conjunto potencia
    $\cal PS$ es un marco.
    \item Dados dos conjuntos $S,T$ y una función $f:S\to T$,
    la preimagen $f^{-1}:\cal PT\to\cal PS$ preserva ínfimos
    y supremos arbitrarios, así que, en particular, es un
    morfismo de marcos.
    \item Dado cualquier espacio topológico $S$, la topología
    $\cal OS$ es un marco y la inclusión $\cal OS\to\cal PS$
    es un morfismo de marcos.
    \item Dados dos espacios topológicos $S,T$ y una función
    continua $f:S\to T$, la preimagen $f^{-1}:\cal PT\to\cal
    PS$ manda abiertos en abiertos, así que se restringe a
    una función $\cal OT\to\cal OS$ que denotamos como $\cal
    Of$.
    En la parte \ref{part:espacio-de-puntos} de este texto,
    veremos que esta asignación es, de hecho, un funtor
    contravariante que forma parte de una
    adjunción entre $\Top$ y $\Frm$.
  \end{enumerate}
\end{example}

\section{Álgebras booleanas completas}\label{ABC}
Recordemos que un álgebra booleana es una retícula distributiva
donde todo elemento tiene un complemento, el cual es único por la
distributividad. (Ver \ref{ss:complementos-algebras-booleanas}).
Un álgebra booleana completa es un álgebra booleana que es
completa como retícula. (Ver \ref{ss:completez}).

%También recordemos que, en un álgebra booleana, la negación
%coincide con el complemento, así que la función $\neg:A\to A$
%es una involución:
%$\neg\neg=\id_A:A\to A$.

La categoría $\CBA$ de las álgebras booleanas completas se define
estipulando que los morfismos entre dos álgebras booleanas
completas $A,B$ son los morfismos completos:
\[
  \CBA(A,B)=\CLat(A,B)
,\]
de modo que tenemos un funtor de fielmente pleno
$\CBA\rmono\CLat$.

Además, tenemos un funtor fiel $\CBA\to\Bool$, ya que un morfismo
completo entre álgebras booleanas completas preserva ínfimos y
supremos finitos (y, por lo tanto, preserva complementos).
Sin embargo, este funtor no es pleno, ya que no todo morfismo booleano
es completo.
La situación se ve así:
\begin{equation}\label{diag:cuadrado-incompleto}
\begin{tikzcd}
  \Bool \ar[dr,hook] \ar[rr,hook] &               & \DLat \\
                                  & \Heyt \ar[ur]         \\
  \CBA \ar[uu] &           & \Frm \ar[uu]
\end{tikzcd}
\end{equation}

El primer objetivo de esta sección es probar que este cuadrado se
cierra con un funtor fiel $\CBA\to\Frm$.
Es suficiente mostrar que toda álgebra booleana completa es un marco,
pues los morfismos completos son morfismos de marcos automáticamente.

\begin{lemma}
    Toda álgebra booleana completa es un marco.
    Es decir, en un álgebra booleana completa $A$ se satisface la
    ley de distributividad de marcos
    \[
        a\inf\Sup X = \Sup\{a\inf x\mid x\in X\}
    \]
    para cualesquiera $a\in A$ y $X\subseteq A$.
\end{lemma}
\begin{proof}
    Por un lado, para todo $x\in X$ tenemos que $x\leq\Sup X$, así que
    $a\inf x\leq a\inf\Sup X$.
    Luego,
    \[
        \Sup\{a\inf x\mid x\in X\} \leq a\inf\Sup X
    ,\]
    así que solo resta demostrar la otra comparación:
    \[
        a\inf\Sup X \leq \Sup\{a\inf x\mid x\in X\}
    .\]
    Por nuestro caballo de batalla (lema \ref{lemma:caballo}),
    esto es equivalente a
    \[
        \Sup X \leq \neg a\sup \Sup\{a\inf x\mid x\in X\}
    ,\]
    lo cual es más fácil de demostrar: en efecto, tenemos
    \begin{align*}
        \neg a\sup\Sup\{a\inf x\mid x\in X\}
        &= \Sup\{\neg a \sup(a\inf x) \mid x\in X\} \\
        &= \Sup\{(\neg a\sup a)\inf(\neg a\sup x) \mid x\in X\} \\
        &= \Sup\{1\inf(\neg a\sup x) \mid x\in X\} \\
        &= \Sup\{\neg a\sup x \mid x\in X\} \\
        &\geq \Sup\{x \mid x\in X\} \\
        &= \Sup X,
    \end{align*}
    ya que $\neg a\sup x\geq x$ para todo $x\in X$.
    Esto es lo que se quería.
\end{proof}

Así, dadas dos álgebras booleanas completas $A,B$,
éstas son automáticamente marcos y, además, todo morfismo completo
entre ellas es un morfismo de marcos, por lo cual
tenemos una inclusión entre los conjuntos de morfismos
\[
  \CBA(A,B) \subseteq \Frm(A,B)
.\]
Como mencionamos antes, esto cierra el cuadrado del diagrama
\eqref{diag:cuadrado-incompleto} con un funtor fiel
$\CBA\to\Frm$.
El segundo objetivo de la sección es mostrar que este funtor
es, de hecho, fielmente pleno.
En otras palabras, mostraremos que todo morfismo de marcos entre
álgebras booleanas completas es un morfismo completo.
Con este objetivo, demostraremos siguiente resultado.

\begin{lemma}[Ley de DeMorgan]
  Sea $A$ un álgebra booleana completa y $X\subseteq A$.
  Entonces
  \[
    \neg \Inf X = \Sup \{\neg x \mid x\in X\}
  .\]
\end{lemma}
\begin{proof}
  Mostraremos que
  $\Inf X$ y $\Sup \{\neg x \mid x\in X\}$ son complementarios;
  es decir: que su ínfimo es $0$ y su supremo es $1$.
  Por un lado, cualquier $x\in X$ cumple $\Inf X\leq x$, así que
  \[
      \Inf X\inf\neg x \leq x\inf \neg x = 0.
  \]
  Luego, por la ley distributiva de marcos, tenemos
  \begin{align*}
      \Inf X \inf \Sup\{\neg X\mid x\in X\}
      &= \Sup\{\Inf X \inf \neg x\mid x\in X\} \\
      &= \Sup\{0\} \\
      &= 0.
  \end{align*}
  Por otro lado, para todo $x\in X$ tenemos
  $\neg x\leq \Sup\{\neg x\mid x\in X\}$.
  Usando dos veces nuestro caballo de batalla (lema
  \ref{lemma:caballo}), vemos que esto equivale a
  $\neg\Sup\{\neg x\mid x\in X\}\leq x$.
  Como $x\in X$ era arbitraria, tenemos que
  \[
      \neg\Sup\{\neg x\mid x\in X\}\leq \Inf X
  .\]
  Usando el caballo de batalla una vez más, obtenemos
  \[
      1\leq \Sup\{\neg x\mid x\in X\} \sup \Inf X
  .\]
  Esto concluye la demostración.
\end{proof}

Con esto podemos probar lo que queríamos: todo morfismo de marcos
entre álgebras booleanas completas es un morfismo completo.
De hecho, tan solo es necesario que $A$ sea un álgebra booleana
completa.
\begin{lemma}
    Cualquier morfismo de marcos $f:A\to B$,
    donde $A$ es un álgebra booleana completa,
    también respeta los ínfimos arbitrarios.
\end{lemma}
\begin{proof}
    Por un lado, la desigualdad
    \[
        f(\Inf X)\leq\Inf\{f(x)\mid x\in X\}
    \]
    viene de la monotonía de $f$.
    Por otro lado, como $\Inf X$ y $\Sup\{\neg x\mid x\in X\}$
    son complementarios en $A$ (por DeMorgan)
    y $f$ preserva los complementos
    (pues respeta ínfimos y supremos finitos), entonces $f(\Inf X)$
    y $\Sup\{f(\neg x)\mid x\in X\}$ son complementarios en $B$.
    Luego, la desigualdad faltante
    \[
        \Inf\{f(x)\mid x\in X\} \leq f(\Inf X)
    \]
    es equivalente, por nuestro caballo de batalla, a la desigualdad
    \[
        \Inf\{f(x)\mid x\in X\} \inf \Sup\{f(\neg x)\mid x\in X\} = 0,
    \]
    la cual es sencilla de comprobar: para todo $y\in X$, tenemos
    \begin{align*}
        \Inf\{f(x)\mid x\in X\} \inf f(\neg y)
        &\leq f(y)\inf f(\neg y) \\
        &\leq f(y\inf \neg y) \\
        &= 0,
    \end{align*}
    así que la distributividad de marcos implica
    \begin{align*}
        &
        \hspace{-10mm}
        \Inf\{f(x)\mid x\in X\} \inf \Sup\{f(\neg x)\mid x\in X\} \\
        &= \Sup\Big\{\Inf\{f(x)\mid x\in X\}\inf f(\neg y)
            \;\;\Big|\;\; y\in X\Big\} \\
        &= \Sup\{0\} \\
        &= 0.
    \end{align*}
\end{proof}

Esto muestra lo que queríamos: el funtor $\CBA\to\Frm$ es fielmente
pleno.
\begin{equation}\label{diag:cuadrado-cba-frm}
\begin{tikzcd}
  \Bool \ar[dr,hook] \ar[rr,hook] &               & \DLat \\
                                  & \Heyt \ar[ur]         \\
  \CBA \ar[uu] \ar[rr,hook] &           & \Frm \ar[uu]
\end{tikzcd}
\end{equation}
Para completar la analogía con el triángulo superior, introduciremos
una categoría más: la categoría de álgebras de Heyting superiormente
completas.

\section{Álgebras de Heyting completas}

\begin{definition}
  Un álgebra de Heyting completa es un álgebra de Heyting que es
  completa como retícula.
  La categoría $\cHeyt$ de álgebras de Heyting (superiormente)
  completas tiene como objetos a las álgebras de Heyting completas.
  Sus morfismos son morfismos de Heyting (es decir, morfismos de
  retículas que respetan la implicación) que, además, preservan
  \emph{supremos arbitrarios}.
\end{definition}

Notemos que tenemos un funtor fiel $\CBA\to\cHeyt$, pues toda
álgebra booleana completa es de Heyting completa y todo
morfismo en $\CBA$ preserva la implicación, pues ésta tiene la
descripción $(x\succ y)=\neg x\sup y$.
Más aún, este funtor es pleno: cualquier morfismo de Heyting
entre álgebras booleanas también preserva los complementos, pues
tenemos $\neg x = (x\succ 0)$.

Así, nuestro diagrama crece como sigue:
\begin{equation}\label{diag:prisma-cheyt-incompleto}
\begin{tikzcd}
  \Bool \ar[dr,hook] \ar[rr,hook] &               & \DLat \\
                                  & \Heyt \ar[ur]         \\
  \CBA \ar[uu] \ar[rr,hook] \ar[dr,hook] & & \Frm \ar[uu]    \\
                            & \cHeyt \ar[uu,crossing over]
\end{tikzcd}
\end{equation}
Este diagrama \emph{quiere} que lo completemos con una flecha
$\cHeyt\to\Frm$. En efecto, toda álgebra de Heyting completa es un
marco: basta probar que satisface la ley distributiva de marcos. De
hecho, el siguiente resultado nos da también el recíproco: todo marco
es, también, un álgebra de Heyting (completa).

\begin{theorem}
  Una retícula completa $A$ es un marco si, y solo si, $A$ tiene
  implicación.
\end{theorem}
\begin{proof}
    $\Rightarrow )$ Supongamos que $A$ es un marco y sean $a,b\in A$.
    Consideremos el elemento
    $$y=\Sup\{c\in A\mid a\wedge c\leq b\}$$
    Por un lado, para todo $x\in A$ se tiene
    $a\wedge x\leq b\implies x\leq y$,
    pues es consecuencia directa de la definición de $y$.
    Ahora, si $x\leq y$, tenemos que 
    \begin{align*}
        a\inf x
        & \leq a\inf y \\
        & = a\inf\Sup\{x\in A\mid a\inf x\leq b\}\\
        & = \Sup \{a\inf x \mid a\inf x\leq b\}\leq b
    \end{align*}
    Por lo tanto, $a\wedge x\leq b\Leftrightarrow x\leq y$,
    así que $y=(a\succ b)$. \\
    $\Leftarrow )$ Supongamos que $A$ tiene implicación.
    Sean $a\in A$ y $X\subseteq A$.
    Basta probar que $A$ cumple la LDM.
    Como $a\inf x\leq a\inf\Sup X$, tenemos que
    $\Sup\{x\inf a\mid x\in X\}\leq a\inf\Sup X$.
    Solo falta demostrar la otra desigualdad. Consideremos $y=\bigvee\{x\wedge a\mid x\in X\}$, entonces $a\wedge x\leq y$ para toda $x\in X$, es decir, $x\leq (a\succ y)$ para toda $x\in X$. Entonces $\bigvee X\leq (a\succ y)\Leftrightarrow a\wedge\bigvee X\leq y=\bigvee \{x\wedge a\mid x\in X\}$. Por lo tanto se cumple la LDM.
\end{proof}

En particular, obtenemos el funtor $\cHeyt\to\Frm$ deseado.
Notemos que, aunque un marco es lo mismo que un álgebra de Heyting
completa, las categorías $\cHeyt$ y $\Frm$ son distintas, pues dados
dos marcos $A$, $B$, la contención entre los conjuntos de morfismos
\begin{equation}
  \cHeyt(A,B) \subseteq \Frm(A,B)
\end{equation}
es propia: hay morfismos de marcos que no preservan la implicación.
\begin{equation}\label{diag:prisma-cheyt-completo}
\begin{tikzcd}
  \Bool \ar[dr,hook] \ar[rr,hook] &               & \DLat \\
                                  & \Heyt \ar[ur]         \\
  \CBA \ar[uu] \ar[rr,hook] \ar[dr,hook] & & \Frm \ar[uu]    \\
                            & \cHeyt \ar[uu,crossing over] \ar[ur]
\end{tikzcd}
\end{equation}

\begin{example}
  Sea $S$ un espacio topológico.
  Por el teorema anterior, dados $u,v\in\cal OS$
  existe la implicación $v\succ u\in \cal OS$.
  Para todo $w\in\cal OS$, tenemos
  \begin{align*}
    w\leq (v\succ u)
    &\iff w\cap v\leq u \\
    &\iff w\leq v'\cup u \\
    &\iff w\leq (v'\cup u)^\circ.
  \end{align*}
  Se sigue que $v\succ u = (u\cup v')^\circ$.
\end{example}

Finalmente, nuestro diagrama se ve así:
\[
  \begin{tikzcd}[column sep = -1em]
      &[2em] & & \Pos & & &[2em] \\
      & \Pos^\wedge \ar[rru]
        && \Lat \ar[ll] \ar[rr]
        && \Pos^\sup  \ar[llu] & \\
      & & & \DLat \ar[u,hook] & & & \\
        \InfLat \ar[ruu]
        && \Heyt \ar[ur]
        &&& \Frm \ar[r] \ar[llu]
        & \SupLat \ar[luu] \\
      & \Bool \ar[rruu,hook,bend left=40] \ar[ur,hook]
      & & & \cHeyt \ar[ur] \ar[llu] & & \\
      & & & \CBA \ar[d,hook] \ar[ull] \ar[ur,hook]
                \ar[uurr,hook,bend right=40]
      & & & \\
      & & & \CLat \ar[rrruuu,bend right]
                  \ar[llluuu,bend left] & &
  \end{tikzcd}
\]
La parte central del dibujo es el diagrama
\eqref{diag:prisma-cheyt-completo}, pero aquí aparece aplastado porque
era más fácil dibujarlo así.

\begin{lemma}
    Sean $A$ un marco, $a\in A$ y $X\subseteq A$.
    Entonces
    \[
        (\Sup X)\succ a = \Inf\{(x\succ a) \mid x\in X\}
    .\]
    En particular, tomando $X=\{x,y\}$, tenemos
    \[
        (x\sup y)\succ a = (x\succ a)\inf(y\succ a)
    .\]
\end{lemma}
\begin{proof}
    Para todo $y\in A$, tenemos
    \begin{align*}
        y\leq (\Sup X)\succ a
        &\iff y\inf \Sup X \leq a \\
        &\iff \Sup\{y\inf x\mid x\in X\} \leq a \\
        &\iff (\forall x\in X,\; y\inf x\leq a) \\
        &\iff (\forall x\in X,\; y\leq(x\succ a)) \\
        &\iff y\leq \Sup\{(x\succ a)\mid x\in X\}.
    \end{align*}
\end{proof}

\section{Ejercicios}

\begin{exercise} \label{exe:equiv-1-def-sup-poset}.
  Muestra que, en un copo $A$, son equivalentes
  \begin{itemize}
    \item
      $A$ tiene un menor elemento y todo par de elementos tiene
      supremo,
    \item
      todo subconjunto finito tiene supremo.
  \end{itemize}
\end{exercise}

\begin{exercise}
  \label{exe:monoide-conmutativo-equiv-sup-pos}
  Muestra que, si $(A,\sup,0)$ es un monoide conmutativo donde todo
  elemento es idempotente, entonces la relación definida como
  \[
    a\leq b \ssi a\sup b=b
  \]
  es un orden parcial en $A$ tal que el supremo es $\sup$.
\end{exercise}

\begin{exercise}\label{exe:dist-unicidad-complementos}
  Muestra que, si $A$ es una retícula distributiva, entonces para cada
  $a\in A$ hay, a lo más, un elemento $b\in A$ tal que
  \begin{equation}
    a\inf b = 0, \qquad a\sup b = 1.
  \end{equation}
\end{exercise}
