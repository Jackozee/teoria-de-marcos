\documentclass[12pt,letterpaper,titlepage,draft]{book}
\usepackage[left=3.5cm,right=3.5cm,top=2.5cm,bottom=2.5cm]{geometry}
\setlength{\marginparwidth}{2cm}
\usepackage[spanish]{babel}
\usepackage{amsmath,amsfonts,amsthm,mathrsfs,amssymb,todonotes}
\usepackage{enumitem,mathtools,thmtools,tikz-cd,multicol,stmaryrd}
\usetikzlibrary{babel}
\usepackage{MnSymbol,wasysym,titlesec,nameref}
\usepackage{palatino}
\usepackage[final]{microtype}
\usepackage[final]{hyperref}
%\setenumerate[0]{label=(\alph*)}

\usepackage[style=numeric,sorting=none]{biblatex}
\usepackage[babel]{csquotes}
\addbibresource{referencias.bib}

\titleclass{\part}{page}
\titleformat{\part}[display]
  {\normalfont\huge\bfseries}{\centering\partname\ \thepart}{20pt}{\Huge\centering}
\titlespacing*{\part}{0pt}{50pt}{40pt}

\newcommand{\xqed}[1]{%
  \leavevmode\unskip\penalty9999 \hbox{}\nobreak\hfill
  \quad\hbox{\ensuremath{#1}}}
\let\emptyset\varnothing
\newtheorem{thm}{Teorema}[chapter]
\newtheorem{defn}[thm]{Definición}
\newtheorem{obs}[thm]{Observación}
\newtheorem{exe}{Ejercicio}
\newtheorem{exa}[thm]{Ejemplo}
\newtheorem{lemma}[thm]{Lema}
\newtheorem{cor}[thm]{Corolario}
\newtheorem{prop}[thm]{Proposición}
\theoremstyle{definition}
\newtheorem*{soltemp}{Solución}
\newtheorem*{axiom}{Axioma}
\newenvironment{sol}[1]{%
    \begin{soltemp}#1}{%
    \xqed{\blacksquare}\end{soltemp}%
}
\renewcommand\sup{\vee}
\newcommand\Sup{\bigvee}
\newcommand\down{{\downarrow}}
\newcommand\ol[1]{\overline{#1}}
\renewcommand{\inf}{{\wedge}}
\renewcommand\phi{\varphi}
\newcommand\Inf{\bigwedge}
\newcommand\psup{%
    {\;\stackrel{\raisebox{-3pt}{\scalebox{0.4}{$\bullet$}}}{\vee}\;}
  }%
\newcommand\pSup{%
    {\stackrel{\raisebox{-3pt}{\scalebox{0.5}{$\bullet$}}}{\bigvee}}
  }%
\newcommand\N{\mathbb N}
\newcommand\Z{\mathbb Z}
\newcommand\Q{\mathbb Q}
\newcommand\R{\mathbb R}
\newcommand\D{\mathcal D}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\Grp}{\mathrm{Grp}}
\newcommand{\panth}[1]{\left({#1}\right)}
\newcommand{\pangle}[1]{\langle{#1}\rangle}
\renewcommand\cal[1]{\mathcal{#1}}
\newcommand\nti[1]{\Lambda^{\text{*}}({#1})}
\newcommand\scr[1]{\mathscr{#1}}
\newcommand\xto[1]{\xrightarrow{#1}}
\newcommand\from{\leftarrow}
\newcommand\rmono{\hookrightarrow}
\newcommand\lar[1]{\xleftarrow{#1}}
\newcommand\simr{{\sim}}
\newcommand\ssi{\hspace{5mm}\text{ si, y solo si }\hspace{5mm}}
\newcommand\com[2]{\ar[equal,from={#1},to={#2},shorten=5mm]}
\newcommand\unuc[1]{\mathbf u_{#1}}
\newcommand\vnuc[1]{\mathbf v_{#1}}
\newcommand\wnuc[1]{\mathbf w_{#1}}
\newcommand\tps[2]{\texorpdfstring{#1}{#2}}
\newcommand\fprod{A}
\newcommand\<{\langle}
\renewcommand\>{\rangle}
\newcommand\Idl{\text{-}\mathrm{Idl}}
\newcommand\adj[2]{{
  \ar[from=#1, to=#2,"\dashv"marking,draw=none]
}}
\let\prs\prescript

%\renewcommand\proofname{Demostraci\'on}
%\renewcommand\partname{Parte}
%\renewcommand\chaptername{Cap\'itulo}
%\renewcommand\contentsname{Contenido}
%\renewcommand\listtheoremname{Lista de ejercicios}

\newcommand{\Frm}{\mathrm{Frm}}
\newcommand{\Con}{\mathrm{Set}}
\newcommand{\Top}{\mathrm{Top}}
\newcommand{\Pos}{\mathrm{Pos}}
\newcommand{\Lat}{\mathrm{Lat}}
\newcommand{\SupLat}{\mathrm{SupSLat}}
\newcommand{\InfLat}{\mathrm{InfSLat}}
\newcommand{\CLat}{\mathrm{CLat}}
\newcommand{\DLat}{\mathrm{DLat}}
\newcommand{\CBA}{\mathrm{CBA}}
\newcommand{\Heyt}{\mathrm{Heyt}}
\newcommand{\Bool}{\mathrm{Bool}}
\newcommand{\Vect}{\mathrm{Vect}}
\newcommand{\Ord}{\mathrm{Ord}}
\newcommand{\Mod}{\mathrm{Mod}}
\newcommand{\Ab}{\mathrm{Ab}}
\newcommand{\Ob}{\mathrm{Ob}}
\newcommand{\Arr}{\mathrm{Arr}}
\newcommand{\Mor}{\mathrm{Mor}}
\newcommand{\Fld}{\mathrm{Fld}}
\newcommand{\Sp}{\mathrm{Sp}}
\newcommand{\Sob}{\mathrm{Sob}}
\newcommand{\CohFrm}{\mathrm{CohFrm}}
\newcommand{\CohTop}{\mathrm{CohTop}}
\newcommand{\Stone}{\mathrm{Stone}}
\newcommand{\Cp}{\mathrm{Cp}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\tp}{\mathrm{tp}}
\newcommand{\op}{\mathrm{op}}
\newcommand{\pt}{\mathrm{pt}}
\newcommand{\ds}{\text{-}}
\DeclareMathOperator{\img}{im}
\DeclareMathOperator{\cbd}{cbd}
\DeclareMathOperator{\Gav}{Gav}
\DeclareMathOperator{\Et}{Et}
\newcommand{\cotInf}{\mathrm{cotInf}}
\newcommand{\cotSup}{\mathrm{cotSup}}

\title{Introducción a la teoría de marcos}
\author{Curso impartido por: Luis Ángel Zaldívar Corichi \\
\small{Notas de sus alumnos}}
\date{Otoño 2020}

\begin{document}
\maketitle

\chapter*{Introducción}

La idea de la teoría de marcos no es nueva.
A fines de la década de 1950, en un seminario de Ehresmann,
en París \cite{Gattungen}, Bénabou
presentó la idea de estudiar un espacio topológico a partir
de las propiedades de su topología, vista como un conjunto ordenado.
Más adelante, Dowker y Papert Strauss escribieron un famoso artículo
\cite{Quotients}
en el que retoman la idea de Bénabou, introducen el término ``marco''
y desarrollan muchas ideas modernas.
Posteriormente, Isbell publica un artículo \cite{atomless-parts}
donde introduce
la categoría de locales como la categoría opuesta a la de marcos.
Observa que muchas nociones topológicas se pueden entender
a través de las propiedades del marco asociado,
y estudia la adjunción entre la categoría de locales y la categoría
de espacios topológicos
\[
    \begin{tikzcd}
        \Top \ar[d,"\cal O"'{name=izq},shift right=2] \\
        \Frm^\op \ar[u,"\pt"'{name=der},shift right=2]
        \adj{izq}{der}
    \end{tikzcd}
\]
la cual no es una equivalencia,
aunque sí induce una equivalencia (dual) entre las subcategorías
$\Sp\hookrightarrow\Frm$ y $\Sob\hookrightarrow\Top$,
donde los objetos de $\Sob$ y $\Sp$ son los llamados espacios sobrios
y marcos espaciales, respectivamente.
Esta equivalencia constituye una generalización de la dualidad
de Stone clásica.

También veremos que la categoría de marcos incluye,
como subcategoría plena, a la categoría $\CBA$ de álgebras booleanas
completas y morfismos completos y, sin embargo, $\CBA$ no es reflexiva
en $\Frm$.
Un problema interesante es determinar qué marcos tienen reflexión booleana.

El estudio de los marcos también se relaciona con la teoría de toposes
y el estudio de retículas más generales que se encuentran
al estudiar anillos y sus categorías de módulos.

Otro atractivo de la teoría de marcos es que se puede hablar
de propiedades topológicas en términos puramente reticulares y,
en este caso, se comportan de manera un poco distinta:
Peter Johnstone demostró, en 1982, que el teorema de Tychonoff
para marcos no requiere el uso del axioma de elección,
en contraste con el caso de espacios topológicos.
Más adelante, Johnstone publicó su monografía Stone spaces,
donde expuso de manera sistemática todo lo que se sabía en ese momento
al respecto del tema.

Finalmente, mencionaremos que una herramienta central
en la teoría es el concepto de núcleo en un marco,
cuyo estudio sistemático fue introducido por Harold Simmons
y su estudiante Macnab.

Existen, principalmente, dos libros que tratan este tema.
El libro Stone spaces, de Johnstone,
y el libro Frames and locales, de Picado y Pultr.
En teoría iba a haber un tercer libro, escrito por Harold Simmons,
aunque este proyecto no se pudo completar, debido a su
lamentable fallecimiento en 2018.
Parte de estas notas se basan en el libro inconcluso de Simmons.

%\subsubsection*{Temario: La interacción sin puntos del álgebra y la topología.}
%\begin{enumerate}[label=\Roman*.]
%  \item Preliminares de la teoría de marcos. Aspectos básicos.
%  \begin{itemize}
%      \item Cocientes.
%      \item Completaciones ordenadas (si hay tiempo).
%  \end{itemize}
%  \item El ensamble de un marco.
%  \begin{itemize}
%      \item Derivadas, prenúcleos, estables y núcleos.
%      \item Funtorialidad de $N:\Frm\to\Frm$.
%      \item Representaciones: cálculos en $NA$.
%  \end{itemize}
%  \item El espacio de puntos de un marco.
%  \item Lo que gusten y lo que alcance.
%\end{enumerate}
%
%En la parte IV podemos ver un poco de el problema de reflexión
%booleana, los axiomas de
%separación en $\Frm$, espacios espectrales, gavillas en un marco,
%etc. según lo que se desee y el tiempo que haya.
%
%\newpage

\tableofcontents
%\listoftheorems[ignoreall,show=exe]
%\listoftodos

\part{Preliminares}


\chapter{Aspectos básicos de la teoría de marcos}
\section{Copos}
Sean $A,B$ dos conjuntos parcialmente ordenados
(copos, para abreviar).
Una función $f:A\to B$ es un morfismo de copos si,
siempre que $a\leq b\in A$ se tiene $f(a)\leq f(b)$.
En otras palabras, $f:A\to B$ es un morfismo de copos
si, cuando vemos a $A$ y a $B$ como categorías, $f$ es un funtor.
A los morfismos de copos también se les llama funciones monótonas.

Si $A$ es un copo y $X\subseteq A$ es cualquier subconjunto,
un elemento $a\in A$ se llama cota superior de $X$ (en $A$)
si $x\leq a$ para todo $x\in X$.
Similarmente, si $a\leq x$ para todo $x\in X$, entonces decimos
que $a$ es una cota inferior de $X$. \\
Si $x\in X$ es una cota inferior de $X$,
entonces $a$ es único con esta propiedad y decimos que es el
menor elemento de $X$. Similarmente, $a\in A$ es el menor
elemento de $X$ si $x\in X$ es una cota superior de $X$. \\
Si el conjunto de cotas superiores de $X$ tiene un menor
elemento, este elemento se llama supremo de $X$ y lo denotamos
como $\Sup X$.
Similarmente, si el conjunto de cotas inferiores de $X$ tiene un
mayor elemento, este elemento se llama ínfimo de $X$ y lo
denotamos $\Inf X$.

Dado que los morfismos de copos (funciones monótonas)
son cerrados bajo composición y la función identidad
de cualquier copo es un morfismo,
éstos forman una categoría, a la cual denotamos $\Pos$.

\section{Semiretículas}
\label{ss:semireticulas}
Decimos que un copo es una semiretícula superior
(o $\sup$-semiretícula) si todos sus subconjuntos finito tienen
supremo.
Equivalentemente, un copo $A$ es una $\sup$-semiretícula si
todo par de elementos $a,b$ tiene supremo $a\sup b$
y $A$ tiene un menor elemento $0\in A$ (que es
el supremo del cojunto vacío).

Como $0\leq a$ para todo $a\in A$, entonces $a\sup 0=a$.
Además, $a\sup b=b\sup a$, $(a\sup b)\sup c=a\sup(b\sup c)$
y $a\sup a=a$ para cualesquiera $a,b,c\in A$.
Por lo tanto, el conjunto $A$ equipado con el supremo, pensado
como operación binaria en $A$, es un monoide
conmutativo donde todo elemento es idempotente
(el elemento neutro es el $0\in A$).

Recíprocamente, si $(A,\sup,0)$ es un monoide conmutativo
en el cual todo elemento es idempotente,
entonces la relación definida como
\[
  a\leq b \ssi a\sup b=b
\]
es un orden parcial en $A$ tal que el supremo es $\sup$.
%[Alfredo $\checkmark$ ]
\begin{proof}
    En efecto, esto es un orden parcial:
    \begin{itemize}
        \item (Refl). Como $a$ es idempotente, tenemos $a\sup a=a$.
        Luego, $a\leq a$.
        \item (Antisim). Supongamos que $a\leq b$ y $b\leq a$.
        Es decir, $a\sup b=b$ y $b\sup a=a$.
        Como $\sup$ es conmutativo, tenemos
        \[
            b = a\sup b = b\sup a = a
        .\]
        \item (Trans). Supongamos que $a\leq b$ y que $b\leq c$.
        Es decir, $a\sup b = b$ y $b\sup c = c$.
        Como $\sup$ es asociativo, tenemos
        \[
            a\sup c = a\sup(b\sup c) = (a\sup b)\sup c = b\sup c = c
        .\]
        Esto es, $a\leq c$.
    \end{itemize}
    Ahora mostraremos que $\sup$ es el supremo de este orden.
    Por inducción, basta mostrarlo en el vacío y en
    pares de elementos.
    Como $0\sup a=a$, entonces $0\leq a$ para todo $a\in A$.
    Ahora sean $a,b\in A$, y supongamos que $c\in A$ es tal que
    $a,b\leq c$.
    Esto es, $a\sup c = c$ y $b\sup c = c$.
    Luego,
    \[
        (a\sup b)\sup c = (a\sup c)\sup(b\sup c) = c\sup c = c
    .\]
    Por lo tanto, $a\sup b\leq c$.
\end{proof}

Si $A,B$ son $\sup$-semiretículas,
decimos que una función $f:A\to B$ es
un $\sup$-morfismo (o un morfismo de $\sup$-semiretículas)
si $f(0)=0$ y si $f(a\sup b)=f(a)\sup f(b)$.
De nuevo, las $\sup$-semiretículas con sus morfismos forman una
categoría, a la cual denotamos como $\Pos^\sup$.

Dado que $a\leq b$ si, y solo si, $a\sup b=a$, entonces
cualquier morfismo de retículas es una función monótona,
pues $a\sup b=a$ implica $f(a)\sup f(b)=f(a)$.
Así, tenemos un funtor $\Pos^\sup\to\Pos$. Sin embargo, este
funtor no es pleno, pues existen funciones monótonas que no
preservan el supremo.

Las definiciones y observaciones de esta sección se pueden hacer
de manera análoga usando ínfimos en vez de supremos, obteniendo
la noción de semiretículas inferiores, $\inf$-morfismos, la
categoría $\Pos^{\inf}$ y un funtor $\Pos^{\inf}\to\Pos$.

\section{Retículas}

Decimos que un copo $A$ es una retícula si cualquier
subconjunto finito $X\subseteq A$ tiene supremo e ínfimo.
Equivalentemente, un copo $A$ es una retícula si, y solo si:
\begin{enumerate}
    \item cualquier par de elementos $a,b\in A$ tiene
    supremo $a\sup b=\Sup\{a,b\}\in A$ e ínfimo $a\inf
    b=\Inf\{a,b\}\in A$,
    \item
    $A$ tiene un menor elemento $0$ y un mayor elemento $1$.
    Éstos son el supremo y el ínfimo del subconjunto vacío
    $\emptyset\subseteq A$, respectivamente.
\end{enumerate}
Algunos autores denominan retículas a los copos que
cumplen el punto 1 aunque no cumplan el punto 2.
Con esa convención, lo que nosotros llamamos retícula se llama
retícula acotada.
Nótese también que un subconjunto arbitrario de una retícula $A$
puede no tener supremo o ínfimo.

Sean $a,b,c$ elementos de una retícula $A$.
Por definición del supremo, siempre tenemos
$a\leq a\sup b$ y $a\leq a\sup c$.
Es decir, $a$ es cota inferior de $\{(a\sup b),(a\sup c)\}$.
Así, $a\leq (a\sup b)\inf(a\sup c)$.
Además,
\begin{align*}
  b\inf c &\leq b\leq a\sup b \\
  b\inf c &\leq c\leq a\sup c.
\end{align*}
Por lo tanto, $b\inf c$ también es cota inferior de $\{(a\sup
b),(a\sup c)\}$, por lo cual $b\inf c\leq(a\sup b)\inf(a\sup c)$.
Esto muestra que $(a\sup b)\inf(a\sup c)$ es cota superior de
$\{a,(b\inf c)\}$. Se sigue que
\[
  a\sup(b\inf c)
  \leq (a\sup b)\inf(a\sup c)
.\]
Un argumento similar muestra que
\[
  a\inf(b\sup c)
  \geq (a\inf b)\sup(a\inf c)
.\]
Sin embargo, estas desigualdades no siempre son igualdades.
Un retícula es distributiva si las ecuaciones
\begin{align*}
  a\sup(b\inf c) &= (a\sup b)\inf (a\sup c) \\
  a\inf(b\sup c) &= (a\inf b)\sup(a\inf c)
\end{align*}
son válidas para cualesquiera $a,b,c\in A$.
La primera igualdad es la distributividad del supremo sobre el
ínfimo y la segunda es la distributividad del ínfimo sobre el
supremo.
De hecho, basta pedir una de las dos igualdades:
si en una retícula $A$ se cumple una de las ecuaciones para
cualesquiera $a,b,c\in A$, entonces la otra también se cumple.
\begin{proof}
    Sean $a,b,c\in A$.
    \begin{enumerate}
      \item
      Supongamos que el supremo distribuye sobre el ínfimo,
      entonces tenemos la primera y tercera igualdad en
      \begin{align*}
          (a\inf b)\sup(a\inf c)
          &= ((a\inf b)\sup a)\inf((a\inf b)\sup c) \\
          &= a\inf((a\inf b)\sup c) \\
          &= a\inf(a\sup c)\inf (b\sup c) \\
          &= a\inf (b\sup c).
      \end{align*}

      \item
      Por otro lado, si el ínfimo distribuye sobre el
      supremo, entonces
      \begin{align*}
          (a\sup b)\inf(a\sup c)
          &= ((a\sup b)\inf a)\sup((a\sup b)\inf c) \\
          &= a\sup((a\sup b)\inf c) \\
          &= a\sup (a\inf c)\sup (b\inf c) \\
          &= a\sup (b\inf c).
      \end{align*}
    \end{enumerate}
\end{proof}

Ahora definimos la categoría de retículas $\Lat$.
Sus objetos son las retículas y sus
morfismos son funciones que preservan el $1$, el $0$,
el ínfimo y el supremo: $f(0)=0$, $f(1)=1$,
$f(a\sup b)=f(a)\sup f(b)$ y $f(a\inf b)=f(a)\inf f(b)$.

De este modo, tenemos funtores $\Pos^{\inf}\from\Lat\to\Pos^{\sup}$.
Notemos que estos funtores son fieles, pero no son plenos,
ya que una función puede preservar supremos sin preservar ínfimos
o viceversa.

La categoría $\DLat$ se define como la subcategoría plena de
$\Lat$ cuyos objetos son las retículas distributivas.
Es decir, los morfismos en $\DLat$ son simplemente morfismos de
retículas. Así, tenemos una inclusión $\DLat\rmono\Lat$.

\section{Complementos y álgebras booleanas}
\label{ss:complementos-algebras-booleanas}

\begin{defn}[Complementos]
    Sea $A$ una retícula.
    Decimos que un elemento $a\in A$ tiene complementos
    si existe algún $b\in A$ tal que
    \[
        a\inf b = 0 \hspace{10mm} a\sup b = 1
    .\]
    En este caso, decimos que $b$ es un complemento de $a$.
\end{defn}
Si la retícula $A$ no es distributiva,
entonces un mismo elemento puede
tener más de un complemento.
Sin embargo, si $A$ es distributiva, un elemento $a\in A$ tiene,
a lo más, un complemento.
\begin{proof}%[Yareli $\checkmark$ ]
  En efecto, sean $a,b_1,b_2\in A$ tales que
  \begin{align*}
    a\wedge b_1&=0 & a\vee b_1&=1 \\
    a\wedge b_2&=0 & a\vee b_2&=1.
  \end{align*}
  Si $A$ es distributiva, entonces
  \[
    b_1
    =b_1\vee 0
    =b_1\vee (a\wedge b_2)
    =(b_1\vee a)\wedge (b_1\vee b_2)
    =1\wedge (b_1\vee b_2)
    =b_1\vee b_2
  \]
  por lo cual $b_2\leq b_1$.
  Similarmente,
  \[
    b_2
    =b_2\vee 0
    =b_2\vee (a \wedge b_1)
    =(b_2\vee a)\wedge (b_2\vee b_1)
    =1\wedge (b_2\vee b_1)
    =b_2\vee b_1
  \]
  por lo cual $b_1\leq b_2$.
  Así, $b_1=b_2$.
\end{proof}
Como no hay ambigüedad, en una retícula distributiva denotamos
al complemento de $a$ como $a'$, en caso de que éste exista.

\begin{defn}
  Un álgebra booleana es una retícula distributiva
  donde todo elemento tiene complemento (único, por
  distributividad).
\end{defn}

\begin{exa}
    Dado cualquier conjunto $S$, el conjunto potencia $\cal PS$
    es un álgebra booleana.
    El complemento de un subconjunto $X\subseteq S$ es el
    complemento en el sentido usual:
    \[
      X' = \{s\in S \mid s\not\in X\}
    .\]
\end{exa}

Notemos que cualquier morfismo de retículas si $f:A\to B$
preserva los complementos automáticamente, ya que, si $a\sup b=1$
y $a\inf b=0$, entonces
\begin{align*}
  f(a)\inf f(b)=f(a\inf b)=f(0)=0, \\
  f(a)\sup f(b)=f(a\sup b)=f(1)=1.
\end{align*} 
En particular, si $A$ y $B$ son álgebras booleanas, tenemos
$f(a')=f(a)'$. (En realidad, basta con que $B$ sea distributiva).
Entonces tiene sentido definir los morfismos de álgebras booleanas
simplemente como morfismos de retículas o, equivalentemente,
morfismos de retículas distributivas.
En otras palabras, definimos la categoría $\Bool$ de las álgebras
booleanas como
\[
  \Bool(A,B) = \DLat(A,B) = \Lat(A,B)
.\]

Así, la inclusión $\Bool\rmono\DLat$ exhibe a $\Bool$ como una
subcategoría plena de $\DLat$.
Hasta ahora, tenemos los siguientes funtores plenos entre
nuestras categorías
\[
    \begin{tikzcd}
        & \Pos \\
        \Pos^\wedge \arrow[ru]
            & \Lat \arrow[r] \arrow[l]
            & \Pos^\vee \arrow[lu] \\
        & \DLat \arrow[u,hook] \\
        & \Bool \arrow[u,hook]
    \end{tikzcd}
\]
donde los funtores marcados como $\rmono$ son fielmente plenos.

\section{Negaciones}
\label{ss:negaciones}

En \ref{ss:complementos-algebras-booleanas} dijimos que, dada una
retícula $A$, un complemento de $a\in A$ es otro elemento
$b\in A$ que cumple
\begin{align*}
  a\inf b &= 0 & a\sup b=1.
\end{align*}
Y vimos que, si $A$ es distributiva, entonces cada elemento
$a\in A$ tiene, a lo más, un complemento.
Ahora definiremos una noción relacionada: las negaciones.
\begin{defn}
  Si $A$ es una retícula, entonces una negación
  de $a\in A$ es un elemento $b\in A$ tal que
  \[
      x\leq b \ssi x\inf a=0
  \]
  para todo $x\in A$.
\end{defn}
Así, $b,b'$ son negaciones de $a$,
entonces $b\inf a=b'\inf a=0$ (porque $b\leq b$ y $b'\leq b'$).
Así, $b\leq b'$ y $b'\leq b$, por lo cual $b=b$.
Es decir, las negaciones son únicas en caso de existir, así que,
si un elemento $a\in A$ tiene negación,
ésta se denota como $\neg a$.
Nótese que, en este caso, para demostrar la unicidad
no se requirió que $A$ fuera distributiva.

Sin embargo, si $A$ es distributiva
y $a\in A$ tiene complemento $a'$ (único, por distributividad),
entonces $a'$ también es la negación de $a$, es decir, $\neg a=a'$.
En efecto, es claro que $x\leq a'\implies x\inf a=0$;
mientras que, si $x\inf a=0$, entonces
\begin{align*}
    x
    &= x\inf(a'\sup a) \\
    &= (x\inf a')\sup (x\inf a) \\
    &= x\inf a',
\end{align*}
por lo cual $x\leq a'$.

Juntando estas observaciones, obtenemos el siguiente resultado:
\begin{lemma}
  \label{lemma:complementado-ssi-supneg}
   Si $A$ es una retícula distributiva,
   un elemento $a\in A$ con negación tiene complemento $a'$
   si, y solo si, $\neg a\sup a=1$ y, en este caso, $a'=\neg a$.
\end{lemma}

En particular, en un álgebra booleana $A$, todo elemento $a\in A$
tiene negación dada por el complemento: $\neg a = a'$.

De la definición de la negación, tenemos que
$x\leq \neg\neg a$ si, y solo si, $x\inf\neg a=0$.
Dado que $a\inf\neg a=0$, podemos deducir que $a\leq\neg\neg a$.
Aunque en un álgebra booleana se tiene la otra comparación
(es decir, $\neg\neg a = a$),
esto no es cierto en general:

\begin{exa}
  \label{exa:negaciones-en-espacios-top}
  Sea $S$ un espacio topológico y consideremos el marco $\cal OS$.
  Todo abierto $u\in\cal O S$ tiene negación $\neg u$ en $\cal OS$.
  En efecto, para todo abierto $v\in\cal OS$ tenemos
  \begin{align*}
        u\cap v = \emptyset
        &\iff v\subseteq u' \\
        &\iff v\subseteq (u')^\circ \in\cal OS.
  \end{align*}
  Por lo tanto, $u$ tiene negación dada como
  $\neg u = (u')^\circ = {\ol u}'$.
  
  En particular, el abierto $u=(-1,0)\cup(0,1)\in\cal O\mathbb R$
  tiene cerradura $\ol u = [-1,1]$, así que
  \begin{align*}
    \neg\neg u
    &= \neg(\ol u ') \\
    &= \neg([-1,1]') \\
    &= ([-1,1]'')^\circ \\
    &= [-1,1]^\circ \\
    &= (-1,1) \\
    &\neq u.
  \end{align*}
\end{exa}

Es decir, aunque $\neg a$ tenga negación, en general
solo tenemos la comparación $a\leq\neg\neg a$.
Sin embargo, si $\neg\neg a$ tiene negación, entonces sí se
cumple que $\neg\neg\neg a=\neg a$.
En efecto, dado que
\[
  a \leq \neg\neg a
,\]
al hacer ínfimo con $\neg\neg a$ obtenemos
\begin{align*}
  \neg\neg\neg a\inf a
  &\leq \neg\neg\neg a\inf \neg\neg a  \\
  &= 0,
\end{align*}
lo cual, por definición de la negación, es equivalente a
$\neg\neg\neg a\leq\neg\neg a$, mientras que la otra comparación
$\neg a\leq\neg\neg\neg a$ ya la teníamos.

En el ejemplo \ref{exa:negaciones-en-espacios-top} encontramos
una retícula distributiva donde todo elemento tiene negación.
Ahora consideraremos ese tipo de retículas.

Por el lema \ref{lemma:complementado-ssi-supneg}, sabemos que
$a$ es tiene complemento $a'$ ssi $a\sup\neg a=1$.
Esto justifica el primer punto de la siguiente definición.
\begin{defn}
  Sea $A$ una retícula distributiva donde todo elemento tiene
  negación y tomemos un elemento $a\in A$.
  Decimos que
  \begin{itemize}
    \item $a$ es complementado si $a\sup\neg a=1$,
    \item $a$ es regular si $\neg\neg a = a$,
    \item $a$ es denso si $\neg a = 0$.
  \end{itemize}
\end{defn}

Nótese que $\neg a$ es regular para todo $a$, ya que
$\neg\neg\neg a =\neg a$.

\begin{exa}
  Consideremos un espacio topológico $S$ y un abierto $u\in\cal
  OS$. Por el ejemplo \ref{exa:negaciones-en-espacios-top},
  sabemos que $u$ tiene negación dada como $\neg u=\ol
  u'=(u')^\circ$.
  Por lo tanto
  \begin{enumerate}
    \item
    $u$ es complementado en el sentido de retículas
    ($u\sup\neg u=1$)
    si, y solo si, su complemento es abierto.
    \item
    el abierto $u$ es regular en el sentido de retículas
    ($\neg\neg u = u$)
    si, y solo si, es regular en el sentido topológico
    ($(\ol u)^\circ=u$).
    \item
    Similarmente, $u$ es denso como elemento de la retículas
    ($\neg u=0$)
    si, y solo si, es denso en el sentido topológico
    ($\ol u=S$).
  \end{enumerate}
\end{exa}

\begin{prop}%[Dante $\checkmark$ ]
  Un elemento $a$ de una retícula $A$ es denso
  ($\neg a=0$) si, y solo si $\neg\neg a = 1$.
\end{prop}
\begin{proof}
Tenemos
\begin{align*}
  \neg a = 0
  &\iff \neg a \leq 0 \\
  &\iff 1\inf \neg a \leq 0 \\
  &\iff 1\leq \neg\neg a \\
  &\iff 1=\neg\neg a.
\end{align*}
\end{proof}

%\section*{(SESIÓN 5: 23 SEP)}

\begin{prop}
  Si $A$ es una retícula distributiva y $a,b\in A$ tienen
  negación, entonces $a\sup b$ también tiene negación y tenemos
  \[
    \neg(a\sup b) = \neg a \inf \neg b
  .\]
\end{prop}
\begin{proof}
  Para cualquier $x\in A$, tenemos
  \begin{align*}
    x\inf(a\sup b) \leq 0
    &\iff (x\inf a)\sup(x\inf b) \leq 0 \\
    &\iff (x\inf a)\leq 0, \; (x\inf b) \leq 0 \\
    &\iff x\leq\neg a, \; x\leq\neg b \\
    &\iff x\leq(\neg a \inf \neg b).
  \end{align*}
  Así, $\neg a\inf\neg b$ es la negación de $a\sup b$, como se
  quería.
\end{proof}

Ahora, si en una retícula distrubutiva $A$ todos los elementos
tienen negación, entonces
\[
  \neg(a\sup\neg a) = \neg a\inf\neg\neg a = 0
,\]
por lo cual $a\sup\neg a$ siempre es denso.
Además
\begin{align*}
  \neg\neg a\inf(a\sup\neg a)
  &= (\neg\neg a\inf a)\sup(\neg\neg a\inf\neg a) \\
  &= a \inf 0 \\
  &= a,
\end{align*}
así que todo elemento $a\in A$ se puede expresar como el ínfimo
de un elemento denso y un elemento regular.

\begin{lemma}
  Sea $A$ una retícula distributiva donde todos los elementos
  tienen negación.
  Entonces $A$ es un álgebra booleana (todo elemento es
  complementado) si, y solo si, todo elemento es regular.
\end{lemma}
\begin{proof}
    $\Rightarrow )$ Supongamos que $A$ es booleana, entonces todo
    $a\in A$ cumple $a\vee \neg a=1$.
    Luego $\neg a\vee \neg\neg a=1$, es decir, $\neg\neg a$ es
    complementado.
    Como el complemento de $\neg a$ es único, se tiene que $\neg
    \neg a=a$. \\ 
    $\Leftarrow)$ Supongamos que todos los elementos de $A$ son
    regulares y sea $a\in A$.
    Como $a$ y $a\sup\neg a$ son regulares, tenemos
    $a\sup\neg a=\neg\neg (a\sup\neg a)=\neg(\neg
    a\wedge \neg\neg a)=\neg 0=1$.
    Por lo tanto, $a\vee \neg a=1$, es decir, $a$ es
    complementado. Con ello $A$ es un álgebra booleana.
\end{proof}

\section{Completez}
\label{ss:completez}
Decimos que un copo $A$ es superiormente completo
si cualquier subconjunto $X\subseteq A$ tiene supremo $\Sup X$.
En este caso, también decimos que $A$ es una $\Sup$-semiretícula.
Notemos que una $\Sup$-semiretícula es, en particular,
una $\sup$-semiretícula.
Un morfismo de $\Sup$-semiretículas (o $\Sup$-morfismo)
es una función que preserva supremos; es decir:
$f(\Sup X)=\Sup\{f(x)\mid x\in X\}$
para todo subconjunto $X\subseteq A$.

Las $\Sup$-semiretículas, junto con sus morfismos,
forman una categoría $\SupLat$.
Nótese que un morfismo de $\Sup$-semiretículas es un morfismo de
$\sup$-semiretículas (aunque no al revés),
así que tenemos un funtor $\SupLat\to\Pos^\sup$.
En particular, un $\Sup$-morfismo
también es una función monótona (ver \ref{ss:semireticulas}).

De manera completamente análoga, decimos que un copo es
inferiormente completo (o es una $\Inf$-semiretícula)
si todo $X\subseteq A$ tiene ínfimo $\Inf X$, tenemos
morfismos de $\Inf$-semiretículas y un funtor
$\InfLat\to\Pos^{\inf}$.

Decimos que un copo es completo (o una retícula completa)
si todo subconjunto $X\subseteq A$ tiene ínfimo $\Inf X$ y
supremo $\Sup X$. En particular, una retícula completa es una
$\Sup$-semiretícula y una $\Inf$-semiretícula.
Definimos un morfismo de retículas completas
como una función que es tanto $\Sup$-morfismo como
$\Inf$-morfismo.
En este caso, decimos que el morfismo es completo.
Así, las retículas completas y los morfismos completos forman una
categoría $\CLat$.

Si un copo $A$ es superiormente completo, entonces
dado un subconjunto $X\subseteq A$ podemos considerar el conjunto
$\cotInf X$ de cotas inferiores de $X$.
\[
  \cotInf X = \{c\in A \mid \forall x\in X, c\leq x\}
.\]
Notemos que, todo $x\in X$ es una cota superior de $\cotInf X$,
ya que tenemos $y\leq x$ para todo $y\in\cotInf X$.
Así, $\Sup\cotInf X\leq x$, por lo cual
$\Sup\cotInf X\in\cotInf X$.
Esto significa que $\Sup\cotInf X$ es el ínfimo de $X$:
\[
  \Sup\cotInf X = \Inf X
.\]
Como $X\subseteq A$ era cualquier subconjunto,
esto muestra que, si $A$ es superiormente completo, entonces
también es inferiormente completo.
Análogamente, si $A$ es inferiormente completo, entonces también
es superiormente completo, por lo cual hemos demostrado que

\begin{thm}
  Un copo $A$ es superiormente completo si, y solo si, es
  inferiormente completo.
\end{thm}

En otras palabras, las categorías $\InfLat$, $\SupLat$ y
$\CLat$ tienen exactamente los mismos objetos: las retículas
completas.
Es importante observar que esto no implca que las categorías
sean la misma:
en general, dadas dos retículas completas $A,B$, las contenciones
entre los conjuntos de morfismos
\[
  \InfLat(A,B)\supseteq \CLat(A,B)\subseteq\SupLat(A,B)
\]
son propias.
Es decir, hay $\Sup$-morfismos que no son $\Inf$-morfismos y
viceversa.
En cualquier caso, sí tenemos funtores fieles
$\SupLat \leftarrow \CLat \to \InfLat$.

En resumen, hasta ahora tenemos categorías y funtores fieles
\[
    \begin{tikzcd}
        & & \Pos & & \\
        & \Pos^\wedge \arrow[ru]
        & \Lat \arrow[l] \arrow[r]  
        & \Pos^\vee \arrow[lu] & \\
        & \InfLat \arrow[u]
            & \DLat \arrow[u,hook] &
            \SupLat \arrow[u] & \\
        & & \Bool \arrow[u,hook] & \\
        & & \CLat \arrow[ruu]
        \arrow[luu] & &
    \end{tikzcd}
\]
donde los funtores marcados como $\rmono$ son fielmente plenos.

%\section*{(SESIÓN 3: 14 SEP)}
\section{Marcos}
Hasta ahora, las definiciones y los teoremas han sido
completamente duales.
Ahora introducimos los marcos, que son un cierto tipo de
retículas completas, pero la simetría que hasta ahora hemos
observado deja de mantenerse.

La definición de un marco surge al estudiar las propiedades
algebraicas de las topologías:
si $S$ es un espacio topológico, la topología $\cal OS$ es
un subcopo del conjunto potencia $\cal PS$ que,
por definición, es cerrado bajo ínfimos finitos y
supremos arbitrarios. Es decir, $\cal OS$ es una
sub-$\inf$-semiretícula y una sub-$\Sup$-semiretícula de $\cal
PS$.
Además, como en $\cal PS$ se cumple la ley distributiva
$U\cap\bigcup \cal F=\bigcup\{U\cap V\mid V\in\cal F\}$,
entonces la misma ley se satisface en $\cal OS$.
Estas son las propiedades de una topología que abstrae un marco.

\begin{defn}
  Un marco $A$ es una retícula completa que satisface la siguiente
  ley distributiva:
  \[
      y\inf\Sup X = \Sup\{y\inf x\mid x\in X\}
  .\]
  En particular, un marco es una retícula distributiva.
  Un morfismo de marcos es un morfismo de copos que respeta
  supremos arbitrarios e ínfimos finitos.
  Ya que los $\inf$-morfismos y los $\Sup$-morfismos son cerrados
  bajo composición, también lo son los morfismos de marcos, con
  lo cual obtenemos una categoría $\Frm$.
\end{defn}

\begin{exa}
  \begin{enumerate}
    \item Dado un conjunto $S$ cualquiera, el conjunto potencia
    $\cal PS$ es un marco.
    \item Dados dos conjuntos $S,T$ y una función $f:S\to T$,
    la preimagen $f^{-1}:\cal PT\to\cal PS$ preserva ínfimos
    y supremos arbitrarios, así que, en particular, es un
    morfismo de marcos.
    \item Dado cualquier espacio topológico $S$, la topología
    $\cal OS$ es un marco y la inclusión $\cal OS\to\cal PS$
    es un morfismo de marcos.
    \item Dados dos espacios topológicos $S,T$ y una función
    continua $f:S\to T$, la preimagen $f^{-1}:\cal PT\to\cal
    PS$ manda abiertos en abiertos, así que se restringe a
    una función $\cal OT\to\cal OS$ que denotamos como $\cal
    Of$.
    En la parte \ref{part:espacio-de-puntos} de este texto,
    veremos que esta asignación es, de hecho, un funtor
    contravariante que forma parte de una
    adjunción entre $\Top$ y $\Frm$.
  \end{enumerate}
\end{exa}

Notemos que los morfismos de marcos pueden no preservar
ínfimos arbitrarios.
Además, en general,
los supremos finitos no distribuyen sobre ínfimos arbitrarios.

Nuestro diagrama de categorías ahora se ve así
\[
    \begin{tikzcd}
        &  & \Pos & & \\
        & \Pos^\wedge \arrow[ru]
        & \Lat \arrow[l] \arrow[r]
        & \Pos^\vee  \arrow[lu] & \\
        & & \DLat \arrow[u,hook] & & \\
        \InfLat \arrow[ruu]
        & & \Bool \arrow[u,hook]
        & \Frm \arrow[r] \arrow[lu]
        & \SupLat \arrow[luu] \\
        & & \\
        & & \CLat \arrow[rruu]
        \arrow[lluu] & &
    \end{tikzcd}
\]

\section{La completación de secciones inferiores}
Si $A$ es una $\inf$-semiretícula, nos gustaría encontrar un
marco $\hat A$ que complete a $A$ ``de la mejor manera posible''.

¿Qué tal el conjunto potencia $\cal PA$?
Es un álgebra booleana completa, tiene leyes distributivas
fuertes; quizá demasiado fuertes.
Además, la retícula que buscamos debería tener a $A$ como una
subretícula, mientras que
la función obvia $A\to\cal PA$ dada por $a\mapsto\{a\}$
no preserva el orden, así que no es una inclusión de
retículas.
Vamos a refinar esta situación.

Si $A$ es un copo, una sección inferior de $A$
es un subconjunto $L\subseteq A$ que "absorbe hacia abajo".
Es decir, si $a\leq b\in L$, entonces $a\in L$.

Denotemos como $\cal LA$ al conjunto de todas las secciones
inferiores en $A$.
Nótese que, por vacuidad, el conjunto vacío
$\emptyset\subseteq A$ es una sección inferior de $A$.
Además, la intersección de dos secciones
inferiores vuelve a ser una sección inferior, mientras que la
unión arbitraria de secciones inferiores también lo es.
En otras palabras, $\cal LA$ es un submarco de $\cal PA$.

Así, $\cal LA$ es una topología en $A$, que podríamos llamar la
topología de coespecialización. (La topología de especialización
en un copo $A$ es el conjunto de secciones superiores).
Las topologías de especialización y coespecialización tienen la
propiedad interesante de que una función entre dos copos es
monótona ssi es continua en la topología de
especialización ssi es continua en la topología de
coespecialización.
Sin embargo, ahora nos enfocaremos más en el aspecto reticular
de $\cal LA$ que en sus propiedades como topología de $A$.

Para cada subconjunto $F\subseteq A$, el conjunto
\[
  \down F = \{a\in A \mid \exists c\in F , a\leq c\} \subseteq A
\]
es una sección inferior.
De hecho, es la sección inferior más pequeña que contiene a $F$.
Decimos que $\down F$ es la sección inferior generada por $F$.
La asignación $F\mapsto\down F$ nos da una función
\[
  \down:\cal PA\to\cal PA
\]
cuyo conjunto de sus puntos fijos
(es decir, los $F\in\cal PA$ con $F=\down F$) es $\cal LA$.
Además, $\down$ es una función monótona, idempotente, infla
(es decir, $F\subseteq\down F$) y cumple $\down(F\cup G)=\down
F\cup\down G$.
En general, la igualdad $\down(F\cap G)=\down F\cap\down G$ no se
cumple. Sin embargo, si $A$ es una semiretícula inferior,
entonces tenemos una identidad similar.
Definiendo $F\inf G := \{x\inf y \mid x\in F, y\in G\}$,
tenemos $\down(F\inf G)= \down F\cap\down G$, ya que
\begin{align*}
  a\in\down(F\inf G)
  &\iff \exists(c\in F\inf G).(a\leq c) \\
  &\iff \exists(f\in F,g\in G).(a\leq f\inf g) \\
  &\iff \exists(f\in F,g\in G).(a\leq f, a\leq g) \\
  &\iff a\in \down F, a\in \down G \\
  &\iff a\in \down F\cap\down G.
\end{align*}

En particular, si $A$ es una $\inf$-semiretícula,
entonces la función
\begin{align*}
    \down : A&\to \cal LA \\
    a&\mapsto \down a:=\down\{a\}
\end{align*}
es un morfismo de $\inf$-semiretículas.
Así, $A$ se puede ver como una sub-$\inf$-semiretícula del marco
$\cal LA$.
En este sentido, $\cal LA$ ``le da'' a $A$ los supremos que le
faltan para ser un marco.
Además, es de esperarse que existan otros marcos $B$ y morfismos
de $\inf$-semiretículas $A\to B$. Sin embargo, afirmamos que
$\down:A\to\cal LA$ es el mejor de estos morfismos, en el sentido
de que $\down:A\to LA$ exhibe a $\cal LA$ como el marco libre
sobre la $\inf$-semiretícula $A$.

\begin{sol}
%[Alfredo $\checkmark$]
    Consideremos el funtor de olvido $U:\Frm\to\Pos^{\inf}$.
    Precomponer con $\down$ nos da una flecha
    \[
        \Frm(\cal LA,-)\to \Pos^{\inf}(A,U-)
    ,\]
    
    Resta ver que esta flecha es una biyección.
    Es decir, dado un morfismo $f:A\to B$
    de $\inf$-semiretículas,
    debemos probar que existe un único morfismo de marcos
    $f^\sharp:\cal LA\to B$ que factoriza a $f$ a través
    de $\down$:
    \[
        f^\sharp\down = f
    .\]
    Es decir, $f^\sharp(\down a)=f(a)$ para todo $a\in A$.
    Esta condición determina completamente a $f^\sharp$.
    En efecto, para toda sección inferior $F\in\cal LA$ tenemos
    $F=\bigcup\{\down a \mid a\in F\}$ y, como también queremos
    que $f^\sharp$ respete supremos, se debe cumplir
    \begin{align*}
        f^\sharp(F)
        &= \Sup\{f^\sharp(\down a) \mid a\in F\} \\
        &= \Sup\{f(a) \mid a\in F\}.
    \end{align*}
    Tomando esta ecuación como la definición de $f^\sharp$, es
    claro que $f^\sharp(\down a)=f(a)$.
    Por lo tanto, si $f^\sharp:\cal LA\to B$ es un
    morfismo de marcos, es el único con esta propiedad.
    Verificamos las propiedades directamente.
    \begin{itemize}
        \item En efecto, si $F\subseteq G\cal\in LA$, entonces 
        \[
            \{f(a) \mid a\in F\} \subseteq \{f(a) \mid a\in G\}
        .\]
        Tomando supremos, obtenemos
        $f^\sharp(F)\leq f^\sharp(G)$, así que $f^\sharp$ es
        monótona.
        \item
        Dadas $F,G\in\cal LA$, hay que mostrar
        que $f^\sharp(F\cap G)=f^\sharp(F)\inf f^\sharp(G)$.
        La comparación $\leq$ se sigue de la monotonía de
        $f^\sharp$.
        Por otro lado, observemos que
        \[
            \{ a\inf b \mid a\in F, b\in G\}
            \subseteq F\cap G,
            \hspace{10mm} (*)
        \]
        pues $F$ y $G$ son secciones inferiores.
        Luego,
        \begin{align*}
            f^\sharp(F)\inf f^\sharp(G)
            &= \Sup\{f(a)\inf f(b) \mid a\in F, b\in G\}
                && \text{ ley dist. de marcos } \\
            &= \Sup\{f(a\inf b) \mid a\in F, b\in G\} \\
            &\leq \Sup\{f(c) \mid c\in F\cap G\}
                && \text{ por $(*)$ } \\
            &= f^\sharp(F\cap G),
        \end{align*}
        como se quería.
        \item
        Dado $X\subseteq \cal LA$, hay que mostrar que
        $f^\sharp(\bigcup X)=\Sup\{f^\sharp(F) \mid F\in X\}$.
        Como $f^\sharp$ es monótona,
        $f^\sharp(\bigcup X)$ es cota superior de
        $\{f^\sharp(F) \mid F\in X\}$.
        Para ver que es la mínima, sea $b\in B$ tal que
        $f^\sharp(F)\leq b$ para todo $F\in X$.
        Por definición de $f^\sharp$, esto significa que
        $f(a)\leq b$ para cualesquiera $a\in F, F\in X$.
        Luego,
        \begin{align*}
            f^\sharp(\bigcup X)
            &= f^\sharp (
            \{a\in A \mid a\in F\text{ para algún }F\in X\}
            ) \\
            &=
            \Sup\{f(a)\in A \mid a\in F\text{ para algún }F\in X\}) \\
            &\leq b,
        \end{align*}
        como se deseaba.
    \end{itemize}
    Por lo tanto, $f^\sharp$ es morfismo de marcos.
    Así, tenemos un isomorfismo
    \[
        \Frm(\cal LA,-)\xto{-\circ \down} \Pos^{\inf}(A,U-)
    \]
    y, así, $\cal LA$ es el marco libre en $A$.
    
    Observemos que esto es válido para cualquier
    semiretícula $A$.
    Más aún, dado un morfismo de $\inf$-semiretículas
    $g:A\to A'$, la composición
    \[
        \cal LA' \lar \down A' \lar g A
    \]
    es un morfismo de $\inf$-semiretículas y
    $\cal LA'$ es un marco, así que
    existe un único morfismo de marcos
    $g^\sharp:\cal LA\to \cal LA'$ que factoriza a
    $\down g$ a través de $\down:A\to \cal LA$.
    Si definimos $\cal Lg=g^\sharp:\cal LA\to\cal LA'$,
    obtenemos una función
    \[
        \Pos^{\inf}(A,A') \to \Frm(\cal LA,\cal LA')
    .\]
    Más aún, las propiedades de unicidad de
    $\cal Lg=g^\sharp$ aseguran que $\cal L$ es un funtor
    $\cal L:\Pos^{\inf}\to\Frm$.
    Luego, tenemos una adjunción $\cal L\dashv U$
    (ver \ref{ss:adjunciones}).
\end{sol}


\section{Álgebras booleanas completas}
Recordemos que un álgebra booleana es una retícula distributiva
donde todo elemento tiene un complemento, el cual es único por la
distributividad. (Ver \ref{ss:complementos-algebras-booleanas}).
Un álgebra booleana completa es un álgebra booleana que es
completa como retícula. (Ver \ref{ss:completez}).

También recordemos que, en un álgebra booleana, la negación
coincide con el complemento, así que la función $\neg:A\to A$
que cumple $\neg\neg=\id_A:A\to A$. (Ver \ref{ss:negaciones}).

La categoría $\CBA$ de las álgebras booleanas completas se define
estipulando que los morfismos entre dos álgebras booleanas
completas $A,B$ son los morfismos completos:
\[
  \CBA(A,B)=\CLat(A,B)
.\]
Es decir, funciones que preservan supremos arbitrarios e
ínfimos arbitrarios.
Así, tenemos una inclusión $\CBA\rmono\CLat$.
En particular, los morfismos de álgebras booleanas completas
son morfismos de álgebras booleanas,
ya que preservan supremos e ínfimos finitos, por lo cual tenemos
un funtor fiel $\CBA\to\CLat$. Sin embargo no todo morfismo de
álgebras booleanas entre álgebras booleanas completas preserva
los supremos e ínfimos arbitrarios, así que este funtor no
es pleno.

El primer objetivo de esta sección es probar que el funtor
compuesto $\CBA\to\Bool\rmono\DLat$ se factoriza a través de
$\Frm$, para lo cual es suficiente mostrar que toda álgebra
booleana completa es un marco, pues los morfismos completos son
morfismos de marcos automáticamente.

Para esto, demostraremos un lema que usaremos recurrentemente.

\begin{lemma}[Caballo de batalla] \label{lemma:caballo}
    Sea $A$ una retícula distributiva
    y $a\in A$ un elemento complementado.
    Entonces $\neg a = a'$ satisface
    \[
        a\inf x \leq y  \ssi x\leq \neg a\sup y
    \]
    para cualesquiera $x,y\in A$.
\end{lemma}
\begin{proof}
    Por un lado, supongamos que $a\inf x\leq y$.
    Entonces
    \begin{align*}
        x
        &= x \inf 1 \\
        &= x \inf (a\sup \neg a) \\
        &= (x\inf a)\sup(x\inf\neg a) \\
        &\leq y \sup (x\inf \neg a) \\
        &\leq y \sup \neg a.
    \end{align*}
    Recíprocamente, si $x\leq \neg a\sup y$, entonces tenemos
    \begin{align*}
        a\inf x
        &\leq a\inf(\neg a\sup y) \\
        &= (a\inf\neg a) \sup (a\inf y) \\
        &= 0\sup (a\inf y) \\
        &= a\inf y \\
        &\leq y,
    \end{align*}
    como se quería.
\end{proof}

Con nuestro caballo de batalla, demostraremos el siguiente
resultado.

\begin{lemma}
    Toda álgebra booleana completa $A$ es un marco.
    Es decir, satisface la distributividad de marcos
    \[
        a\inf\Sup X = \Sup\{a\inf x\mid x\in X\}
    \]
    para cualesquiera $a\in A$ y $X\subseteq A$.
\end{lemma}
\begin{proof}
    Por un lado, para todo $x\in X$ tenemos que $x\leq\Sup X$, así que
    $a\inf x\leq a\inf\Sup X$.
    Luego,
    \[
        \Sup\{a\inf x\mid x\in X\} \leq a\inf\Sup X
    ,\]
    así que solo resta demostrar la otra comparación:
    \[
        a\inf\Sup X \leq \Sup\{a\inf x\mid x\in X\}
    .\]
    Aquí es donde usamos nuestro lema.
    Éste nos dice que la comparación anterior es equivalente a
    \[
        \Sup X \leq \neg a\sup \Sup\{a\inf x\mid x\in X\}
    ,\]
    lo cual es fácil: en efecto, tenemos
    \begin{align*}
        \neg a\sup\Sup\{a\inf x\mid x\in X\}
        &= \Sup\{\neg a \sup(a\inf x) \mid x\in X\} \\
        &= \Sup\{(\neg a\sup a)\inf(\neg a\sup x) \mid x\in X\} \\
        &= \Sup\{1\inf(\neg a\sup x) \mid x\in X\} \\
        &= \Sup\{\neg a\sup x \mid x\in X\} \\
        &\geq \Sup\{x \mid x\in X\} \\
        &= \Sup X,
    \end{align*}
    ya que $\neg a\sup x\geq x$ para todo $x\in X$.
    Esto es lo que se quería.
\end{proof}

Tomemos dos álgebras booleanas completas $A,B$.
El resultado anterior nos dice que $A$ y $B$ son marcos.
Además, como los morfismos $\CBA(A,B)$ son morfismos completos,
así que también son morfismos de marcos, ya que preservan supremos
arbitrarios e ínfimos finitos.
Es decir, tenemos una inclusión entre los conjuntos de morfismos
\[
  \CBA(A,B) \subseteq \Frm(A,B)
.\]
Como habíamos anunciado, esto muestra que el funtor
$\CBA\to\Bool\rmono\DLat$ se factoriza a través de $\Frm$, por lo
cual que tenemos un diagrama conmutativo de funtores fieles
\[
  \begin{tikzcd}
    \CBA \ar[r] \ar[d] & \Frm \ar[d] \\
    \Bool \ar[r,hook] & \DLat.
  \end{tikzcd}
\]
(De nuevo, $\rmono$ indica un funtor fielmente pleno).
El segundo objetivo de la sección es mostrar que el lado superior
de este cuadrado también es fielmente pleno.
Para lograr esto, primero demostraremos el siguiente resultado.

\begin{lemma}[Ley de DeMorgan]
  Sea $A$ un álgebra booleana completa y $X\subseteq A$.
  Entonces
  \[
    \neg \Inf X = \Sup \{\neg x \mid x\in X\}
  .\]
\end{lemma}
\begin{proof}
  Sabemos que, como $A$ es booleana, la negación es el complemento.
  Por lo tanto, basta mostrar que
  $\Inf X$ y $\Sup \{\neg x \mid x\in X\}$ son complementarios;
  es decir: que su ínfimo es $0$ y su supremo es $1$.
  Por un lado, cualquier $x\in X$ cumple $\Inf X\leq x$, así que
  \[
      \Inf X\inf\neg x \leq x\inf \neg x = 0.
  \]
  Luego, por la ley distributiva de marcos, tenemos
  \begin{align*}
      \Inf X \inf \Sup\{\neg X\mid x\in X\}
      &= \Sup\{\Inf x \inf \neg x\mid x\in X\} \\
      &= \Sup\{0\} \\
      &= 0.
  \end{align*}
  Por otro lado, para todo $x\in X$ tenemos
  $\neg x\leq \Sup\{\neg x\mid x\in X\}$.
  Usando el caballo de batalla dos veces, vemos que esto equivale a
  $\neg\Sup\{\neg x\mid x\in X\}\leq x$.
  Como $x\in X$ era arbitraria, tenemos que
  \[
      \neg\Sup\{\neg x\mid x\in X\}\leq \Inf X
  .\]
  Usando el caballo de batalla una vez más, obtenemos
  \[
      1\leq \Sup\{\neg x\mid x\in X\} \sup \Inf X
  .\]
  Esto concluye la demostración.
\end{proof}

Usando la ley de DeMorgan que acabamos de demostrar,
podemos probar lo que queríamos. De hecho, podemos probar un poco
más.
\begin{lemma}
    Cualquier morfismo de marcos $f:A\to B$,
    donde $A$ es un álgebra booleana completa,
    también respeta los ínfimos arbitrarios.
\end{lemma}
\begin{proof}
    Por un lado, la desigualdad
    \[
        f(\Inf X)\leq\Inf\{f(x)\mid x\in X\}
    \]
    viene de la monotonía de $f$.
    Por otro lado, como $\Inf X$ y $\Sup\{\neg x\mid x\in X\}$
    son complementarios en $A$ (por DeMorgan)
    y $f$ preserva los complementos
    (pues respeta ínfimos y supremos finitos), entonces $f(\Inf X)$
    y $\Sup\{f(\neg x)\mid x\in X\}$ son complementarios en $B$.
    Luego, la desigualdad faltante
    \[
        \Inf\{f(x)\mid x\in X\} \leq f(\Inf X)
    \]
    es equivalente, por nuestro caballo de batalla, a la desigualdad
    \[
        \Inf\{f(x)\mid x\in X\} \inf \Sup\{f(\neg x)\mid x\in X\} = 0,
    \]
    la cual es sencilla de comprobar: para todo $y\in X$, tenemos
    \begin{align*}
        \Inf\{f(x)\mid x\in X\} \inf f(\neg y)
        &\leq f(y)\inf f(\neg y) \\
        &\leq f(y\inf \neg y) \\
        &= 0,
    \end{align*}
    así que la distributividad de marcos implica
    \begin{align*}
        \Inf\{f(x)\mid x\in X\} \inf \Sup\{f(\neg x)\mid x\in X\}
        &= \Sup\Big\{\Inf\{f(x)\mid x\in X\}\inf f(\neg y)
            \;\;\Big|\;\; y\in X\Big\} \\
        &= \Sup\{0\} \\
        &= 0.
    \end{align*}
\end{proof}

En particular, si $A,B$ son álgebras booleanas completas,
cualquier morfismo de marcos $f:A\to B$ es un morfismo
completo.
Es decir, la inclusión $\CBA(A,B) \subseteq \Frm(A,B)$
es una igualdad:
\[
    \CBA(A,B) = \Frm(A,B).
\]
Por lo tanto, $\CBA$ es una subcategoría plena de $\Frm$.
Nuestro diagrama ahora se ve como sigue:
\[
    \begin{tikzcd}
        &  & \Pos & & \\
        & \Pos^\wedge \arrow[ru]
        & \Lat \arrow[l] \arrow[r]
        & \Pos^\vee  \arrow[lu] & \\
        & & \DLat \arrow[u,hook] & & \\
        \InfLat \arrow[ruu]
        & & \Bool \arrow[u,hook]
        & \Frm \arrow[r] \arrow[lu]
        & \SupLat \arrow[luu] \\
        & & \CBA \arrow[d] \arrow[u] \arrow[ur,hook] 
        & & \\
        & & \CLat \arrow[rruu]
        \arrow[lluu] & &
    \end{tikzcd}
\]

%\section*{(SESIÓN 4: 21 SEP)}

\section{Implicaciones}

Una implicación en una semiretícula inferior $A$ es una operación
$(-\succ -):A\to A$ tal que, para cualesquiera $a,x,y\in A$ se tiene
\[
  x\inf y\leq a \ssi x\leq (y\succ a )
.\]

\begin{exa}
  En un álgebra booleana, nuestro caballo de batalla nos dice que
  \[
    x\inf y\leq a \ssi
    x\leq \neg y\sup a
  .\]
  Por lo tanto, toda álgebra booleana tiene implicación dada
  como $(y\succ a)=\neg y\sup a$.
\end{exa}

Ahora vienen dos lemas técnicos.
\begin{lemma}
  Sea $A$ una $\inf$-semiretícula con implicación.
  Entonces
  \begin{enumerate}
    \item $(x\succ -)$ infla.
    \item $x\inf(x\succ a) = x\inf a$
    \item $(-\succ a)$ es antítona.
  \end{enumerate}
\end{lemma}
\begin{proof}
    \begin{enumerate}
        \item Como $a\wedge x\leq a$, tenemos
        $a\leq (x\succ a).$
        \item Consideremos $a, x\in A$.
        Para cada $z$ tenemos que 
        \begin{align*}
            z\leq x\wedge (x\succ a)
            & \iff z\leq x \mbox{ y } z\leq (x\succ a)\\
            & \iff z\leq x \mbox{ y } z\wedge x\leq a\\
            & \iff z\leq x \mbox{ y } z\leq a\\
            & \iff z\leq a\wedge x.
        \end{align*}
        Por lo tanto $x\inf(x\succ a) = x\inf a$.
        \item Supongamos que $x\leq y$. Consideremos $z=(y\succ a)$, entonces $x\wedge z\leq y\wedge z$ y por los incisos anteriores de este lema, $y\wedge z\leq a$. Así, $x\wedge z\leq a$ y por la definición de implicación obtenemos que $(y\succ a)\leq (x\succ a)$. 
    \end{enumerate}
\end{proof}

\begin{lemma}
  \label{lemma:w-cerradura}
  Sea $A$ una $\inf$-semiretícula con implicación.
  Para cualquier elemento $a\in A$, la función
  $((-\succ a)\succ a):A\to A$ tiene las siguientes propiedades.
  \begin{enumerate}
    \item $((-\succ a)\succ a)$ infla.
    (Inmediado del punto 2 del lema anterior).
    \item $((-\succ a)\succ a)$ es monótona.
      (Inmediato del punto 3 del lema anterior).
    \item $((-\succ a)\succ a)$ es idempotente.
  \end{enumerate}
\end{lemma}
\begin{proof}
  Solo falta probar el punto 3.
  Por el punto 1, tenemos
  \[
    (x\succ a) \leq (((x\succ a)\succ a)\succ a),
  \]
  así que resta probar
  \[
     (((x\succ a)\succ a)\succ a) \leq (x\succ a),
  \]
  que, por definición de la implicación, equivale a
  \[
     (((x\succ a)\succ a)\succ a) \inf x \leq a.
  \]
  Recordemos que $x\leq ((x\succ a)\succ a)$, porque $((-\succ
  a)\succ a)$ infla, y que
  $(y\succ a)\inf y = y\inf a$ para todo $y\in A$.
  En particular, para $y=((x\succ a)\succ a)$, tenemos
  \begin{align*}
     (((x\succ a)\succ a)\succ a) \inf x
     &\leq (((x\succ a)\succ a)\succ a)
       \inf ((x\succ a)\succ a) \\
     &= (y\succ a) \inf y \\
     &= y \inf a \\
     &\leq a,
  \end{align*}
  como se quería. 
\end{proof}

En el capítulo \ref{ch:cocientes} definiremos los operadores
cerradura como funciones $A\to A$ que cumplen estas tres
propiedades (definición \ref{def:operador-cerradura}).
Allí veremos que estos operadores juegan un papel
importante en el contexto de $\Sup$-semirretículas.

Así, el resultado anterior dice que, si $A$ es una
$\inf$-semiretícula con implicación,
entonces $((-\succ a)\succ a)$ es un operador cerradura.
Además, el operador $((-\succ a)\succ a)$ tiene otra propiedad:
preserva ínfimos.

\begin{lemma}
  \label{lemma:modalidad-w}
  Si $A$ es una $\inf$-semirretícula con implicación, entonces
  \[
    (((x\inf y)\succ a)\succ a)
    =
    ((x\succ a)\succ a) \inf
    ((y\succ a)\succ a)
  .\]
\end{lemma}
\begin{proof}
  Por un lado, como $((-\succ a)\succ a)$ es monótono, tenemos
  \begin{align*}
    (((x\inf y)\succ a)\succ a)
    &\leq ((x\succ a)\succ a)
    \\
    (((x\inf y)\succ a)\succ a)
    &\leq ((y\succ a)\succ a)
  \end{align*}
  así que $(((x\inf y)\succ a)\succ a)$ es cota inferior de
  $((x\succ a)\succ a)$ y $((y\succ a)\succ a)$.

  Ahora, dada cualquier cota inferior $z$ de estos dos elementos,
  queremos probar que $z \leq (((x\inf y)\succ a)\succ a)$,
  lo cual equivale a $z\inf((x\inf y)\succ a)\leq a$.
  Como $z$ es cota inferior, tenemos
  \begin{align*}
    z&\leq ((x\succ a)\succ a)
    &
    z&\leq ((y\succ a)\succ a)
  \end{align*}
  lo cual, por definición de la implicación, es
  \begin{align*}
    z\inf (x\succ a) &\leq a
    &
    z\inf (y\succ a) &\leq a.
  \end{align*}
  Ahora sea $w=((x\inf y)\succ a)$, de modo que
  \begin{align*}
    z\inf w\inf x\inf y
    &= z\inf ((x\inf y)\succ a)\inf(x\inf y) \\
    &\leq z\inf a \\
    &\leq a
  \end{align*}
  por definición de la implicación, esto nos da
  \begin{align*}
    z\inf w \inf x &\leq (y\succ a).
  \end{align*}
  Al hacer ínfimo con $z$ obtenemos
  \begin{align*}
    z\inf w \inf x
    &\leq z\inf (y\succ a) \leq a
  \end{align*}
  aplicando de nuevo la definición de la implicación,
  \begin{align*}
    z\inf w &\leq (x\succ a)
  \end{align*}
  y haciendo ínfimo con $z$,
  \begin{align*}
    z\inf w &\leq z\inf (x\succ a) \leq a
  \end{align*}
  Luego, $z\leq (w\succ a)=(((x\inf y)\succ a)\succ a)$,
  como se quería.
\end{proof}

También en el capítulo \ref{ch:cocientes}, veremos que
los operadores cerradura con esta propiedad, llamados núcleos
(definición \ref{def:nucleo}) tienen gran
relevancia en el contexto de marcos.

\section{Álgebras de Heyting}

Si una retícula tiene implicación, diremos que es un álgebra de
Heyting.
Un morfismo de álgebras de Heyting es un morfismo de retículas
que preserva la implicación.
Observemos que toda álgebra de Heyting tiene una
negación dada por $\neg a = (a\succ 0)$.

\begin{lemma}
  Toda álgebra de Heyting es distributiva, por lo que
  tenemos un funtor de inclusión $\Heyt\to\DLat$.
\end{lemma}

\begin{proof}
    Notemos que $a\wedge b \leq (a\wedge b)\vee (a\wedge c)$ y de igual manera $a\wedge c\leq  (a\wedge b)\vee (a\wedge c)$. Por la definición de implicación, estas desigualdades equivalen a las siguientes:
    $$b\leq (a \succ ((a \wedge b) \vee (a \wedge c))) \mbox{ y } c \leq (a\succ ((a \wedge b) \vee (a \wedge c)))$$
    Entonces $b \vee c \leq (a \succ ((a \wedge b) \vee (a \wedge c)))$ y de nuevo por la definición de implicación resulta $a \wedge (b \vee c)\leq (a\wedge b)\vee (a \wedge c)$. Además, para cualquier retícula se cumple que $a \wedge (b \vee c)\geq (a\wedge b)\vee (a \wedge c)$, es decir, $a \wedge (b \vee c)= (a\wedge b)\vee (a \wedge c)$, pero esto pasa si y sólo si $a \vee (b \wedge c)= (a\vee b)\wedge (a \vee c)$. Por lo tanto, toda álgebra de Heyting es distributiva.
\end{proof}

\begin{thm}
  Una retícula completa $A$ es un marco si, y solo si, $A$ tiene
  implicación.
\end{thm}
\begin{proof}
    $\Rightarrow )$ Supongamos que $A$ es un marco y sean $a,b\in A$.
    Consideremos el elemento
    $$y=\Sup\{c\in A\mid a\wedge c\leq b\}$$
    Por un lado, para todo $x\in A$ se tiene
    $a\wedge x\leq b\implies x\leq y$,
    pues es consecuencia directa de la definición de $y$.
    Ahora, si $x\leq y$, tenemos que 
    \begin{align*}
        a\inf x
        & \leq a\inf y \\
        & = a\inf\Sup\{x\in A\mid a\inf x\leq b\}\\
        & = \Sup \{a\inf x \mid a\inf x\leq b\}\leq b
    \end{align*}
    Por lo tanto, $a\wedge x\leq b\Leftrightarrow x\leq y$,
    así que $y=(a\succ b)$. \\
    $\Leftarrow )$ Supongamos que $A$ tiene implicación.
    Sean $a\in A$ y $X\subseteq A$.
    Basta probar que $A$ cumple la LDM.
    Como $a\inf x\leq a\inf\Sup X$, tenemos que
    $\Sup\{x\inf a\mid x\in X\}\leq a\inf\Sup X$.
    Solo falta demostrar la otra desigualdad. Consideremos $y=\bigvee\{x\wedge a\mid x\in X\}$, entonces $a\wedge x\leq y$ para toda $x\in X$, es decir, $x\leq (a\succ y)$ para toda $x\in X$. Entonces $\bigvee X\leq (a\succ y)\Leftrightarrow a\wedge\bigvee X\leq y=\bigvee \{x\wedge a\mid x\in X\}$. Por lo tanto se cumple la LDM.
\end{proof}

En particular, este resultado nos dice que un marco es lo mismo
que un álgebra de Heyting completa.
Sin embargo, los morfismos de marcos no necesariamente respetan
la implicación, ni los morfismos de álgebras de Heyting
necesariamente respetan los supremos arbitrarios.
En particular, la inclusión $\Ob(\Frm)\to\Ob(\Heyt)$
no se extiende a un funtor $\Frm\to\Heyt$.

\begin{exa}
  Sea $S$ un espacio topológico.
  Por el teorema anterior, dados $u,v\in\cal OS$
  existe la implicación $v\succ u\in \cal OS$.
  Para todo $w\in\cal OS$, tenemos
  \begin{align*}
    w\leq (v\succ u)
    &\iff w\cap v\leq u \\
    &\iff w\leq v'\cup u \\
    &\iff w\leq (v'\cup u)^\circ.
  \end{align*}
  Se sigue que $v\succ u = (u\cup v')^\circ$.
\end{exa}

\begin{exa}
  Ya vimos que toda álgebra booleana $A$ tiene implicación dada
  como $v\succ u = \neg v\sup u$, así que $A$ también
  es un álgebra de Heyting.
  Además, como un morfismo de álgebras booleanas preserva supremos
  e ínfimos finitos y negaciones, se sigue que
  también respeta las implicaciones, por lo cual es morfismo
  de álgebras booleanas.
  Por lo tanto, tenemos un funtor de inclusión $\Bool\to\Heyt$.
\end{exa}

Ahora nuestro diagrama de inclusiones se ve así:
\[
    \begin{tikzcd}
        &  & \Pos & & \\
        & \Pos^\wedge \arrow[ru]
        & \Lat \arrow[l] \arrow[r]
        & \Pos^\vee  \arrow[lu] & \\
        & & \DLat \arrow[u,hook] & & \\
        \InfLat \arrow[ruu]
        & \Heyt \arrow[ur]
        & \Bool \arrow[l] \arrow[u,hook]
        & \Frm \arrow[r] \arrow[lu]
        & \SupLat \arrow[luu] \\
        & & \CBA \arrow[d] \arrow[u] \arrow[ur] 
        & & \\
        & & \CLat \arrow[rruu]
        \arrow[lluu] & &
    \end{tikzcd}
\]

\begin{lemma}
    Sean $A$ un marco, $a\in A$ y $X\subseteq A$.
    Entonces
    \[
        (\Sup X)\succ a = \Inf\{(x\succ a) \mid x\in X\}
    .\]
    En particular, tomando $X=\{x,y\}$, tenemos
    \[
        (x\sup y)\succ a = (x\succ a)\inf(y\succ a)
    .\]
\end{lemma}
\begin{proof}
    Para todo $y\in A$, tenemos
    \begin{align*}
        y\leq (\Sup X)\succ a
        &\iff y\inf \Sup X \leq a \\
        &\iff \Sup\{y\inf x\mid x\in X\} \leq a \\
        &\iff (\forall x\in X,\; y\inf x\leq a) \\
        &\iff (\forall x\in X,\; y\leq(x\succ a)) \\
        &\iff y\leq \Sup\{(x\succ a)\mid x\in X\}.
    \end{align*}
\end{proof}

\begin{exe}[Para el lector]%[Armando]
  Dado un copo $A$,
  ¿Quién será la negación y la implicación en $\cal LA$?
\end{exe}

\section{Morfismos adjuntos de copos}
\label{ss:adj-copos}
Recordemos que, cuando vemos a $A$ y a $B$ como categorías,
un morfismo de copos $f:A\to B$ es lo mismo que un funtor,
así que podemos aplicar el concepto de adjunción entre funtores.
En este caso, dos morfismos de copos $f:A\to B$, $g:B\to A$
cumplen $(f\dashv g)$ (es decir, $g$ es adjunto derecho de $f$ y
$f$ es adjunto izquierdo de $g$) si
\[
    B(fa,b) \simeq A(a,gb)
;\]
esto es:
\[
    fa\leq b \ssi a\leq gb
.\]

\begin{exa}
  Sea $A$ un álgebra de Heyting (por ejemplo, un marco).
  Para todo $a\in A$ a implicación $(a\succ -)$ es
  el adjunto derecho del ínfimo $-\inf a$, pues
  \[
    y\inf a\leq b \ssi y\leq (a\succ b)
  .\]
\end{exa}

\begin{exa}
  \label{exa:adjuncion-potencia}
  Sea $\phi:S\to T$ una función entre conjuntos.
  Entonces la imagen directa $\phi_!:\cal PS\to\cal PT$ y
  la imagen inversa $\phi^{-1}:\cal PT\to\cal PS$, definidas para
  cualesquiera $U\subseteq S$ y $V\subseteq T$ como
  \begin{align*}
    \phi_!(U)
    &= \{\phi(x) \mid x\in U\}
    = \{y\in Y\mid \exists x\in U, y=\phi(x) \}
    \\
    \phi^{-1}(V)
    &= \{x\in X \mid \phi(x)\in V\}
  \end{align*}
  son morfismos de copos que satisfacen
  \begin{align*}
    \phi_!(U) \subseteq V
    &\iff \forall x\in U, \phi(x)\in V \\
    &\iff \forall x\in U, x\in \phi^{-1}(V) \\
    &\iff U\subseteq \phi^{-1}(V),
  \end{align*}
  así que $\phi_!\dashv \phi^{-1}$.

  Más aún, $\phi^{-1}$ también tiene adjunto derecho. En efecto,
  tenemos
  \begin{align*}
    \phi^{-1}(V) \subseteq U
    &\iff U'\subseteq \phi^{-1}(V)' \\
    &\iff U'\subseteq \phi^{-1}(V') \\
    &\iff \phi_!(U')\subseteq V' \\
    &\iff V\subseteq \phi_!(U')'.
  \end{align*}
  Así, definiendo $\phi_?:\cal PS\to\cal PT$ por la fórmula
  $\phi_?(U)=\phi_!(U')'$, tenemos $\phi^{-1}\dashv \phi_?$.
  Explícitamente,
  \begin{align*}
    \phi_?(U)
    &= \{y\in T \mid x\not\in \phi_!(U') \} \\
    &= \{y\in T \mid \forall x\in U', y\neq \phi(x) \}.
  \end{align*}
\end{exa}

\begin{exa}%[Dante $\checkmark$ ]
  \label{exa:adjunto-derecho-top}
  Si $\phi:S\to T$ es una función continua entre espacios
  topológicos, el morfismo de marcos
  $\phi^*=\cal O\phi:\cal OT\to\cal OS$,
  definido como $\phi^*(v)=\phi^{-1}(v)$ para cada $v\in\cal OT$,
  tiene adjunto derecho.
  Si $\phi_?:\cal PS\to\cal PT$ es el adjunto derecho de la
  preimagen $\phi^{-1}:\cal PT\to\cal PS$ (ver ejemplo
  \ref{exa:adjuncion-potencia}), tenemos
  \begin{align*}
    \phi^*(v) \leq u
    &\iff \phi^{-1}(v) \leq u \\
    &\iff v \leq \phi_?(u) \\
    &\iff v\leq \phi_?(u)^\circ,
  \end{align*}
  ya que $\phi_?(u)^\circ$ es el abierto más grande contenido en
  $\phi_?(u)$.
  Por lo tanto, el adjunto derecho $\phi_*:\cal OS\to\cal OT$ de
  $\phi^*$ se calcula como
  \begin{align*}
    \phi_*(u) &= \phi_?(u)^\circ = (\phi_!(u')')^\circ = \ol{\phi_!(u')}',
  \end{align*}
  donde $\phi_!:\cal PS\to\cal PT$ es la imagen directa.
\end{exa}

\begin{lemma}
    Sea $f:A\to B$ un morfismo de $\Sup$-semiretículas
    (por ejemplo, un morfismo de marcos).
    Entonces la función $f_*:B\to A$ dada como
    \[
        f_*(b) = \Sup\{x\in A \mid f(x)\leq b\} 
    \]
    es un morfismo de copos y es adjunto derecho de $f$.
    Más aún, $f_*$ es morfismo de $\Inf$-semiretículas.
\end{lemma}
\begin{proof}
    Sea $X=\{x\in A\mid f(x)\leq b\}$.
    Si $a\in A$ es tal que $f(a)\leq b$, entonces $a\in X$,
    por lo cual
    \[
        a\leq \Sup X= f_*(b)
    .\]
    Recíprocamente, si $a\leq f_*(b)=\Sup X$, entonces
    \begin{align*}
        f(a)
        &\leq f(\Sup X) \\
        &= \Sup\{f(x)\mid f(x)\leq b\} \\
        &\leq b,
    \end{align*}
    ya que $f$ preserva supremos.

    La monotonía de $f_*$ se sigue de que preserva ínfimos (lo
    cual probaremos abajo) pero de todos modos es fácil verlo,
    así que lo haremos por separado.
    Si tenemos $b\leq c\in B$, entonces
    \[
        \{x\in X\mid f(x)\leq b\} \subseteq
        \{x\in X\mid f(x)\leq c\}.
    \]
    Aplicando supremos, obtenemos $f_*(b)\leq f_*(c)$.
    
    Finalmente, veamos que $f_*$ preserva ínfimos.
    Si $Y\subseteq B$ es cualquier subconjunto,
    entonces todo $a\in A$ cumple
    \begin{align*}
        a\leq f_*(\Inf Y)
        &\iff f(a)\leq \Inf Y \\
        &\iff (\forall y\in Y,\; f(a)\leq y) \\
        &\iff (\forall y\in Y,\; a\leq f_*(y)) \\
        &\iff a\leq \Inf\{f_*(y) \mid y\in Y\}.
    \end{align*}
    Se sigue que $f_*(\Inf Y)=\Inf\{f_*(y)\mid y\in Y\}$.
\end{proof}

Sin embargo, nótese que, aunque $f:A\to B$ sea un morfismo
de marcos, su adjunto derecho $f_*:B\to A$
puede no preservar supremos finitos.

\section{Monomorfismos y epimorfismos}

Recordemos que, dada una categoría $\cal C$, un morfismo es
\begin{itemize}
    \item un monomorfismo si es cancelable por la izquierda,
    \item un epimorfismo si es cancelable por la derecha y
    \item un bimorfismo si es monomorfismo y epimorfismo.
\end{itemize}

\begin{exe}[Para el lector]%[Armando]
    Muéstrese que, en la categoría $\Top$ de los espacios topológicos,
    un morfismo es
    \begin{itemize}
        \item suprayectivo si, y solo si, es un epimorfismo,
        \item inyectivo si, y solo si, es un monomorfismo.
    \end{itemize}
\end{exe}

Este también es el caso las categorías de conjuntos, grupos y
espacios vectoriales, pero no en la categoría de anillos.
En efecto, aunque un morfismo de anillos es
\begin{align*}
    \text{inyectivo} &\iff \text{monomorfismo y} \\
    \text{suprayectivo} &\implies \text{epimorfismo},
\end{align*}
la inclusión
\[
    i:\mathbb Z\to\mathbb Q
\]
es un ejemplo de un epimorfismo de anillos que no es suprayectivo.

Veremos que, en este aspecto, la categoría de marcos se comporta
parecido a la categoría de anillos, pues aunque en $\Frm$ es cierto que
\begin{align*}
    \text{inyectivo} &\iff \text{monomorfismo y} \\
    \text{suprayectivo} &\implies \text{epimorfismo},
\end{align*}
también existen epimorfismos no suprayectivos.

\begin{lemma}
    Todo monomorfismo de marcos es inyectivo,
    así que, en $\Frm$, un morfismo es
    \[
        \text{inyectivo} \iff \text{monomorfismo.}
    \]
\end{lemma}
\begin{proof}
    Vamos a usar el marco
    \[
        3 \hspace{10mm} = \hspace{10mm}
        \begin{tikzcd}
            1 \\ \star \ar[u,no head] \\ 0. \ar[u,no head]
        \end{tikzcd}
    \]
    Sea $m:A\to B$ un monomorfismo y $a,b\in A$ tales que $m(a)=m(b)$.
    Como las funciones $f_a,f_b:3\to A$ dadas por
    $f_a(\star)=a$ y $f_b(\star)=b$ son morfismos de marcos que cumplen
    $m(f_a(\star))=m(a)=m(b)=m(f_b(\star))$, se sigue que $mf_a=mf_b$.
    Como $m$ es monomorfismo, se sigue que $f_a=f_b$, así que
    $a=f_a(\star)=f_b(\star)=b$.
\end{proof}

Del truco del marco $3$ que usamos en la demostración anterior,
se puede deducir que las asignaciones
\begin{align*}
    B &\leftrightarrows \Frm(3,B) \\
    a &\mapsto f_a \\
    f(\star) &\mapsfrom f
\end{align*}
forman un isomorfismo de marcos,
donde $\Frm(3,B)$ tiene el orden puntual.

Ahora queremos construir un epimorfismo de marcos que no es
suprayectivo.
\begin{lemma}
    Si $S$ es un espacio topológico $T_1$, entonces
    la inclusión $i:\cal OS\to\cal PS$ es un epimorfismo.
\end{lemma}
\begin{proof}
    Sean
    \[
        \begin{tikzcd}
            A
            & \cal PS \ar[l,"f"',shift right] \ar[l,"g",shift left]
            & \cal OS \ar[l,"i"']
        \end{tikzcd}
    \]
    morfismos en $\Frm$ con $fi=gi$.
    
    Dado $p\in S$, consideremos $X_p=\{p\},U_p=\{p\}'\in\cal PS$.
    Como $X_p$ y $U_p$ son complementarios en $\cal PS$,
    sus imágenes en $A$ (bajo $f$ y bajo $g$) son complementarias.
    Ahora, como $S$ es $T_1$, entonces $X_p$ es cerrado, así que
    $U_p$ es abierto.
    Como $fi=gi$, esto implica que
    \begin{align*}
        f(U_p)
        &= f(i(U_p)) \\
        &= g(i(U_p)) \\
        &= g(U_p).
    \end{align*}
    Luego, la unicidad de los complementos nos da
    \begin{align*}
        f(X_p)
        &= \neg f(U_p) \\
        &= \neg g(U_p) \\
        &= g(X_p).
    \end{align*}
    Ahora, para cualquier $E\in\cal PS$ tenemos
    $E=\Sup\{X_p\mid p\in E\}$.
    Como $f$ y $g$ son morfismos de marcos,
    \begin{align*}
        f(E)
        &= \Sup\{f(X_p) \mid p\in E\} \\
        &= \Sup\{g(X_p) \mid p\in E\} \\
        &= g(E),
    \end{align*}
    por lo cual $f=g$.
    Se sigue que $i$ es un epimorfismo.
\end{proof}
En particular, si $S$ es un espacio topológico $T_1$ no discreto
(es decir, $\cal OS\neq\cal PS$), entonces la inclusión
$i:\cal OS\to\cal PS$ es un ejemplo de epimorfismo de marcos que
no es suprayectivo.

\chapter{Cocientes}
\label{ch:cocientes}

%\section*{(SESIÓN 6: 28 SEP)}
Ahora queremos investigar qué significa que un marco sea cociente
de otro.
Para esto, hagamos una comparación rápida de cómo funcionan los
cocientes en otros contextos:

\begin{itemize}
  \item
  Dado un conjunto $S$, un cociente de $S$ es otro conjunto
  que se construye a partir de una relación de equivalencia
  $\simr$ en $S$.
  Los elementos del cociente $S/\simr$ son los bloques de $S$ con
  respecto a la relación dada y se obtiene una función de
  proyección $\pi:S\to S/\simr$.

  \item
  Un cociente de un espacio vectorial $V$ es otro espacio
  vectorial que se construye a partir de un subespacio
  $U\leq V$.
  A partir de $U$, se construye una relación de equivalencia en
  $V$ y el cociente $V/U$ es el conjunto de bloques de la
  relación, con lo cual se obtiene una función de
  proyección $\pi:V\to V/U$.

  \item
  Un cociente de un grupo $G$ es otro grupo
  que se forma a partir de un subgrupo normal $H\leq G$.
  Éste grupo $H$ induce una relación de equivalencia en $G$ y el
  cociente $G/H$ es el conjunto de bloques de la
  relación, con lo cual se obtiene una función de proyección
  $\pi:G\to G/H$.

  \item
  Dado un anillo $A$, un cociente de $A$ es otro anillo que se
  forma a partir de un ideal bilateral $I$ de $A$.
  El ideal $I$ induce una relación de equivalencia en $A$ y el
  anillo cociente $A/I$ es el conjunto de bloques de la relación,
  así que obtenemos una función de proyección $\pi:A\to A/I$.
\end{itemize}
En cada caso, el cociente es el conjunto
de bloques con respecto a una relación de equivalencia y la
función de proyección $\pi$ induce en el cociente
una estructura similar a la del objeto original (el
cociente de un grupo es un grupo, el cociente de un anillo es un
anillo, etc.) de tal manera que $\pi$ es
un morfismo en la categoría correspondiente.

Para que esto sea posible, es preciso tomar el tipo
de subestructuras que se mencionaron arriba: si el subgrupo $H\leq
G$ no es normal, sí obtenemos una relación de equivalencia en
$G$, pero $\pi:G\to G/H$ no induce una estructura de grupo en $G$
que convierta a $\pi$ en un morfismo;
si el ideal bilateral $I$ se reemplaza por un ideal izquierdo,
derecho o incluso por un subanillo, también obtenemos relaciones
de equivalencia en $A$, pero no hay estructura de anillo en $A/I$
tal que $\pi:A\to A/I$ sea un morfismo.

Esta característica depende completamente de la relación de
equivalencia y, a las relaciones de equivalencia que satisfacen
esta propiedad se les llama congruencias.
Es decir, las congruencias de grupos son precisamente las
relaciones de equivalencia inducidas por subgrupos normales, las
congruencias de anillos son precisamente las relaciones de
equivalencia inducidas por ideales bilaterales, etc.

En nuestro estudio de los marcos, también consideraremos
congruencias de marcos: relaciones de equivalencia
tales que la proyección sea un morfismo de marcos, pero las
congruencias de marcos no estarán codificadas por ciertos tipos
de submarcos (en contraste con el caso de los grupos, espacios
vectoriales, etc).

Además, en los casos mencionados arriba,
los cocientes satisfacen otras propiedades que también se
satisfacen en la categoría de marcos.

La primera es que cualquier morfismo $f:A\to B$ de la categoría
relevante se factoriza a través de un cociente de $A$.

Los cocientes satisfacen otra propiedad importante.
Supongamos que $C$ es un cociente de $A$ dado por una
congruencia. Si un morfismo $f:A\to B$ en la categoría
respeta la congruencia dada, entonces $f$ se factoriza de manera
única a través de $C$.

Dado un morfismo de grupos $\phi:G\to H$, existe un subgrupo normal
$\ker \phi\leq G$ tal que $\phi$ se factoriza a través del cociente
$G/\ker \phi$.

\[
    \begin{tikzcd}
        G \ar[dr] \ar[rr,"\phi"] && H \\
        &G/\ker \phi \ar[ur,"\tilde\phi"']
    \end{tikzcd}
.\]
Más aún, este cociente es universal en el sentido de que, para cualquier 
morfismo $\psi:G\to H'$ con $\ker\phi \leq \ker\psi$, existe un único
morfismo $\phi^\sharp:G/\ker\phi\to H'$ que factoriza a $\psi$ a través
del cociente:
\[
    \begin{tikzcd}
        G \ar[dr] \ar[rr,"\psi"] && H' \\
        &G/\ker \phi \ar[ur,"\phi^\sharp"']
    \end{tikzcd}
.\]
Vale la pena notar que la relación de equivalencia
\[
    g\sim h \ssi \phi(g) = \phi(h)
\]
está codificada en el subgrupo $\ker \phi$ de $G$.
Esta situación se repite en las categorías de anillos,
espacios vectoriales, módulos, álgebras, etc.
Queremos llevar esta situación a un contexto más general,
donde no tenemos estructura de grupo.

\section{Cocientes de conjuntos}
Consideremos una función de conjuntos $\phi:A\to B$.
Queremos definir algo que haga el papel del núcleo de $\phi$.
Aquí no tenemos estructura de grupo, pero sí podemos definir una relación
de equivalencia $\sim$ en $A$:
\[
    a\sim b \ssi \phi(a) = \phi(b)
.\]
Como es usual, denotando al conjunto de bloques de la relación como
$A/\simr$, tenemos la función $\eta: A\to A/\simr$ que manda un elemento
$a\in A$ a su bloque $[a]$ correspondiente.
Es decir:
\begin{align*}
    \eta:A&\to A/\simr \\
    a&\mapsto [a] = \{x\in A \mid x\sim a\}.
\end{align*}
En particular, se tiene que
\[
    \eta(x) = \eta(y) \ssi x\sim y
.\]
Una consecuencia es que tenemos una función
$\phi^\sharp:A/\simr \to B$ que cierra el triángulo:
\[
\begin{tikzcd}
    A\ar[rr,"\phi"] \ar[dr,"\eta"'] && B \\
    & A/\simr \ar[ur,"\phi^\sharp"']
\end{tikzcd}
\]
dada como $\phi^\sharp([a]) = \phi(a)$.
El hecho de que $\phi^\sharp$ esté bien definida como función se debe,
precisamente, a la definición de la relación de equivalencia:
si $[a]=[b]$, entonces $a\sim b$, por lo cual $\phi(a)=\phi(b)$, i.e.,
$\phi^\sharp([a])=\phi^\sharp([b])$.
Más aún, tenemos $A/\simr\simeq \img \phi$.
En particular, si $\phi$ es suprayectiva, entonces $A/\simr \simeq B$.

También aquí sucede que $\eta$ es universal con respecto a esta
propiedad: si $\psi:A\to B'$ es una función tal que
$\phi(a)=\phi(b)\implies \psi(a)=\psi(b)$,
entonces existe una única $\psi^\sharp:A/\simr\to B'$
que factoriza a $\psi$ a través de $\eta$.
Nos gustaría decir que el ``núcleo'' de $\phi$ es la relación de
equivalencia $\sim$ inducida por $\phi$.

\section{Cocientes en \tps{$\SupLat$}{SupLat}}
Nuestro objetivo es estudiar los cocientes en la categoría de
marcos.
Para esto, estudiaremos primero los cocientes en un caso más
sencillo: la categoría de $\Sup$-semiretículas.
(recordemos que tenemos un funtor de inclusión $\Frm\to\SupLat$).

Primero veremos que todo morfismo induce una congruencia.
Luego, veremos que toda congruencia produce un morfismo cociente y
que este morfismo induce la congruencia original.

En la categoría de conjuntos, todo morfismo $\phi:A\to B$
induce una relación de equivalencia $\simr$ en $A$  y,
recíprocamente, toda relación de equivalencia $\simr$ en $A$ está
inducida por un morfismo (porque podemos formar el cociente
$A/\simr$).
Queremos obtener un resultado análogo en $\SupLat$.

Un $\Sup$-morfismo $f:A\to B$ es, en particular,
una función, así que induce una relación de equivalencia en $A$.
Sin embargo, no todas las relaciones de equivalencia son
interesantes. Nos enfocaremos en las relaciones de equivalencia
que respeten la estructura de $\Sup$-semiretícula, las cuales
llamaremos $\Sup$-congruencias.

Supongamos que tenemos una relación de equivalencia
$\simr$ en una $\Sup$-semirre\-tícula $A$.
Si $X,Y\subseteq A$ son dos subconjuntos 
indicados por un conjunto $I$
\begin{align*}
    X &= \{x_i \mid i\in I\} &
    Y &= \{y_i \mid i\in I\}
\end{align*}
tales que para cada índice $i\in I$ se tiene $x_i\sim y_i$,
entonces usaremos la notación $X\sim Y$.

Decimos que una relación de equivalencia $\simr\subseteq A\times
A$ es una $\Sup$-congruencia si, para todo par de subconjuntos
$X,Y\subseteq A$ con $X\sim Y$, se tiene $\Sup X\sim \Sup Y$.

El primer resultado es
\begin{lemma}[Todo morfismo induce una congruencia]
  Sea $\phi:A\to B$ un $\Sup$-morfismo.
  Entonces la relación de equivalencia en $A$ inducida por
  $\phi$:
  \[
      a\sim b \ssi \phi(a) = \phi(b)
  \]
  es una $\Sup$-congruencia.
\end{lemma}
\begin{proof}
  Tomemos subconjuntos $X\sim Y\subseteq A$ indicados por $I$.
  Esto es, para todo $i\in I$ tenemos $x_i\sim y_i$,
  por lo cual $\phi(x_i)=\phi(y_i)$.
  Luego,
  \begin{align*}
      \phi(\Sup X)
      &= \Sup\{\phi(x_i)\mid i\in I\} \\
      &= \Sup\{\phi(y_i)\mid i\in I\} \\
      &= \phi(\Sup Y).
  \end{align*}
  Luego, $\Sup X \sim \Sup Y$, por lo cual $\sim$ es una
  $\Sup$-congruencia.
\end{proof}

%  Si $X,Y\subseteq A$ son dos subconjuntos con la misma
%  imagen $f(X)=f(Y)$, entonces $X\sim Y$.
%  La condición $f(X)=f(Y)$ implica que,
%  para cada $x\in X$, existe $y(x)\in Y$
%  tal que $x\sim y(x)$ y, recíprocamente,
%  para cada $y\in Y$ existe $x(y)\in X$ tal que $y\sim x(y)$.
%  Ahora tomemos $I=X\cup Y$ y definamos
%  \begin{align*}
%      x_i &=
%          \begin{cases}
%              i & i\in X \\
%              x(i) & i\nin X
%          \end{cases}
%      &
%      y_i &=
%          \begin{cases}
%              y(i) & i\in X \\
%              i & x\nin X
%          \end{cases}
%  \end{align*}
%  para todo $i\in I$.
%  Notemos que $X=\{x_i\mid i\in I\}$, $Y=\{y_i\mid i\in I\}$ y
%  $X\sim Y$.

\begin{lemma}[Toda congruencia produce un cociente]
  \label{lemma:congruencia-produce-cociente}
  %[Alfredo $\checkmark$]
  Dada una $\Sup$-semiretícula $A$ y una $\Sup$-congruencia
  $\simr$ sobre $A$, la estructura de semirretícula superior en
  $A/\simr$ inducida por $\eta:A\to A/\simr$ es el único orden
  que convierte a $A/\simr$ en una $\Sup$-semirretícula y
  a $\eta:A\to A/\simr$ en un $\Sup$-morfismo.
\end{lemma}
\begin{proof}
  Sean $[a],[b]\in A/\simr$.
  Como $\simr$ es una $\Sup$-congruencia, el bloque de
  $[a\sup b]$ no depende de los representantes,
  ya que $a\sim a'$ y $b\sim b'$ implica
  que $a\sup b\sim a'\sim b'$.
  Luego, podemos definir una operación en $A/\simr$ como
  \begin{align*}
      [a]\sup[b]
      &= \Sup\{[a],[b]\} \\
      &= \Sup\eta(\{a,b\}) \\
      &= \eta(a\sup b) \\
      &= [a\sup b].
  \end{align*}
  para cualesquiera $[a],[b]\in A/\simr$.
  Como $A$ es un monoide conmutativo idempotente, entonces esta
  operación en $A/\simr$ también lo convierte en uno,
  por lo cual la relación
  \[
      [a]\leq[b] \ssi [a\sup b]=[b]
  \]
  es un orden parcial en $A/\simr$ cuyo supremo (binario) es
  $\sup$. (Ver \ref{ss:semireticulas}).
  Más aún, la igualdad $[a]\sup[b]=[a\sup b]$ nos dice que $\eta$
  es un morfismo de semirretículas superiores y, de hecho, esta
  es la única estructura de semirretícula superior en $A/\simr$
  que lo logra, ya que si $\sup'$ es otra estructura en $A/\simr$
  compatible con $\eta$, entonces tenemos
  \begin{align*}
    [a]\sup'[b]
    &= \eta(a)\sup'\eta(b) \\
    &= \eta(a\sup b) \\
    &= [a\sup b] \\
    &= [a]\sup[b].
  \end{align*}
  
  Ahora nos falta ver que $A/\simr$ es superiormente completo
  y que $\eta$ preserva los supremos arbitrarios.
  Notemos que cualquier subconjunto $Y\subseteq A/\simr$ es de la
  forma $Y=\eta(X)$ para algún $X\subseteq A$: por ejemplo,
  $Y=\eta(\eta^{-1}(Y))$.

  Si probamos que el supremo de $\eta(X)$ es $\eta(\Sup X)$,
  esto mostrará, al mismo tiempo, que $A/\simr$ tiene supremos
  arbitrarios y que la función $\eta:A\to A/\simr$ es un
  $\Sup$-morfismo.
  
  Tomemos $\eta(X)\subseteq A/\simr$.
  Como $\eta$ preserva supremos binarios,
  se sigue que $\eta$ es monótona.
  Luego, $\eta(\Sup X)$ es cota superior de $\eta(X)$.
  Ahora sea $[a]\in A/\simr$ una cota superior de $\eta(X)$;
  esto es: $[x]\leq[a]$
  (o bien, $[x\sup a]=[a]$, o bien, $x\sup a\sim a$)
  para todo $x\in X$.
  Luego, poniendo
  \begin{align*}
      Y &= \{x\sup a\mid x\in X\}
      &
      Z &=\{a\mid x\in X\},
  \end{align*}
  (los cuales son conjuntos indicados por $X$)
  tenemos $Y\sim Z$.
  Como $\simr$ es una $\Sup$-congruencia, tenemos
  $\Sup Y\sim\Sup Z$, pero esto es
  \[
      \Sup X\sup a\sim a
  .\]
  Se sigue que $[\Sup X\sup a]=[a]$. Es decir, $[\Sup
  X]\sup[a]=[a]$ o, equivalentemente $[\Sup X]\leq[a]$.
  Así,
  \[
      \eta(\Sup X)\leq [a]
  .\]
  Esto muestra que $\eta(\Sup X)$ es el supremo de $\eta(X)$
  en $A/\simr$:
  \[
    \eta(\Sup X) = \Sup \eta(X)
  .\]
  Así, $A/\simr$ es superiormente completa y
  $\eta$ es un $\Sup$-morfismo.
\end{proof}

El resultado anterior nos dice que en la
categoría de $\Sup$-semirretículas también existe la noción de
cociente, al igual que en las categorías más familiares de
anillos, grupos, etc. Una $\Sup$-semirretícula $B$ es cociente de
$A$ si es de la forma $A/\simr$ para alguna $\Sup$-congruencia
$\simr$ en $A$. Más formalmente, hacemos la siguiente definición:
\begin{defn}
  Decimos que un morfismo $f:A\to B$ es un morfismo cociente de
  $A$, o que exhibe a $B$ como cociente de $A$, si hay una
  congruencia $\simr$ en $A$ y un isomorfismo $A/\simr\simeq B$
  de forma que el triángulo
  \[
    \begin{tikzcd}
      A \ar[d,"\eta"'] \ar[r,"f"] & B \\
      A/\simr \ar[ur,"\simeq"']
    \end{tikzcd}
  \]
  es conmutativo.
  En este caso, decimos que $B$ es el cociente de $A$ por
  $\simr$.
\end{defn}
Con esta definición se entiende el título del lema anterior:
``toda congruencia produce un cociente''.

\begin{obs}[Correspondencia entre congruencias y cocientes]
\leavevmode
  \begin{itemize}
    \item
    Toda $\Sup$-congruencia $\simr$ es la $\Sup$-congruencia
    inducida por su morfismo cociente $\eta:A\to A/\simr$.
    \item
    Todo morfismo cociente $f:A\to B$ es el cociente de $A$ por la
    congruencia $\simr$ inducida por $f$.
  \end{itemize}
\end{obs}
Así, los morfismos cociente son exactamente los
morfismos suprayectivos.

\begin{prop}[Teorema del factor, versión 1]
  Sea $A$ una $\Sup$-semirretícula y $\simr$ una
  $\Sup$-congruencia en $A$.
  Si $f:A\to B$ un $\Sup$-morfismo que respeta a $\simr$,
  entonces $f$ se factoriza de manera única
  a través de $\eta:A\to A/\simr$.
\end{prop}
\begin{proof}
  Como $f$ respeta a $\simr$ como relación de equivalencia,
  entonces se factoriza de manera única a través de $A/\simr$ en
  la categoría de conjuntos:
  \[
    \begin{tikzcd}
      A \ar[rr,"f"] \ar[dr,"\eta"'] & & B \\
      & A/\simr \ar[ur,"f^\sharp"']
    \end{tikzcd}
  \]
  Notemos que tanto $f$ como $\eta$ son $\Sup$-morfismos, así
  que basta ver que $f^\sharp$ también es un $\Sup$-morfismo,
  pero esto es fácil: cualquier subconjunto de $A/\simr$ tiene la
  forma $\eta(X)$ para algún $X\subseteq A$, así que
  \begin{align*}
    f^\sharp(\Sup \eta(X))
    &= f^\sharp(\eta(\Sup X)) \\
    &= f(\Sup X) \\
    &= \Sup f(X) \\
    &= \Sup f^\sharp(\eta(X)).
  \end{align*}
\end{proof}
Además, si $\simr$ es la congruencia inducida por $f$,
entonces $f$ se factoriza como $f=f^\sharp\eta$, con $f^\sharp$
inyectivo y $\eta$ suprayectivo.

\subsection{Operadores cerradura}

El apartado anterior vimos que las $\Sup$-semirretículas tienen
muchos paralelismos con los grupos, anillos, módulos, etc.
Sin embargo, en éstas últimos casos, las congruencias tienen
representaciones alternativas: las congruencias de un grupo están
en correspondencia con sus subgrupos normales,
las congruencias de un módulo están en correspondencia con sus
submódulos, las congruencias de un anillo están en
correspondencia con sus ideales bilaterales, etc.

En vista de esto, queremos encontrar una representación
alternativa de las congruencias de una $\Sup$-semirretícula.
De hecho, encontraremos no una, sino dos de estas
representaciones: los operadores cerradura y los
subconjuntos $\Inf$-cerrados.

Dada una $\Sup$-congruencia $\simr$ en $A$, sabemos construir la
$\Sup$-semirretícula cociente $A/\simr$.
Sin embargo, los elementos de $A/\simr$ son los bloques $[x]$ de
$A$ con respecto a $\simr$ y a veces es molesto trabajar con
clases de equivalencia. En otro tipo de estructuras como espacios
vectoriales y anillos, podríamos pensar en tomar un representante
de cada bloque y trabajar con ellos en vez de trabajar con los
bloques, pero no hay una eleccción canónica de representantes.
Sin embargo, en el caso de las $\Sup$-semirretículas cada bloque
tiene un representante natural: su supremo.
Para que esta idea funcione bien, lo primero que hay que
verificar es que el supremo de cada bloque sigue estando en el
bloque:
\begin{lemma}
  Si $\sim$ es una $\Sup$-congruencia en $A$, entonces cada
  bloque de $\simr$ tiene un mayor elemento.
  Es decir, para cada $[a]\in A/\simr$, tenemos $\Sup[a]\in [a]$.
\end{lemma}
\begin{proof}
  Tomemos $[a]\in A/\simr$ y definamos nuestro conjunto de
  índices como $I=[a]$.
  Sean
  \begin{align*}
      X &= \{x_i \mid i\in I\} \\
      Y &= \{y_i \mid i\in I\}
  \end{align*}
  donde $x_i=i$ y $y_i=a$ para cada $i\in I=[a]$.
  Por construcción, tenemos $x_i\sim y_i$ para cada $i\in I$:
  esto es, $X\sim Y$.
  Luego, como $\sim$ es una $\Sup$-congruencia, se sigue que
  $\Sup X\sim\Sup Y$.
  Esto es,
  \[
      \Sup[a] = \Sup X \sim \Sup Y = a
  .\]
  Por lo tanto, $\Sup [a]\in [a]$.
\end{proof}
Este resultado dice que, si tomamos un bloque $[a]\in A/\simr$,
nos fijamos en su supremo y luego volvemos a bajar con $\eta:A\to
A/\simr$, caemos en el bloque en el que empezamos.
Es decir:
\[
    \eta(\Sup [a]) = [a]
.\]
Ahora consideramos la otra composición:
\begin{defn}
    Sea $\simr$ una $\Sup$-congruencia en $A$.
    El \emph{selector} de $\simr$ es la función $j:A\to A$ dada por
    \[
        j(a) = \Sup\eta(a) = \Sup[a] = \Sup\{x\in A \mid x\sim a\}
    .\]
\end{defn}
El selector tiene algunas propiedades interesantes.
\begin{itemize}
    \item 
    Si $x\sim a$, entonces $x\leq j(a)$.
    En particular, $a\leq j(a)$, ya que $a\sim a$.
    Decimos que $j$ infla.
    \item
    Supongamos que $a\leq b$.
    Dado que $a\sim j(a)$ y $b\sim j(b)$, entonces
    \[
        b = a\sup b \sim j(a) \sup j(b)
    \]
    porque $\simr$ es $\Sup$-congruencia.
    Luego, $j(a) \sup j(b) \leq j(b)$.
    Entonces
    \[
        j(a)\leq j(a)\sup j(b) \leq j(b)
    .\]
    Es decir, $j$ es monótona.
    \item
    Ahora tomemos $a\in A$.
    Sabemos que $a\sim j(a)$ y que $j(a)\sim j(j(a))$,
    por lo cual $a\sim j(j(a))$.
    Luego, $j(j(a))\leq j(a)$.
    Por otro lado, también tenemos $j(a)\leq j(j(a))$ (porque $j$ infla) así que
    $j(a)=j(j(a))$.
    En otras palabras, $j$ es idempotente.
\end{itemize}
\begin{defn}[Operador cerradura]
  \label{def:operador-cerradura}
  Si $A$ es un copo, un operador cerradura en $A$ es una función
  $j:A\to A$ tal que
  \begin{itemize}
    \item Infla: $a\leq j(a)$ para todo $a\in A$
    \item Es monótona: $a\leq b$ implica que $j(a)\leq j(b)$.
    \item Es idempotente: $j(j(a))=a$.
  \end{itemize}
\end{defn}
Así, lo que acabamos de mostrar es que, si $j$ es el selector de
una $\Sup$-congruencia $\simr$, entonces $j$ es un operador
cerradura.
Ahora queremos ver el camino de regreso: dado un operador
cerradura $j$ en $A$, ¿podemos obtener una $\Sup$-congruencia de
manera natural? La respuesta es sí y, de hecho, estas
construcciones son inversas una de la otra.
\begin{lemma}%[Juan $\checkmark$ ]
  Sea $A$ una $\Sup$-retícula. Los selectores de $A$ son
  precisamente los operadores cerradura. Además cada operador
  cerradura es selector para una única $\Sup$-congruencia. Es
  decir, hay una relación biyectiva entre $\Sup$-congruencias y
  operadores cerradura en $A$.
\end{lemma}
\begin{proof}
  Ya sabemos que el selector de una $\Sup$-congruencia es un
  operador cerradura.

  Ahora tomemos un operador cerradura $j:A\to A$.
  Como $j$ es una función, sabemos que la relación
  \[
    x\sim y\ssi j(x)=j(y)
  \]
  es de equivalencia.
  Veamos que es una $\Sup$-congruencia.
  Supongamos que $X,Y\subseteq A$ son subconjuntos indicados por
  un conjunto $I$ y que $X\simr Y$.
  Entonces para cualquier $y_i\in Y$ tenemos $y_i\sim x_i$ con
  $x_i\in X$. Como $j$ infla y es monótono, tenemos
  \[
    y_i\leq j(y_i)=j(x_i)\leq j(\Sup X)
  \]
  Así, $\Sup Y\leq j(\Sup X)$.
  Aplicando $j$ obtenemos $j(\Sup Y)\leq j(\Sup X)$, pues $j$ es
  idempotente.
  Análogamente, tenemos $j(\Sup X)\leq j(\Sup Y)$, por lo cual
  $j(\Sup X)=j(\Sup Y)$ y así $\Sup X\sim\Sup Y$, así que
  $\simr$ es una $\Sup$-congruencia.

  Ahora veamos que estas correspondencias son inversas una de la
  otra.
  
  Sea $j$ un operador cerradura y $\simr$ su $\Sup$-congruencia
  asociada.
  Para ver que $j$ es el selector de $\simr$, basta ver que
  $j(y)$ es el supremo del bloque de $y$ con respecto a $\simr$.
  Notemos que, si $x\sim y$, entonces $x\leq j(x)=j(y)$ porque
  $j$ infla, así que $j(y)$ es cota superior del bloque de $y$.
  Además, tenemos $y\sim j(y)$, ya que $j(y)=j(j(y))$. Por lo
  tanto, si $z$ es una cota superior del bloque de $y$, entonces
  en particular $j(y)\leq z$.

  Ahora sea $\simr$ una $\Sup$-congruencia y $j$ su selector.
  Debemos ver que $\simr$ es la congruencia de $j$. Es decir,
  mostraremos que
  \[
    x\sim y \ssi j(x)=j(y)
  .\]
  Por un lado $x\sim y$ significa que $[x]=[y]$, por lo cual sus
  supremos $j(x)$ y $j(y)$ son iguales.
  Por otro lado, dado que $x\simr j(x)$ para todo $x\in A$, si
  $j(x)=j(y)$ entonces tenemos $x\sim j(x)=j(y)\sim y$, con lo
  cual terminamos.
\end{proof}

\subsubsection{Conjuntos \tps{$\Inf$}{Inf}-cerrados}

Vimos que, en una $\Sup$-semirretícula, hay una correspondencia
entre operadores cerradura y $\Sup$-congruencias.
De hecho, ahora veremos que la correspondencia es triple:
los operadores cerradura también están en correspondencia con los
subconjuntos de $A$ que son cerrados bajo ínfimos arbitrarios.

\begin{defn}
    Si $A$ es una $\Sup$-semirretícula,
    un subconjunto $F\subseteq A$ se dice que es $\Inf$-cerrado si,
    para todo subconjunto $X\subseteq F$, se tiene $\Sup X\in F$.
\end{defn}

Ahora mostraremos que hay una correspondencia entre operadores
cerradura y conjuntos $\Inf$-cerrados.

\begin{lemma}\leavevmode
  \begin{enumerate}
    \item
    Dado un operador cerradura $j$ en $A$, el conjunto de sus
    puntos fijos
    \[
        A_j = \{x\in A \mid j(x) = x\}
    \]
    es $\Inf$-cerrado.
    \item
    Dado un conjunto $\Inf$-cerrado $F\subseteq A$, la función
    $j_F:A\to A$ dada por
    \[
        j_F(a) = \Inf\{x\in F \mid a\leq x\}
    \]
    es un operador cerradura.
    \item
    Las construcciones $F\mapsto j_F$
    y $j\mapsto A_j$ son inversas una de la otra y, por lo tanto,
    establecen una biyección entre operadores
    cerradura en $A$ y los conjuntos $\Inf$-cerrados de $A$, que,
    además, están en biyección con las $\Sup$-congruencias de
    $A$.
  \end{enumerate}
\end{lemma}
\begin{proof}
  \begin{enumerate}
    \item
    Tomemos un subconjunto $X\subseteq A_j$.
    Para cualquier $x\in X$ tenemos $\Inf X\leq x$, por lo cual
    \[
        j(\Inf X) \leq j(x) = x
    \]
    ya que $j$ es monótona y $x\in A_j$.
    Esto significa que $j(\Inf X)$ es cota inferior de $X$, por
    lo cual
    \[
        j(\Inf X)\leq \Inf X
    \]
    y, además, la otra desigualdad $\Inf X\leq j(\Inf X)$ se da
    porque $j$ infla.
    Luego, $j(\Inf X) = \Inf X$, pero esto es $\Inf X \in A_j$.
    \item
    En efecto, dado que cualquier $a\in A$ es cota inferior de
    $\{x\in F \mid a\leq x\}$, se sigue que $a\leq j_F(a)$.

    Ahora, dados $a\leq b\in A$, tenemos
    \[
        \{x\in F \mid a\leq x\} \supseteq \{x\in F \mid b\leq x\}
    \]
    lo cual, tomando ínfimos, nos da $j_F(a) \leq j_F(b)$.

    Finalmente, como $F$ es $\Inf$-cerrado, para cualquier $a\in A$
    tenemos $j_F(a)\in F$ (por definición de $j_F$),
    de modo que $j_F(a) \in\{x\in F \mid j_F(a) \leq x\}$.
    Una vez más, por la definición de $j_F$ se sigue que
    $j_F(j_F(a)) \leq j_F(a)$
    y la otra desigualdad $j_f(a)\leq j_F(j_F(a))$ es porque
    $j_F$ infla.
    \item
    Sea $F\subseteq A$ un conjunto $\Inf$-cerrado.
    Entonces
    \begin{align*}
        j_F(a) &= \Inf\{x\in F \mid a\leq x\} \\
        A_{j_F} &= \{a\in A \mid j_F(a)=a\}.
    \end{align*}
    Observemos que $F\subseteq A_{j_F}$, ya que
    $a=\Inf\{x\in F\mid a\leq x\}$ para todo $a\in F$.
    Por otro lado,
    como $F$ es $\Inf$-cerrado, tenemos $j_F[A]\subseteq F$.
    Luego, $A_{j_F}=j_F[A_{j_F}] \subseteq F$ y, así, $F=A_{j_F}$.
    
    Recíprocamente, sea $j:A\to A$ un operador cerradura.
    Entonces
    \begin{align*}
        A_j &= \{a\in A \mid j(a)=a \} \\
        j_{A_j}(a) &= \Inf\{x\in A_j \mid a\leq x\}.
    \end{align*}
    Como $j$ infla y es idempotente, todo $a\in A$ satisface
    \[
        j(a) \in \{x\in A_j \mid a\leq x\}
    .\]
    Además, $j(a)$ es una cota inferior del conjunto,
    pues para todo
    $x\in A_j$ con $a\leq x$ tenemos $j(a)\leq j(x)=x$.
    Por lo tanto,
    \[
        j(a) = \Inf\{x\in A_j \mid a\leq x\} = j_{A_j}(a)
    .\]
    Esto muestra que $j=j_{A_j}$.
    Luego, las construcciones $F\mapsto j_F$ y $j\mapsto A_j$
    son inversas, lo cual establece la biyección deseada.
  \end{enumerate}
\end{proof}

\subsubsection{La correspondencia entre operadores cerradura y cocientes}

Al principio vimos que todo $\Sup$-morfismo $f:A\to B$ induce una
$\Sup$-congruencia en $A$. Por lo tanto, también induce un
operador cerradura $k:A\to A$

\begin{defn}
    Para cada $\Sup$-morfismo $f:A\to B$, el núcleo de $\phi$
    es el operador cerradura $k:A\to A$ que le corresponde a
    la $\Sup$-congruencia inducida por $f$.
    Es decir $k$ está determinado por la condición
    \[
        k(x) = k(y) \ssi f(x) = f(y)
    .\]
\end{defn}

También vimos que toda $\Sup$-congruencia en $A$ produce un
cociente de $A$. Por lo tanto, todo operador cerradura $k:A\to A$
produce un cociente de $A$.

Como estas correspondencias son biyecciones,
cualquier cociente $f:A\to B$ es el cociente producido por
su núcleo, mientras que todo operador cerradura es el
núcleo del cociente que produce.

Ahora veremos que estas correspondencias tienen descripciones más
directas.

Si $f:A\to B$ es un $\Sup$-morfismo, entonces preserva supremos,
por lo cual tiene un adjunto derecho $f_*:B\to A$.
(Ver \ref{ss:adj-copos}).
Es decir, $f_*$ es un morfismo de copos determinado por la
condición
\[
    a\leq f_*(b) \ssi f(a) \leq b
\]
y está dado por la fórmula
\[
    f_*(b) = \Sup\{x\in A \mid f(x) \leq b\}
.\]
\begin{prop}[El operador cerradura de un morfismo]
  Si $f:A\to B$ es un $\Sup$-morfismo y $f_*:B\to A$ es su adjunto
  derecho, entonces la función $k=f_*f:A\to A$ es un operador
  cerradura y, de hecho es el núcleo de $f$.
\end{prop}
\begin{proof}
  Primero veremos que $k=f_*f$ es un operador cerradura.
  \begin{itemize}
    \item
    $k$ es monótona porque $f$ y $f_*$ lo son.
    \item 
    Usando la fórmula para $f_*$, tenemos
    \[
        k(a) = f_*f(a) = \Sup\{x\in A \mid f(x) \leq f(a)\} \geq
        a
    ,\]
    pues $a\in\{x\in A\mid f(x)\leq f(a)\}$.
    Así, $k$ infla.
    \item
    Para ver la idempotencia de $k$, calculemos $ff_*f:A\to B$.
    \begin{align*}
        ff_*f(a)
        &= f(k(a)) \\
        &= f(\Sup\{x\in A \mid f(x) \leq f(a) \}) \\
        &= \Sup\{f(x) \mid f(x) \leq f(b) \} \\
        &= f(a)
    \end{align*}
    Es decir, $ff_*f=f$. Por lo tanto, $k^2 = f_*ff_*f=f_*f=k$,
    como se quería
\end{itemize}

Ahora veamos que $k=f_*f$ cumple la propiedad de ser el núcleo de
$f$; es decir:
\[
  k(x)=k(y) \ssi f(x)=f(y)
.\]
Tomemos $x,y\in A$ tales que $k(x)=k(y)$,
esto es, $f_*f(x) = f_*f(y)$, o bien
\begin{align*}
  f_*f(x) &\leq f_*f(y)
  &
  f_*f(y) &\leq f_*f(x).
\end{align*}
Como $f_*$ es adjunto derecho de $f$, esto sucede si, y solo si,
\begin{align*}
  ff_*f(x) &\leq f(y)
  &
  ff_*f(y) &\leq f(x).
\end{align*}
Recordando que $ff_*f=f$ (de la demostración de idempotencia),
esto es equivalente a
\begin{align*}
  f(x) &\leq f(y)
  &
  f(y) &\leq f(x),
\end{align*}
es decir, $f(x)=f(y)$. Esto prueba que $k=f_*f$ es el núcleo de
$f$, como se quería.
\end{proof}

Esto nos permite probar otra caracterización del nucleo de un
$\Sup$-morfismo:

\begin{cor}
  Dado un $\Sup$-morfismo $f:A\to B$, el núcleo de $f$
  es el operador cerradura $k:A\to A$ determinado por la condición
  \[
      x\leq k(a) \ssi f(x) \leq f(a)
  .\]
\end{cor}
\begin{proof}
  Recordemos que la adjunción nos da la equivalencia
  \[
      x\leq f_*(y) \ssi f(x) \leq y
  .\]
  Tomando $y=f(a)$, tenemos la equivalencia deseada.
\end{proof}

Ahora veamos el regreso. Dado un operador cerradura $j$, podemos
obtener una descripción sencilla del morfismo cociente asociado.
Sabemos que el conjunto de puntos fijos $A_j$
de $j$ es $\Inf$-cerrado y, por lo tanto, es una retícula
completa con el orden inducido de $A$, aunque los supremos,
en general, no coinciden con lo supremos en $A$.

Por otro lado, notemos que la función $j^*:A\to A_j$ definida
como $j^*(a)=j(a)$ es suprayectiva e induce en $A$ la relación de
equivalencia
\[
  a\sim b \ssi j(a)=j(b)
,\]
que es, precisamente, la congruencia en $A$ inducida por $j$.
Por lo tanto, se sigue que el orden en $A_j$ inducido por $j^*$
es el únco orden que hace que $j^*$ sea un $\Sup$-morfismo.

\begin{lemma}
  Sean $j:A\to A$ un operador cerradura y $j^*:A\to A_j$ la
  restricción de $j$ a su imagen.
  Entonces el orden en $A_j$ heredado de $A$, que convierte a
  $A_j$ en una $\Sup$-semirretícula, concide con el
  orden inducido por $j^*$ que convierte a $j^*$ en un
  $\Sup$-morfismo.
\end{lemma}
\begin{proof}
  Gracias al lema \ref{lemma:congruencia-produce-cociente},
  basta ver que el orden en $A_j$ heredado de $A$ convierte
  a $j^*$ en un morfismo de semirretículas superiores.
  Es decir, denotando como $\sup_j$ al supremo calculado en $A_j$
  con el orden inducido de $A$, basta ver que, para cualesquiera
  $a,b\in A_j$, tenemos $a\sup_j b=j(a\sup b)$.

  Por un lado, como $j$ infla, tenemos
  $a,b\leq a\sup b\leq j(a\sup b)$.
  Así, $j(a\sup b)\in A_j$ es cota superior de $a$ y $b$.
  Además, si $z\in A_j$ está por encima de $a$ y $b$, tenemos
  $a\sup b\leq z$, por lo cual $j(a\sup b)\leq j(z)=z$.
  Se sigue que $j(a\sup b)$ es el supremo de $a$ y $b$ en $A_j$.
\end{proof}
\begin{cor}
  Para cualquier subconjunto $Y\subseteq A_j$, se tiene
  \[
      \Sup_j Y = j(\Sup Y)
  ,\]
  donde $\Sup_j$ denota como al supremo calculado en $A_j$.
\end{cor}
\begin{proof}
  Considerando a $Y$ como subconjunto de $A$, tenemos
  \[
    j(\Sup Y)=\Sup_j j(Y) =\Sup_j Y
  \]
  porque $j^*$ es $\Sup$-morfismo y $j(Y)=Y$.
\end{proof}

Con toda la información que tenemos,
podemos probar el teorema del factor
en la categoría de $\Sup$-semiretículas.
\begin{thm}[Teorema del factor en $\SupLat$]
    Sea $A$ una $\Sup$-semiretícula y $k$ un operador cerradura en $A$.
    Si $f:A\to B$ es un morfismo cuyo núcleo $k$ satisface $j\leq k$,
    entonces existe un único morfismo $f^\sharp:A_j\to B$ tal que
    el siguiente triángulo conmuta.
    \[
        \begin{tikzcd}
            A \ar[rr,"f"] \ar[dr,"j^*"'] &&  B \\
            &A_j \ar[ur,"f^\sharp"']
        \end{tikzcd}
    .\]
\end{thm}
    
%\section*{(SESIÓN 7: 30 SEP)}

\section{Cocientes en \tps{$\Frm$}{Frm}: núcleos}
En el caso de $\Sup$-semiretículas, teníamos la correspondencia
entre operadores cerradura, conjuntos $\Inf$-cerrados
y $\Sup$-congruencias.
Cuando trabajamos en un marco, esta correspondencia se puede refinar
más.

\begin{defn}[Núcleo en un marco]
\label{def:nucleo}
Un núcleo en un marco $A$ es un operador cerradura $j:A \to A$ que cumple con $j(a\wedge b)=j(a)\wedge j(b) \ \forall \ a,b \ \in \ A$.
Al conjunto de núcleos de $A$ lo denotamos como $NA$.
Nótese que, para un morfismo de marcos $f: A\to B$,
el operador cerradura $k$
inducido por $f$ (visto como morfismo de $\Sup$-retículas)
también es un núcleo de marcos, ya que
\begin{align*}
x\leq k(a\wedge b)&\iff f(x)\leq f(a\wedge b)=f(a)\wedge f(b)\\
&\iff f(x)\leq f(a) , f(x)\leq f(b) \\
&\iff x\leq k(a), x\leq k(b)\\
& \iff x\leq k(a)\wedge k(b)
\end{align*}
\end{defn}
\begin{defn}[Conjunto implicativo]
Decimos que un subconjunto $F$ de un marco $A$ es un conjunto
implicativo si es $\Inf$-cerrado y
$a\in F \implies  \forall x \in A,\; (x\succ a)\in F$.
\end{defn}
\begin{lemma}
Sea $k$ un operador cerradura en un marco $A$.
Entonces $k$ es un núcleo si  y sólo si $A_k$ es implicativo.
\end{lemma}
\begin{proof}
$\Leftarrow$\\
Sean $x,y \in A$ y sea $a=k(x\inf y)$, y nótese que $a\in A_k$. Así, se cumple que 
\begin{align*}
    x\inf y\leq a
    & \iff y\leq (x\succ a)\in A_k\\
    &\implies k(y)\leq (x\succ a)\\
    &\iff k(y)\inf x\leq a
\end{align*}
Similarmente, $k(x)\inf y\leq a$, por lo que 
$$ k(x)\inf k(y)\leq a$$
También, $a\leq k(x)\inf k(y)$, ya que $k$ es monótona.
Por lo tanto, $k(x\inf y)=k(x)\inf k(y)$ y $k\in NA$.
\vspace{5mm}
$\Rightarrow$\\
Sea $y=(x\succ a)$, donde $a\in A_k, x\in A$.Así, $x\inf y\leq a$, y se cumple que 
$$x\inf k(y)\leq k(x)\inf k(y) =k(x\inf y)\leq k(a)$$
por lo que $x\inf k(y)\leq k(a)=a$, lo que implica que $k(y)\leq (x\succ a)=y$. Por lo tanto, $k(y)=y$ y $y\in A_k$.
\end{proof}
Recordemos que, si $j\in CA$, entonces $A_j$ es una $\Sup$-semiretícula
y $j^*:A\to A_j$ dada como $j^*(a)=j(a)$
es un morfismo de $\Sup$-semiretículas; esto es:
$$j(\Sup X)=\Sup_jX$$
para cualesquiera $j\in NA, X\subset A_j$, donde $\Sup_j$ denota
al supremo en $A_j$.
Nótese que, si $j\in NA$, entonces $A_j$ es una retícula completa
que, por el lema anterior, tiene implicación, así que $A_j$ es un
marco y $j$ es un morfismo de marcos, ya que $j$ preserva
ínfimos.
Poniendo juntas estas observaciones, obtenemos el siguiente
resultado.
\begin{lemma}
    Sea $j\in CA$.
    Entonces $j\in NA$ si, y solo si,
    $A_j$ es un marco (con el orden heredado de $A$)
    y $j^*:A\to A_j$ es un morfismo de marcos suprayectivo.
\end{lemma}
\begin{defn}
  Un cociente de un marco $A$ es un morfismo suprayectivo $f:A\to
  B$.
  Equivalentemente, $B$ es un cociente de $A$ si existe un
  morfismo suprayectivo $f:A\to B$.
\end{defn}

\begin{exe}%[Dante $\checkmark$ ]
Para cualquier marco $A$, existe una biyección entre el conjunto de cocientes de $A$ y $NA$.
\end{exe}
\begin{sol}
    Defínase $\mathcal{C}=\{\text{Cocientes de } \ A\}$. Sea $f:A\to B\in \mathcal{C}$. Así, $F=f_*\circ f\in NA$, y si $g:A\to B\in\mathcal{C}$ es tal que $G=g_*\circ g=f_*\circ f=F$, entonces $A_F=A_G$, y $F^*=G^*$, donde $F^*:A\to A_F$ se define como $F^*(a)=F(a)$. Sabemos entonces que existe un único morfismo $f^\sharp:A_F\to B$ tal que el diagrama
    \[
        \begin{tikzcd}
            A \ar[rr,"f"] \ar[dr,"F^*"'] &&  B \\
            &A_j \ar[ur,"f^\sharp"']
        \end{tikzcd}
    \]
    conmuta, así como $g^\sharp$ que cumple lo mismo para $g$ y $A_G$. Sin embargo, como $G=F$, $A_F=A_G$ y $F^*=G^*$, entonces $f=F^\sharp\circ F^*=G^\sharp\circ G^*=G$, y por lo tanto la función $\phi:\mathcal{C}\to NA$ definida como $\phi(f)=F=f_*\circ f$ es inyectiva. También, si $j\in NA$, claramente $j^*:A\to A_j$ es un cociente de $A$, con $j_*\circ j =j$. Por lo tanto, $\phi$ es una biyección entre $\mathcal{C}$ y $NA$.
\end{sol}

El teorema del factor en $\Frm$ se deja como ejercicio:

\begin{thm}%[Dante $\checkmark$]
\label{thm:factor-frm}
Sean $A\in \Frm$ y $j\in NA$, y considérese $f:A\to B$ morfismo de marcos con núcleo $k\geq j$. Entonces existe un único morfismo $f^{\sharp}:A_j \to B$ tal que el diagrama
    \[
        \begin{tikzcd}
            A \ar[rr,"f"] \ar[dr,"j^*"'] &&  B \\
            &A_j \ar[ur,"f^\sharp"']
        \end{tikzcd}
    \]
conmuta.
\end{thm}
\begin{proof}
    Dado que $j$ es núcleo, $A_j$ es un marco, con $A_j=j(A)$, y $j^*$ es un morfismo de marcos suprayectivo. Tomando en cuenta lo anterior, defínase $f^\sharp:A_j\to B$ como
    $$f^\sharp(j(a))=f(a)$$
    Como $A_j$ es un marco, es cerrado bajo supremos e ínfimos arbitrarios, por lo que 
    \begin{itemize}
    \item Sean $a,b\in A$ tales que $j(a)=j(b)$. Nótese que como $j\in NA$, entonces $a\leq j(a)$ y $b\leq j(b)$, por lo que a su vez $f(a)\leq f(j(a))$ y $f(b)\leq f(j(b))$. También, dado que $k\geq j$, se tiene que
    \begin{align*}
        j(a)=j(b)\leq k(b) \ & \text{de donde, por la definición de} \ k\\
         j(a)\leq k(b) & \iff f(j(a))\leq f(b) \ \text{y}\\
        j(b)\leq k(a)&\iff f(j(b))\leq f(a)
    \end{align*}
    Por lo anterior, se cumplen las desigualdades 
    $f(a)\leq f(b)$ y $f(b)\leq f(a)$, por lo que $f(a)=f(b)$ y $f^\sharp$ está bien definida.
    \item Para $j(a), j(b) \in A_j$ cualesquiera, 
    \begin{align*}
    f^\sharp(j(a)\inf j(b))&=f^\sharp(j^*(a\inf b))\\
    &=f(a\inf b)\\
    &=f(a)\inf f(b)\\
    &=f^\sharp(j^*(a))\inf f^\sharp(j^*(b))
    \end{align*}
    \item Sea $X\subset A_j$. Así, 
    \begin{align*}
        f^\sharp(\Sup X)&=f^\sharp(\Sup j^*(X^\prime))\\
        &=f^\sharp(j^*(\Sup X^\prime))\\
        &=f(\Sup X^\prime)\\
        &=\Sup f(X^\prime)\\
        &=\Sup f^\sharp(X)
    \end{align*}
    Por lo anterior, $f^\sharp$ es morfismo de marcos. Claramente, $f^\sharp\circ j^*=f$, y si $g:A_j\to B$ es tal que $g\circ j^*=f$, entonces $g(j(a))=f(a)$ $\forall j(a)\in A_J$, por lo que $g=f^\sharp$. Así, $f^\sharp$ es único.
\end{itemize}
\end{proof}

Esto termina de establecer las correspondencias que queríamos.

\subsection{Algunos núcleos particulares}

En cualquier marco $A$, es fácil encontrar núcleos.
Por ejemplo, los lemas \ref{lemma:w-cerradura}
y \ref{lemma:modalidad-w} implican que, para cualquier elemento
$a\in A$ de un marco $A$, la función $((-\succ a)\succ a):A\to A$
es un núcleo.
Además hay, al menos, otras dos maneras de obtener núcleos
a partir de $a$.

\begin{defn}[Núcleos cerrado, abierto y regular]
Sea $a\in A$ fijo, y considérense los operadores siguientes.
  \begin{itemize}
    \item $\unuc a:A\to A$, definido como $\unuc a(x)= a\sup x$.
    \item $\vnuc a:A\to A$, definido como $\vnuc a(x)=(a\succ
    x)$.
    \item $\wnuc a:A\to A$, definido como
      $\wnuc a(x)=((x\succ a)\succ a)$.
  \end{itemize}
  Los operadores $\unuc a$, $\vnuc a$ y $\wnuc a$ son llamados
  los núcleos cerrado, abierto y regular de $a$, respectivamente.
\end{defn}
\begin{prop}
  Los operadores $\unuc a$, $\vnuc a$ y $\wnuc a$ son núcleos, para
  cualquier $a\in A$.
\end{prop}
\begin{proof}
  En efecto, $\unuc a$ infla, es idempotente
  y monótono. Además, la afirmación de que preserva ínfimos es
  precisamente la ley distributiva.

  Para $\vnuc a$,...
  \todo{termi\-nar}

  Finalmente, la demostración para $\wnuc a$ está
  dada por los lemas \ref{lemma:w-cerradura} y
  \ref{lemma:modalidad-w}.
\end{proof}

\begin{exa}%[Alfredo $\checkmark$ ]
  Encontremos todos los núcleos del marco
  \[
    A\hspace{10mm} = \hspace{10mm}
    \begin{tikzcd}
      & 1 \\
      a \ar[ur,no head] && b\ar[ul,no head] \\
      & 0 \ar[ur,no head] \ar[ul,no head]
    \end{tikzcd}
  .\]
  Dado que todos los núcleos mandan el $1$ al $1$ y
  también preservan ínfimos, cada núcleo está determinado por
  sus valores en $a$ y en $b$, pues $0=a\inf b$.
  Como los núcleos inflan, cada núcleo solo puede mandar $a$ a sí
  misma o al $1$, y $b$ a sí misma o al $1$, así que hay, a lo
  más, $4$ núcleos.
  Los núcleos cerrados, abiertos y regulares
  asociados a $a$ y a $b$ son
  \[ 
      \begin{array}{|c|}
          \hline
          \unuc a \\
          a\mapsto a\sup a = a \\
          b\mapsto a\sup b = 1 \\ \hline
          \unuc b \\
          a\mapsto b\sup a = 1 \\
          b\mapsto b\sup b = b \\
          \hline
      \end{array}
      \begin{array}{c|}
          \hline
          \vnuc a \\
          a\mapsto (a\succ a) = 1 \\
          b\mapsto (a\succ b) = b \\ \hline
          \vnuc b \\
          a\mapsto (b\succ a) = a \\
          b\mapsto (b\succ b) = 1 \\
          \hline
      \end{array}
      \begin{array}{c|}
          \hline
          \wnuc a \\
          a\mapsto ((a\succ a)\succ a) = (1\succ a) = a \\
          b\mapsto ((b\succ a)\succ a) = (a\succ a) = 1 \\
          \hline
          \wnuc b \\
          a\mapsto ((a\succ b)\succ b) = (b\succ b) = 1 \\
          b\mapsto ((b\succ b)\succ b) = (1\succ b) = b \\
          \hline
      \end{array}
  \]
  así,
  \begin{align*}
      \unuc a = \vnuc b = \wnuc a \\
      \unuc b = \vnuc a = \wnuc b
  \end{align*}
  son dos núcleos diferentes, mientras que
  los otros dos núcleos son la identidad $\id=\unuc 0=\wnuc
  0=\vnuc 1$ y la función constante $1$, denotada como $\tp$.
  Notemos que $\tp=\unuc 1=\wnuc 1=\vnuc 0$.
  Para ver la estructura ordenada de $NA$, notemos que
  $\unuc a$ y $\unuc b$ no son comparables, por lo cual
  \[
    NA\hspace{10mm} = \hspace{10mm}
    \begin{tikzcd}
      & \tp \\
      \unuc a \ar[ur,no head] && \unuc b \ar[ul,no head] \\
      & \id \ar[ur,no head] \ar[ul,no head]
    \end{tikzcd}
    \hspace{10mm} \simeq \hspace{10mm} A
  .\]
\end{exa}

\begin{exa}%[Juan $\checkmark$ ]
Sea $S$ un espacio topológico y considemos el marco $\cal O S$.
Para cualesquiera abiertos $A,X\in \cal OS$, tenemos
  \begin{itemize}
    \item $\unuc A(X)=A\cup X$
    \item $\vnuc A(X)=(A\succ X)=(A'\cup X)^\circ$
    \item
      $\wnuc A(X)
      =((X\succ A)\succ A)
      =(((X'\cup A)^\circ)'\cup A)^\circ
      =(\ol{X\cap A'}\cup A)^\circ$
  \end{itemize}
\end{exa}

La razón de la nomenclatura para los núcleos cerrado y abierto se
ilustra en el siguiente ejemplo.

\begin{exa}%[Alfredo $\checkmark$ ]
    \label{exe:cociente-abierto-cerrado}
    Sea $S$ un espacio topológico y $U\in\cal OS$ un abierto.
    Observemos que
    \[
        V \in(\cal OS_{\unuc U}) \iff U\cup V=V \iff U\subset V
    .\]
    Luego,
    \[
        (\cal OS)_{\unuc U} = \{V\in \cal OS \mid U\subset V\}
    .\]
    Es decir, los puntos fijos de $\unuc U$ son los abiertos
    que contienen a $U$.
    Ahora consideremos el cerrado $U^c$ de $S$ y su topología
    como subespacio:
    \[
      \cal OU^c = \{W\cap U^c \mid W\in\cal OS\}
    .\]
    Las funciones
    $\cal OU^c\rightleftarrows(\cal OS)_{\unuc U}$
    dadas como
    \begin{align*}
      V\cap U^c &\mapsto (V\cap U^c)\cup U = V\cup U \\
      W\cap U^c &\mapsfrom W
    \end{align*}
    constituyen un isomorfismo de marcos.
    En efecto, para cualesquiera $V\cap U^c\in\cal OU^c$ y
    $W\in(\cal OS)_{\unuc U}$, tenemos
    \begin{align*}
      ((V\cap U^c)\cup U)\cap U^c
      &= (V\cup U)\cap U^c \\
      &= V\cap U^c, \\
      (W\cap U^c)\cup U
      &= W\cup U \\
      &= W.
    \end{align*}
    Como estas funciones son monótonas, son un isomorfismo de
    copos y, por lo tanto, un isomorfismo de marcos.

    Similarmente, $\vnuc U$ se relaciona con la topología de
    subespacio de $U$:
    \[
      \cal OU
      =
      \{V\in \cal OS : V\subseteq U\}
    .\]
    Las funciones dadas por
    $\cal OU\rightleftarrows(\cal OS)_{\vnuc U}$
    \begin{align*}
         V &\mapsto (U\succ V) \\
         W\cap U &\mapsfrom W.
    \end{align*}
    son un isomorfismo de marcos.
    En efecto, para cualesquiera $V\in \cal OU$
    y $W\in (\cal OS)_{\vnuc U}$, tenemos
    \begin{align*}
        (U\succ V)\cap U
        &= U\cap V \\
        &= V \\
        (U\succ (W\cap U))
        &= (U\succ W)\cap(U\succ U) \\
        &= U\succ W \\
        &= W
    \end{align*}
    Como estas funciones son monótonas,
    son un isomorfismo de copos y, por lo tanto,
    un isomorfismo de marcos.
\end{exa}

\begin{exa}
En general, dado un marco $A$ y un elemento $a\in A$,
los mismos argumentos del ejemplo anterior demuestran que
\begin{align*}
    A_{\unuc a}
    &= \{x\in A\mid a\leq x\} = [a,1]\\
    A_{\vnuc a}
    &\simeq \{x\in A\mid x\leq a\} = [0,a],
\end{align*}
donde el último isomorfismo está dado como $y\mapsto y\inf a$
y $(a\succ x)\mapsfrom x$.
\end{exa}

Por otro lado, los $\wnuc a$ se llaman núcleos regulares por el
caso $a=0$ de un núcleo espacial:

\begin{exa}
  Considerando $\wnuc {\emptyset}:\cal O S\to \cal O S$, definido
  como
  \[
    \wnuc {\emptyset}(U)
    =((U\succ\emptyset)\succ\emptyset)
    =(\overline{U})^{\circ}
  \]
  se tiene que los puntos fijos son 
  $$(\cal OS)_{\wnuc {\emptyset}}
  =\{U\in \cal O S : (\overline{U})^{\circ}=U\}
  =\{\text{Abiertos regulares de }S\}.$$
\end{exa}

Ahora estudiaremos más sobre los núcleos regulares de un marco.
El ejemplo anterior nos mostró que, en un espacio topológico $S$,
los puntos fijos $(\cal OS)_{\wnuc \emptyset}$ son el marco de
abiertos regulares de $S$.
Del siguiente lema se sigue, en particular, que
$(\cal OS)_{\wnuc\emptyset}$ es un álgebra booleana completa.

\begin{lemma}
  \label{lemma:cocientes-w-bool}
  Si $a\in A \in \Frm$, entonces $A_{\wnuc a} \in \CBA$.
\end{lemma}
\begin{proof}
$$\wnuc a (0)=((0\succ a)\succ a)=(1\succ a)=a$$
por lo tanto, $a \in A_{\wnuc a}$ es el menor elemento de $A_{\wnuc a}$.
Mostraremos que todo $x\in A_{\wnuc a}$ es complementado.
Dado $x \in A_{\wnuc a}$, considérese $y=(x\succ a)$.
Por un lado, 
\begin{align*}
    \wnuc a(y) & =\wnuc a(x\succ a)\\
    &=(\wnuc a(x)\succ a)\\
    &=(x\succ a)\\
    &=y
\end{align*}
por lo que $y \in A_{\wnuc a}$. Ahora bien, 
\begin{align*}
    x\inf y&=x\inf(x\succ a)\\
    &=x\inf a\\
    &=a
\end{align*}
y también, 
\begin{align*}
    \wnuc a(x\sup y)&=((x\sup y)\succ a)\succ a)\\
    &=(((x\succ a)\inf(y\succ a))\succ a)\\
    &=((y\inf(y\succ a))\succ a)\\
    &=((y\inf a)\succ a)\\
    &=1.
\end{align*}
Luego, $y$ es el complemento de $x$ en $A_{\wnuc a}$.
Se sigue que $A_{\wnuc a} \in \CBA$.
\end{proof}
Un caso particular del resultado anterior es cuando $a=0$.
En este caso, el álgebra booleana completa $A_{\wnuc 0}$ se
denota como $A_{\neg \neg}$. Como se mencionó antes del lema,
en el caso espacial, esto nos dice que los abiertos regulares de
un espacio topológico forman un álgebra booleana completa.

%\section*{(SESIÓN 8: 5 OCT)}

\begin{lemma}%[Juan $\checkmark$ ]
  \label{lemma:nucleos-densos}
  Para cualquier núcleo $j\in NA$ se tiene la equivalencia
  \[
    j(0)=0 \ssi j\leq \wnuc 0
  .\]
  (C.f. con el lema \ref{lemma:tres-equivalencias}).
  Si un núcleo $j\in NA$ cumple $j\leq\wnuc 0$,
  decimos que $j$ es un núcleo denso.
  Así, $\wnuc 0$ es el mayor núcleo denso en $A$.
\end{lemma}
\begin{proof}
    Supongamos que $j\leq \wnuc 0$.
    Entonces $0\leq j(0)\leq \wnuc 0(0)=((0\succ 0)\succ 0)=0$. Así, $j(0)=0$.

    Supongamos ahora que $j(0)=0$.
    Dado cualquier $x\in A$, queremos mostrar que $j(x)\leq\wnuc
    0 x=((x\succ 0)\succ 0)$ o, equivalentemente, que
    $j(x)\inf(x\succ 0)\leq 0$.
    Como $j$ infla, tenemos
    \begin{align*}
      j(x)\inf(x\succ 0)
      &\leq j(x)\inf j(x\succ 0) \\
      &= j(x\inf (x\succ 0)) \\
      &= j(x\inf 0) \\
      &= j(0) \\
      &= 0,
    \end{align*}
    que es lo que se quería.
\end{proof}

El lema \ref{lemma:cocientes-w-bool} nos dice que los núcleos
regulares producen cocientes booleanos.
Ahora tenemos el recíproco.
\begin{thm}
  Sean $A$ un marco y $j\in NA$.
  Si el cociente $A_j$ es booleano, entonces
  $j=\wnuc a$, donde $a=j(0)$.
  Así, los cocientes booleanos de $A$ están dados, precisamente,
  por los núcleos regulares $\wnuc a$.
\end{thm}
\begin{proof}
    Sea $x\in A$. Como $B$ es booleano, $f(x)$ es complementado.
    Basta mostrar que $f(x\succ a)$ es el complemento $\neg f(x)$
    de $f(x)$, ya que, en este caso, tenemos
    \begin{align*}
        y\leq j(x)
        &\iff f(y) \leq f(x) \\
        &\iff f(y) \inf f(x\succ a) \leq 0
            & \text{caballo de batalla} \\
        &\iff f(y\inf(x\succ a)) \leq 0 = f(0) \\
        &\iff y\inf(x\succ a) \leq j(0) = a \\
        &\iff y\leq ((x\succ a)\succ a) = \wnuc a(x)
    \end{align*}
    y, así, $j(x)=\wnuc a(x)$.
    
    Ahora bien, como $a=j(0)=f_*(f(0))$, se sigue que $f(a)=0$.
    Luego,
    \begin{align*}
        f(x)\inf f(x\succ a)
        &= f(x\inf(x\succ a)) \\
        &= f(x\inf a) \\
        &\leq f(a) \\
        &= 0.
    \end{align*}
    Además, como $f$ es suprayectiva, podemos tomar
    $\tilde x\in A$ con $f(\tilde x)=\neg f(x)$.
    Luego,
    \begin{align*}
        f(x\inf \tilde x)
        &= f(x)\inf\neg f(x) \\
        &= 0 \\
        &= f(0),
    \end{align*}
    lo cual sucede si, y solo si, $x\inf \tilde x\leq j(0)=a$.
    Esto es, $\tilde x\leq(x\succ a)$, así que
    $f(\tilde x)\leq f(x\succ a)$.
    Aplicando supremo con $f(x)$, tenemos
    \[
        1\leq f(x)\sup f(x\succ a)
    .\]
    Concluimos que $f(x\succ a)=\neg f(x)$, lo cual finaliza la prueba.
\end{proof}

\begin{thm}
  Sea $A$ un marco.
  Si $A$ es un álgebra booleana completa y $j\in NA$,
  entonces $j=\unuc a$, donde $a=j(0)$.
  
  Dado que $A$ es booleano, entonces $A_j$ también lo es,
  así que el resultado anterior también nos da $j=\wnuc a$.
\end{thm}
\begin{proof}
    Dado $x\in A$, debemos mostrar que $j(x)=\unuc a(x)=x\sup a$.
    Por un lado, tenemos $0\leq x$, así que $a=j(0)\leq j(x)$.
    Como $x\leq j(x)$, se sigue que $x\sup a\leq j(x)$.
    Por nuestro caballo de batalla, la otra desigualdad
    ($j(x)\leq x\sup a$) es equivalente a $j(x)\inf \neg x\leq a$
    (ya que $x$ es complementado), pero esto es sencillo:
    \begin{align*}
        j(x)\inf\neg x
        &\leq j(x)\inf j(\neg x) \\
        &= j(x\inf\neg x) \\
        &= j(0) \\
        &= a.
    \end{align*}
\end{proof}

\subsection{Núcleos espacialmente inducidos en una topología}

Sea $\phi:T\to S$ un morfismo de espacios topológicos.
El morfismo de marcos $\phi^*=\cal O\phi:\cal OS\to\cal OT$
tiene adjunto derecho dado por
\[
  \phi_*(W)
  = \bigcup\{U\in\cal OS \mid \phi^*(U) \leq W\}
.\]
En el ejemplo \ref{exa:adjunto-derecho-top}, vimos que
$\phi_*:\cal OT\to\cal OS$ se puede calcular como
\[
  \phi_*(W) = \ol{\phi[W']}' = (\phi[W']')^\circ
.\]
De todos modos, aquí repetimos una demostración alternativa.
\begin{proof}
  Recordemos que tenemos la adjunción $\phi[-]\dashv\phi^{-1}$
  entre la imagen directa $\phi[-]:\cal PS\to\cal PT$ y la imagen
  inversa $\phi^{-1}:\cal PT\to\cal PS$.
  Sea $U\in\cal OS$.
  Dado que $\phi^*:\cal OS\to\cal OT$ es la restricción de
  $\phi^{-1}:\cal PS\to\cal PT$, para todo $W\in\cal OT$, tenemos
  \begin{align*}
      \phi^*(U)\leq W
      &\iff \phi^{-1}(U)\leq W \\
      &\iff W'\leq \phi^{-1}(U)' \\
      &\iff W'\leq \phi^{-1}(U') \\
      &\iff \phi[W'] \leq U' \\
      &\iff U\leq \phi[W']' \\
      &\iff U\leq (\phi[W']')^\circ = \ol{\phi[W']}',
  \end{align*}
  como se quería.
\end{proof}

\begin{thm}
  Si $\phi:T\to S$ es un morfismo de espacios topológicos,
  el núcleo $k:\cal OS\to\cal OS$ del morfismo de marcos
  $\phi^*:\cal OS\to\cal OT$ tiene la descripción
  \[
    k(U) = (\phi[T]' \cup U)^\circ
  .\]
\end{thm}
\begin{proof}
    Sabemos que $k=\phi_*\phi^*$.
    Observando que $\phi[\phi^*(U)]=U\cap\phi[T]$, tenemos
    \begin{align*}
        U\leq k(V)
        &\iff U \leq \phi_*(\phi^*(V)) \\
        &\iff \phi^*(U)\leq\phi^*(V) \\
        &\iff \phi[\phi^*(U)] \leq V \\
        &\iff U\cap \phi[T] \leq V \\
        &\iff U\leq \phi[T]'\cup V
            &\text{caballo de batalla en $\cal PS$} \\
        &\iff U\leq {(\phi[T]'\cup V)}^\circ.
    \end{align*}
    Luego, $k(V)={(\phi[T]'\cup V)}^\circ$.
\end{proof}

Sea $S$ un espacio topológico. Para cualquier subconjunto
$E\subset S$, definimos el operador $[E]:\cal O S\to \cal O S$
como $[E](U)={(E\cup U)}^{\circ}$.
Nótese que, si $U \in \cal OS$, entonces $[U]=\unuc U$
y $[U']=\vnuc U$.
Además, dada una función continua $\phi:T\to S$,
el teorema anterior dice que el núcleo
$k:\cal OS\to\cal OS$ de $\phi^*:\cal OS\to\cal OT$ es
$k=[\phi[T]']$. En general, $[E]$ siempre es un núcleo.

\begin{prop}
  Si $S$ es un espacio topológico y $E\subseteq S$ un
  subconjunto, entonces $[E]:\cal OS\to\cal OS$ es un núcleo.
\end{prop}
\begin{proof}
  Sean $U,V\in\cal OS$.
  Primero, $[E]$ es inflacionario, pues
  \begin{align*}
    [E](U)
    &= (E\cup U)^\circ \\
    &\geq (U)^\circ \\
    &= U.
  \end{align*}
  Además, es idempotente: por un lado, por el punto anterior
  tenemos $[E](U)\leq[E]([E](U))$, mientras que
  \begin{align*}
    [E]([E](U))
    &= (E\cup (E\cup U)^\circ)\circ \\
    &\leq (E\cup E\cup U)^\circ \\
    &= (E\cup U)^\circ \\
    &= [E](U).
  \end{align*}
  Además, preserva ínfimos binarios, pues
  \begin{align*}
    [E](U\cap V)
    &= (E\cup(U\cap V))^\circ \\
    &= ((E\cup U)\cap(E\cap V))^\circ \\
    &= ((E\cup U)^\circ\cap(E\cap V))^\circ \\
    &= [E](U)\cap[E](V).
  \end{align*}
  Finalmente, $[E]$ es monótono, ya que, si $U\leq V$, entonces
  \begin{align*}
    [E](U)
    &= (E\cup U)^\circ \\
    &\leq (E\cup V)^\circ \\
    &= [E](V).
  \end{align*}
\end{proof}

\begin{defn}
  Sea $S$ un espacio topológico.
  Un núcleo $j\in N\cal O S$ es \emph{espacialmente
  inducido} si es de la forma $j=[E]$ para algún
  $E\subseteq S$.
\end{defn}


\part{El ensamble}
\label{part:ensamble}

\chapter{Derivadas, estables, prenúcleos y núcleos}

%\section*{(SESIÓN 10: 14 OCT)}

En el capítulo anterior definimos los núcleos de un marco y vimos
éstos están en correspondencia con los cocientes del marco.
Ahora veremos que los núcleos de un marco tienen una importancia
central en la estructura del marco base.
El teorema principal es que el conjunto $NA$ de los núcleos de un
marco $A$ es, de nuevo, un marco, llamado el
ensamble de $A$ y, de hecho $A$ es un submarco de $NA$.

Además de los núcleos, arriba definimos los operadores cerradura
y vimos que los núcleos son algunos operadores cerradura.
En nuestro estudio sistemático del ensamble, usaremos otras
familias de operadores monótonos.

\section{Derivadas, derivadas estables, prenúcleos, operadores cerradura y núcleos}

\begin{defn}[Derivadas]
  Una inflación o derivada en $A$ es una función $f:A\to A$ que
  es monótona e infla.
  Es decir:
  \begin{itemize}
    \item $a\leq b$ implica $f(a) \leq f(b)$.
    \item $a\leq f(a)$.
  \end{itemize}
  Usaremos la notación $DA$ para el conjunto de todas las
  derivadas en $A$.
\end{defn}
Notemos que un operador cerradura (definición
\ref{def:operador-cerradura}) es una derivada idempotente, y
recordemos que usamos la notación $CA$ para el conjunto de los 
operadores cerradura en $A$.

\begin{defn}[Derivadas estables]
  Una derivada $f\in DA$ es \emph{estable} si
  \[
    f(x)\inf y \leq f(x\inf y)
  \]
  para cualesquiera $x,y\in A$.
  Denotamos como $SA$ al conjunto de derivadas estables en $A$.
\end{defn}

\begin{defn}[Prenúcleos]
  Un prenúcleo sobre $A$ es una derivada $f\in DA$ tal que
  \[
    f(x)\inf f(y) \leq f(x\inf y)
  .\]
  Notemos que la otra desigualdad se cumple para cualquier
  función monótona, de modo que los prenúcleos separan ínfimos
  binarios.
  Usaremos la notación $PA$ para referirnos al conjunto de
  prenúcleos de $A$.
  Además, cualquier prenúcleo es estable, ya que $y\leq f(y)$ implica
  \begin{align*}
    f(x) \inf y
    &\leq f(x) \inf f(y) \\
    &\leq f(x\inf y) & \text{ pues $f\in PA$}
  \end{align*}
\end{defn}

En resumen tenemos las contenciones
\begin{align*}
  NA \subseteq PA \subseteq SA \subseteq DA \\
  NA \subseteq CA \subseteq DA.
\end{align*}
También es claro que $NA=PA\cap CA$. Es decir, un núcleo es
exactamente un prenúcleo idempotente.
De hecho, tenemos $NA=SA\cap CA$.
Estos conjuntos son, en sí mismos, conjuntos parcialmente
ordenados, donde el orden está dado puntualmente.
Esto es, dadas dos funciones $f,g:A\to A$, decimos que $f\leq g$
si, y solo si,
\[
  \forall x\in A,\; f(x)\leq g(x)
.\]

Notemos que las derivadas $DA$, las estables $SA$ y los
prenúcleos $PA$ son cerrados bajo composición.
Es decir:
\begin{itemize}
  \item si $f,g\in DA$, entonces $fg,gf\in DA$,
  \item si $f,g\in SA$, entonces $fg,gf\in SA$,
  \item si $f,g\in PA$, entonces $fg,gf\in PA$.
\end{itemize}
Por otro lado, las cerraduras $CA$ y los núcleos $NA$
no lo son, en general.

Veremos que cada uno de estos conjuntos tiene más
estructura que la de conjunto parcialmente ordenado.

\section{Ínfimos en familias de derivadas}

Sea $J\subseteq DA$.
Definimos la función $\Inf J:A\to A$ como
\[
  (\Inf J)(a) = \Inf\{f(a) \mid f\in J\}
.\]
Afirmamos que $\Inf J$ es una derivada y, de hecho, es el ínfimo
de $J$ en $DA$:
\begin{itemize}
  \item
  Si $a\leq b\in A$, entonces $f(a)\leq f(b)$ para cada $f\in J$.
  Luego, cada elemento de $\{f(b)\mid f\in J\}$ está acotado
  inferiormente por un elemento de $\{f(a)\mid f\in J\}$, por lo
  cual
  \[
    \Inf\{f(a)\mid f\in J\} \leq \Inf\{f(b)\mid f\in J\}
  .\]
  \item
  Similarmente $\Inf J$ infla.
  \item
  Si $h\in DA$ es una derivada que está por debajo de cada
  elemento $f\in J$.
  Esto es, para cualesquiera $a\in A$ y $f\in J$ se tiene
  $h(a)\leq f(a)$.
  Luego, $h(a)$ es cota inferior de $\{f(a) \mid f\in J\}$, por
  lo cual $h(a)\leq (\Inf J)(a)$.
\end{itemize}

De hecho, se puede probar lo siguiente:
\begin{exe}%[Dante $\checkmark$ ]
    \leavevmode
  \begin{enumerate}
    \item si $J\subseteq SA$, entonces $\Inf J\in SA$,
    \item si $J\subseteq PA$, entonces $\Inf J\in PA$,
    \item si $J\subseteq CA$, entonces $\Inf J\in CA$,
    \item si $J\subseteq NA$, entonces $\Inf J\in NA$.
  \end{enumerate}
\end{exe}
\begin{sol}
    \begin{enumerate}
        \item Sean $x,y \ \in A$.  Así, 
        \begin{align*}
            \Inf J(x)\inf y&=\Inf\{j(x):j\in J\}\inf y\\
            &\leq j(x)\inf y\\
            &\leq j(x\inf y) \ \forall j \ \in J
        \end{align*}
        Por lo que $\Inf J(x)\inf y$ es una cota inferior del conjunto $\{j(x\inf y) : j \ \in J\}$. Así, como $\Inf J(x\inf y)$ es el ínfimo de $\{j(x\inf y) : j \ \in J\}$, se cumple que $\Inf J(x)\inf y\leq \Inf J(x\inf y)$, y $\inf J \ \in SA$.
        \item Sean $x, y \ \in A$. 
        \begin{align*}
            \Inf J(x)\inf \Inf J(y)&=\Inf\{j(x):j \ \in J\} \inf \Inf \{j(y) : j \ \in J\}\\
            &\leq j(x) \ \inf j(y) \\
            &\leq j(x\inf y) \ \forall j \ \in J
        \end{align*}
        por lo que $J(x)\inf \Inf J(y)$ es una cota inferior del conjunto $\{j(x\inf y): j \in J\}$. Así, se cumple que $\Inf J(x) \inf \Inf J(y)\leq \Inf J(x\inf y)$, y entonces $\Inf J \ \in PA$.
        \item Nótese que si $j\in J$, $j$ infla, y se cumple que 
        $$f(x)\leq j(f(x)) \ \forall j,f \in J$$
        Por lo tanto, 
        $$\Inf J(x)\leq f(\Inf J(x)) \ \forall x\in A, f\in J$$
        y $\Inf J$ es cota inferior del conjunto $\{f(\Inf J(x)):f\in J\}$.
        \\
        Ahora bien, sea $f\in DA$ tal que $f(x) \leq j(\Inf J(x)) \ \forall x\in A, j\in J$. Entonces, como $j(j(x))=j(x) \ \forall j\in J$, ocurre que 
        $$f(x)\leq j(x) \ \forall j\in J$$
        $$\Rightarrow f(x)\leq \Inf J(x) ' \forall x\in A$$
        Por lo anterior, $\Inf J(\Inf J(x))=\Inf J(x)$, y $\Inf J \in CA$.
        \item sean $x,y\in A$. Así, 
        \begin{align*}
            \Inf J(x\inf y)&=\Inf\{j(x\inf y):j\in J\}\\
            &=\Inf\{j(x)\inf j(y):j\in J\}\\
            &=\big(\Inf\{j(x):j\in J\}\big)
            \inf\big( \Inf\{j(y):j\in J\}\big)\\
            &=\Inf J(x)\inf J(y)
        \end{align*}
        Por lo tanto, $\Inf J \in NA$
    \end{enumerate}
\end{sol}

\section{Supremos en familias de derivadas}

\subsubsection{Supremos de derivadas \tps{($DA$)}{(DA)}}

\begin{defn}
  Si $J\subseteq DA$ es un conjunto de derivadas,
  definimos el supremo puntual $\pSup J:A\to A$ de $J$ como la
  función dada por
  \[
    (\pSup J)(a) = \Sup\{f(a) \mid f\in J\}
  \]
  para todo $a\in A$.
\end{defn}
Notemos que, si $J=\emptyset\subseteq DA$, entonces
\begin{align*}
  (\pSup\emptyset)(a)
  &= \Sup\{f(a) \mid f\in\emptyset\} \\
  &= \Sup\emptyset \\
  &= 0 \in A
\end{align*}
lo cual ya no es una derivada (a menos que $A$ sea trivial).
Sin embargo, si $J\neq\emptyset$ es una familia de derivadas,
entonces $\pSup J$ es una derivada y es el supremo de $J$ en
$DA$.
Es decir, los supremos (no vacíos) en $DA$ se calculan
puntualmente.

Observemos que, en $DA$, el menor elemento es la identidad
$\id:A\to A$ y el mayor elemento es $\tp:A\to A$ dada como
$\tp(a)=1$.

\subsubsection{Supremos de estables \tps{($SA$)}{(SA)}}

Supongamos que $J$ es un conjunto no vacío de derivadas estables
($\emptyset\neq J\subseteq SA$).
Entonces, para cualesquiera $a,b\in A$, la derivada $\pSup J$ satisface
\begin{align*}
  (\pSup J)(a)\inf b
  &= \Sup\{f(a) \mid f\in J\} \inf b \\
  &= \Sup\{f(a)\inf b \mid f\in J\}
    & \text{por la ley distributiva de marcos} \\
  &\leq \Sup\{f(a\inf b) \mid f\in J \}
    & \text{cada $f\in SA$} \\
  &= (\pSup J)(a\inf b),
\end{align*}
de modo que $\pSup J\in SA$.
Es decir, los supremos (no vacíos) en $SA$ se calculan
puntualmente.

\subsubsection{Supremos de prenúcleos \tps{($PA$)}{(PA)}}

En contraste a lo que sucede con derivadas y estables, el supremo
de prenúcleos no se calcula puntualmente, en general.

\begin{exa}
  Tomemos el marco $A$ dado como
  \[
    \begin{tikzcd}
      & 1 \\
      & c \ar[u,no head] \\
      a \ar[ur,no head] & & b \ar[ul,no head] \\
      & 0 \ar[ur, no head] \ar[ul, no head]
    \end{tikzcd}
  \]
  Después de algunos cálculos obtenemos la siguiente tabla de
  los valores de los núcleos abiertos, cerrados y regulares.
  Nótese que, como todo núcleo $j$ fija al $1$ y preserva ínfimos,
  es suficiente conocer los valores de $j$ en $a,c$ y $b$
  (ya que $0=a\inf b$).
    \[ 
        \begin{array}{|c|c|c|c|}
            \hline
            j & j(a) & j(c) & j(b) \\
            \hline
            \vnuc a = \wnuc b & 1 & 1 & b \\
            \vnuc b = \wnuc a & a & 1 & 1 \\
            \vnuc c & a & 1 & b \\
            \unuc a & a & c & c \\
            \unuc b & c & c & b \\
            \unuc c = \wnuc c & c & c & c \\
            \hline
        \end{array}
    \]
    En particular, todos estos son prenúcleos.
    Sin embargo, afirmamos que $\vnuc a \psup \vnuc b$ no es prenúcleo.
    En efecto, tenemos
    \begin{align*}
        (\vnuc a \psup \vnuc b)(a\inf b)
        &= (\vnuc a \psup \vnuc b)(0) \\
        &= \vnuc a(0) \sup \vnuc b(0) \\
        &= b \sup a \\
        &= c,
        \\
        (\vnuc a \psup \vnuc b)(a)
        \inf (\vnuc a \psup \vnuc b)(b)
        &= (\vnuc a(a)\sup\vnuc b(a))
            \inf
            (\vnuc a(b)\sup\vnuc b(b)) \\
        &= (1\sup a)\inf(b\sup 1) \\
        &= 1,
    \end{align*}
    así que $\vnuc a\psup\vnuc b$ no es un prenúcleo.
\end{exa}

Sin embargo, hasta cierto punto, esto se puede enmendar:
aunque el supremo puntual de un subconjunto arbitrario $J\subseteq PA$
puede no ser prenúcleo, la situación es mejor cuando $J$ es dirigido.
\begin{lemma}
    Si $J\subseteq PA$ es un conjunto dirigido,
    entonces la derivada estable $\pSup J$ sí es un prenúcleo.
    Recordemos que un conjunto $J$ es dirigido si todo subconjunto
    finito $X\subseteq J$ tiene una cota superior en $J$.
    En particular, $J\neq\emptyset$, pues $\emptyset\subseteq J$ tiene
    una cota superior en $J$.
\end{lemma}
\begin{proof}
    Si $J$ es dirigido, entonces $\pSup J$ es,
    en efecto, una derivada, pues $J\neq\emptyset$.
    Además,
    \begin{align*}
      (\pSup J)(a) \inf (\pSup J)(b)
      &= \Sup\{f(a)\inf g(b) \mid f,g\in J\}
        & \text{ ley distributiva de marcos} \\
      &= \Sup\{h(a) \inf h(b)  \mid h\in J \}
        & \text{ $J$ es dirigido} \\
      &\leq \Sup\{h(a \inf b)  \mid h\in J \}
        & \text{ cada $h\in J$ es prenúcleo} \\
      &= (\pSup J)(a\inf b),
    \end{align*}
    por lo cual $\pSup J\in PA$.
\end{proof}

\subsubsection{Más sobre conjuntos dirigidos}

Tomemos dos derivadas (estables, prenúcleos) $f$ y $g$ en $A$.
Como $g$ infla, para todo $a\in A$ tenemos $a\leq g(a)$ y,
aplicando $f$, se sigue que $f(a)\leq f(g(a))$.
Como $f$ también infla, tenemos $g(a)\leq f(g(a))$.
Luego, $f(a)\sup g(a) \leq f(g(a))$.
Esto es:
\[
  f\psup g \leq fg
.\]
Análogamente, obtenemos $f\psup g\leq gf$, por lo cual
\[
  f\psup g \leq fg\inf gf
.\]

En particular, si un conjunto $J$ de derivadas (estables,
prenúcleos) es cerrado bajo composición, entonces $J$ es dirigido.

\section{El teorema fundamental de la teoría de marcos}
\subsubsection{Las derivadas estables forman un marco}

Ya vimos que, en $DA$ y en $SA$, todos los ínfimos
y los supremos no vacíos se calculan puntualmente,
mientras que $\Sup\emptyset=\id$.


Ahora veremos cómo interactúan los ínfimos finitos
y los supremos en $SA$.
Tomemos un subconjunto $J\subseteq SA$.
Si $J=\emptyset$, entonces la igualdad
\[
  f\inf \Sup J = \Sup\{f\inf g \mid g\in J\}
\]
se cumple, pues ambos lados son $\id:A\to A$.
Por otro lado, si $J\neq\emptyset$, entonces para todo $x\in A$
se tiene
\begin{align*}
  (f\inf \pSup J)(x)
  &= f(x)\inf (\pSup J)(x) \\
  &= f(x)\inf \Sup\{g(x) \mid g\in J\} \\
  &= \Sup\{f(x)\inf g(x) \mid g\in J\}
    & \text{ley distributiva de marcos} \\
  &= \Sup\{(f\inf g)(x) \mid g\in J\} \\
  &= (\pSup\{f\inf g \mid g\in J\})(x).
\end{align*}
de modo que $f\inf\Sup J = \Sup\{f\inf g\mid g\in J\}$.
Esto muestra que $SA$ es un marco.
En particular, $SA$ tiene una implicación.

\subsubsection{Los núcleos forman un marco}

La afirmación es que $NA$ es un subconjunto implicativo de $SA$.
Es decir: $NA$ es cerrado bajo ínfimo (lo cual ya sabemos) y,
para cualquier estable $f\in SA$ y cualquier núcleo $k\in NA$, la
derivada estable $(f\succ k)$ es un núcleo.
Como toda derivada estable e idempotente es núcleo,
basta demostrar que $(f\succ k)$ es idempotente.

Sea $G=\{g\in SA \mid f\inf g\leq k\}$.
Como $G$ no es vacío (por ejemplo, $\id\in G$), tenemos
\[
  (f\succ k) = \pSup\{g\in SA \mid f\inf g\leq k\}
.\]

Primero mostraremos que $G$ es cerrado bajo composiciones.
Observemos que, para cualesquiera $g,h\in G$ y $x\in A$, tenemos
\begin{align*}
  (f\inf gh)(x)
  &= f(x)\inf g(h(x)) \\
  &= f(x)\inf f(x) \inf g(h(x)) \\
  &\leq f(x) \inf g(f(x)\inf h(x))
    & g\in SA \\
  &\leq f(x) \inf g(k(x))
    & f\inf h \leq k, \text{ pues } h\in G \\
  &\leq f(k(x)) \inf g(k(x)) \\
  &\leq k(k(x))
    & f\inf g \leq k, \text{ pues } g\in G \\
  &= k(x).
\end{align*}
Esto prueba que $f\inf gh \leq k$ y, así, $gh\in G$, como se
quería.

Ahora mostraremos que $j=(f\succ k)\in G$.
En efecto, para todo $x\in A$ se tiene
\begin{align*}
  (f\inf j)(x)
  &= f(x) \inf (\pSup G)(x) \\
  &= f(x) \inf \Sup\{g(x) \mid g\in G\} \\
  &= \Sup\{f(x) \inf g(x) \mid g\in G\} \\
  &= k(x),
\end{align*}
como se quería.
Luego, $j^2=jj\in G$, así que $j^2\leq\pSup G = j$.
Concluimos que $j^2=j$.
Como $j$ es una derivada estable e idempotente,
se sigue que es un núcleo.

Esto muestra lo que queríamos probar: que $NA$ es un subconjunto
implicativo de $SA$.
Una consecuencia inmediata es

\begin{thm}[Isbell-Simmons-Johnstone]
  Para cada marco $A$, el ensamble $NA$ es un marco.
\end{thm}
\begin{proof}
    $NA$ es $\Inf$-cerrado y, $(j\in k)\in NA$ para cualesquiera
    $k\in SA$, $k\in NA$.
    Es decir, $NA$ es un subconjunto implicativo del marco $SA$,
    por lo cual es un marco.
\end{proof}
Sin embargo, el hecho de que $NA$ sea un subconjunto
implicativo de $SA$ nos dice aún más.
Todo subconjunto implicativo de un marco es un cociente de éste,
así que $NA$ es de la forma $NA=(SA)_j$ para algún núcleo
$j:SA\to SA$.
La pregunta es, ¿qué núcleo?

\section{Las iteraciones de una derivada}
\subsubsection{Iteraciones en \tps{$DA$}{DA}.}

Denotaremos como $\Ord$ a la clase de ordinales y, para cada
ordinal, definimos
\begin{align*}
  f^0 &= \id \\
  f^{\alpha+1} &= ff^\alpha \\
  f^\lambda &= \Sup\{f^\alpha \mid \alpha<\lambda\}
    & \text{ si $\lambda$ es límite.}
\end{align*}
De este modo, obtenemos una cadena de derivadas
\[
  f^0\leq f^1\leq f^2\leq\dots\leq f^\alpha\leq f^{\alpha+1}
  \leq\dots
.\]
Como $\Ord$ no es cardinable, la cadena
$(f^\alpha \mid \alpha\in \Ord )$ se detiene, por fuerza, en
algún ordinal $\gamma$, es decir: $f^{\gamma+1}=f^\gamma$.
Además, dado que la clase de ordinales es bien ordenada,
existe un primer ordinal
$\infty\in\Ord$ tal que $f^\infty=f^{\infty+1}$.
Dado que $f^{\infty+1}=f^\infty$, se sigue que $f^\alpha
f^\infty=f^\infty$ para todo $\alpha\in\Ord$, por inducción en
$\alpha$. En particular,
$f^\infty$ es idempotente, así que es un operador cerradura en $A$.
Más aún, $f^\infty$ es el menor operador cerradura en $A$
que está por encima de $f$.
Para ver esto, mostraremos que, si $k$ es un operador cerradura
que está por encima de $f$, entonces también está por encima de
toda la cadena de iteraciones de $f$.
Tomemos $k\in CA$ con $f\leq k$ y hagamos inducción.
\begin{itemize}
  \item Para $\alpha=0$, tenemos $f^0=\id\leq k$.
  \item Supongamos que $f^\alpha\leq k$.
  Entonces
  \begin{align*}
    f^{\alpha+1}
    &= ff^\alpha \\
    &\leq kk \\
    &= k.
  \end{align*}
  \item Finalmente, si $\lambda$ es un ordinal límite, supongamos
  que $f^\alpha\leq k$ para todo $\alpha<\lambda$.
  Entonces
  $f^\lambda=\Sup\{f^\alpha\mid \alpha<\lambda\}\leq k$.
\end{itemize}
Como esto es válido para todo ordinal, en particular tenemos
$f^\infty\leq k$.
Luego, $f^\infty$ es el menor operador cerradura que está por
arriba de $f$.

\subsubsection{\tps{$CA$}{CA} como un conjunto fijo}
Luego, tenemos el siguiente resultado:
\begin{thm}
    La construcción $({-})^\infty$ es un operador cerradura en $DA$
    cuyos puntos fijos son los operadores cerradura en $A$:
    \begin{align*}
      ({-})^\infty &\in CDA \\
      (DA)_\infty &= CA.
    \end{align*}
\end{thm}
\begin{proof}
  Claramente, $f\leq f^\infty$, así que $(-)^\infty$ infla.
  Como $f^\infty$ es idempotente, tenemos $(f^\infty)^\alpha=f^\infty$
  para todo ordinal $\alpha$.
  En particular, $(f^\infty)^\infty=f^\infty$, así que
  $(-)^\infty$ es idempotente.
  Finalmente, si $f\leq g$ son derivadas, veamos que
  $f^\alpha\leq g^\alpha$ para todo ordinal $\alpha$.
  \begin{itemize}
    \item El caso $\alpha=0$ es obvio.
    \item Supongamos que $f^\alpha\leq g^\alpha$.
    Entonces
    \begin{align*}
        f^{\alpha+1}
        &= ff^\alpha \\
        &\leq gg^\alpha \\
        &= g^{\alpha+1}
    \end{align*}
    \item Supongamos que $\lambda$ es un ordinal límite y que
    $f^\alpha\leq g^\alpha$ para todo $\alpha<\lambda$.
    Entonces
    \begin{align*}
        f^\lambda(x)
        &= \Sup\{f^\alpha(x)\mid \alpha<\lambda\} \\
        &\leq \Sup\{g^\alpha(x) \mid \alpha<\lambda\} \\
        &= g^\lambda(x)
    \end{align*}
    para todo $x\in A$, así que $f^\lambda\leq g^\alpha$.
  \end{itemize}
  En particular, $f^\infty\leq g^\infty$, así que $(-)^\infty$ es
  monótono.
  Finalmente, la igualdad $(DA)_\infty=CA$ se obtiene al observar
  que todo operador cerradura es un punto fijo de $(-)^\infty$.
\end{proof}

%\section*{(SESIÓN 11: 19 OCT)}

\subsubsection{Iteraciones en \tps{$SA$}{SA}.}

\begin{lemma}
  Si $f$ es un prenúcleo en $A$, entonces cada iteración
  $f^\alpha$ es un prenúcleo, $f^\infty$ es un núcleo y, más aún,
  $f^\infty$ es el menor núcleo por encima de $A$.
\end{lemma}
\begin{proof}
  Sea $f\in PA$.
  Mostraremos, usando inducción, que $f^\alpha\in PA$ para cada
  ordinal $\alpha$.
  \begin{itemize}
    \item Si $\alpha=0$, entonces $f^0=\id\in PA$.
    \item Supongamos que $f^\alpha$ es prenúcleo.
    Como los prenúcleos son cerrados bajo composición,
    $f^{\alpha+1}=ff^\alpha$ es prenúcleo.
    \item Si $\lambda$ es un ordinal límite, supongamos que
    $f^\alpha\in PA$ para cada ordinal $\alpha<\lambda$.
    Recordemos que
    $f^\lambda=\pSup\{f^\alpha\mid\alpha<\lambda\}$.
    Hay que probar que $f^\lambda$ es prenúcleo.
    Para cada $x,y\in A$ tenemos
    \begin{align*}
      &f^\lambda(x) \inf f^\lambda(y) \\
      &\hspace{10mm}
      = \Sup\{f^\alpha(x) \inf f^\beta(y) \mid
        \alpha,\beta<\lambda\}
        && \text{ley distributiva para marcos} \\
      &\hspace{10mm}
      = \Sup\{f^\gamma(x)\inf f^\gamma(y)
        \mid \gamma<\lambda\} \\
      &\hspace{10mm}
      \leq \Sup\{f^\gamma(x\inf y) \mid \gamma<\lambda\}
        && f^\gamma\in PA \text{ por hipótesis}\\
      &\hspace{10mm}
      = f^\lambda(x\inf y).
    \end{align*}
  \end{itemize}
  En particular, $f^\infty$ es un prenúcleo y, como también es
  idempotente, se sigue que $f^\infty$ es un núcleo.

  Finalmente, recordemos que $f^\infty$ es el menor operador
  cerradura por encima de $f$.
  Luego, para cualquier núcleo $j\in NA$ que esté por encima de
  $f$, se tiene $f^\infty\leq j$, así que $f^\infty$ es el menor
  núcleo por encima del prenúcleo $f$.
\end{proof}

Este resultado se puede refinar un poco más:
\begin{lemma}
  Si $f\in SA$ es cualquier estable, entonces $f^\alpha$ es
  estable para todo ordinal $\alpha$.
  Más aún, $f^\lambda$ es un prenúcleo, para cada ordinal límite
  $\lambda$ y, finalmente, $f^\infty$ es el menor núcleo por
  encima de $f$.
\end{lemma}
\begin{proof}
  Sea $f$ una derivada estable.
  Por inducción, probamos que $f^\alpha$ es estable para cada
  ordinal $\alpha$.
  El caso $\alpha=0$ y el paso inductivo de $\alpha$ a $\alpha+1$
  es exactamente igual a la demostración anterior (porque $SA$ es
  cerrado bajo composición).
  Ahora, si $\lambda$ es un ordinal límite, tenemos
  $f^\lambda = \pSup\{f^\alpha \mid \alpha < \lambda\}$, de modo
  que, para cualesquiera $x,y\in A$ se tiene
  \begin{align*}
    f^\lambda(x)\inf y
    &= \Sup\{f^\alpha(x) \mid \alpha <\lambda\} \inf y \\
    &= \Sup\{f^\alpha(x)\inf y\mid \alpha <\lambda\}
      & \text{ley distributiva para marcos} \\
    &\leq \Sup\{f^\alpha(x\inf y)\mid \alpha <\lambda\} \\
    &= f^\lambda(x\inf y),
  \end{align*}
  como se quería.

  Más aún, debemos probar que $f^\lambda$ es prenúcleo, siempre
  que $\lambda$ es un ordinal límite.
  Para cualesquiera $x,y\in A$ tenemos
  \begin{align*}
    &f^\lambda(x)\inf f^\lambda(y) \\
    &\hspace{10mm}
    = \Sup\{f^\alpha(x)\inf f^\beta(y) \mid \alpha,\beta <\lambda\}
      & \text{ley distributiva de marcos} \\
    &\hspace{10mm}
    \leq \Sup\{f^\alpha(x\inf f^\beta(y)) \mid \alpha,\beta <\lambda\}
      & f^\alpha \in SA \\
    &\hspace{10mm}
    \leq \Sup\{f^\alpha(f^\beta(x\inf y)) \mid \alpha,\beta <\lambda\}
      & f^\beta \in SA \\
    &\hspace{10mm}
    \leq \Sup\{f^\gamma(x\inf y) \mid \gamma<\lambda\}
      & (?) \\
    &\hspace{10mm}
    = f^\lambda(x\inf y),
  \end{align*}
  como se quería.
\end{proof}

\subsubsection{\tps{$NA$}{NA} como un conjunto fijo}
Con estas observaciones, tenemos el siguiente teorema.
\begin{thm}
  Para cada marco $A$, el operador cerradura $({-})^\infty:SA\to
  SA$ es un núcleo cuyo conjunto de puntos fijos es el ensamble
  de $A$:
  \[
    (SA)_\infty = NA
  .\]
\end{thm}
\begin{proof}
  Como $({-})^\infty:SA\to SA$ es un operador cerradura,
  solo queda demostrar que $(-)^\infty$ es prenúcleo.
  Es decir, que la desigualdad
  \[
    f^\infty \inf g^\infty \leq (f\inf g)^\infty
  \]
  se cumple para cualesquiera estables $f,g\in SA$.

  Sea $l=(f \inf g)^\infty$.
  Por inducción, mostraremos que $f^\alpha\inf g\leq l$ para todo
  ordinal $\alpha$.
  \begin{itemize}
    \item Para $\alpha=0$, tenemos $f^0\inf g=\id \leq l$.
    \item Supongamos que $f^\alpha\inf g\leq l$.
    Entonces, para todo $x\in A$ tenemos
    \begin{align*}
      (f^{\alpha+1}\inf g)(x)
      &= f(f^\alpha(x)) \inf g(x) \\
      &= f(f^\alpha(x)) \inf g(x) \inf g(x) \\
      &\leq f(f^\alpha(x)) \inf g(f^\alpha(x)) \inf g(x)
        && \text{pues } x\leq f^\alpha(x) \\
      &\leq l(f^\alpha(x)) \inf g(x) && f\inf g\leq (f\inf
      g)^\infty =l \\
      &\leq l(f^\alpha(x) \inf g(x)) && l\in SA \\
      &\leq l(l(x)) && f^\alpha\inf g\leq l \\
      &= l(x) && l\in CA.
    \end{align*}
    \item
    Si $\lambda$ es límite, supongamos que $f^\alpha\inf g\leq l$
    para todo ordinal $\alpha <\lambda$.
    Entonces, para todo $x\in A$, tenemos
    \begin{align*}
      (f^\lambda\inf g)(x)
      &= f^\lambda(x) \inf g(x) \\
      &= \Sup\{f^\alpha(x) \mid \alpha<\lambda\} \inf g(x) \\
      &= \Sup\{f^\alpha(x)\inf g(x) \mid \alpha<\lambda\} \\
      &\leq l(x) && \text{ pues } f^\alpha\inf g\leq l.
    \end{align*}
  \end{itemize}
  Esto muestra que $f^\infty \inf g\leq l$.
  De manera similar, podemos probar que $f^\infty \inf
  g^\alpha\leq l$ para todo $\alpha$.
  Luego, $f^\infty \inf g^\infty \leq l$, como se quería.

  Como $f^\infty$ es un núcleo para cada $f\in SA$, la
  igualdad $(SA)_\infty=NA$ se obtiene de observar que todo
  núcleo $k$ es un punto fijo de $({-})^\infty:SA\to SA$.
\end{proof}

\section{Cálculos en el ensamble}
\subsubsection{Supremos de núcleos \tps{($NA$)}{NA}.}

Ya probamos que los supremos no vacíos en $DA$ y en $SA$ se
calculan puntualmente, y que los supremos dirigidos en $PA$
también.
Sin embargo, aún queda encontrar una descripción para, al menos,
algunos supremos en $NA$.

Sea $J\subseteq NA$ un conjunto no vacío de núcleos.
Como $J\subseteq SA$, entonces $\pSup J$ es el supremo de $J$ en
$SA$.
Por otro lado, consideremos la familia $J^\circ$
de composiciones (finitas) de elementos de $J$:
\[
  J^\circ = \{j_1\cdots j_m \mid j_i\in J \text{ para } 1\leq
  i\leq m\}
.\]
Dado que $J^\circ$ es una familia dirigida de prenúcleos
(pues $J^\circ$ es cerrado bajo composiciones), $\pSup J^\circ$
es el supremo de $J^\circ$ en $PA$.

\begin{lemma}
  Si $J\subseteq NA$ es una familia no vacía de núcleos sobre un
  marco $A$, entonces el núcleo
  \[
    \left(\pSup J\right)^\infty = \left(\pSup J^\circ\right)^\infty
  \]
  es el supremo de $J$ en $NA$.
\end{lemma}
\begin{proof}
  Sean
  \begin{align*}
    j &= \left(\pSup J\right)^\infty &
    k &= \left(\pSup J^\circ\right)^\infty.
  \end{align*}
  Es claro que $j$ y $k$ son núcleos que acotan superiormente a
  $J$.
  Si $l\in NA$ es un núcleo que acota superiormente a $J$, entonces
  también acota superiormente a $J^\circ$, ya que
  \[
    j_1\cdots j_m \leq l^m = l
  \]
  para cualquier $j_1\cdots j_m\in J$.
  Luego, $\pSup J\leq l$ y $\pSup J^\circ \leq l$,
  pues $\pSup J,\pSup J^\circ\in SA$ son los supremos de $J$ y $J^\circ$
  (respectivamente) en $SA$ y $l\in SA$.
  Se sigue que $j,k\leq l$, pues $j$ y $k$ son el menor núcleo por
  encima de $\pSup J$ y $\pSup J^\circ$, respectivamente.
\end{proof}

Uno de los pasos de la demostración anterior
nos permite mostrar un resultado bastante útil.
\begin{cor}
    Sea $J$ una familia de núcleos.
    Si $j\in J^\circ$ es una cota superior de $J$
    y es idempotente, entonces $j=\Sup J$ en $NA$.
    
    En particular, esto sucede cuando $J$ es finito y todos los
    elementos de $J$ aparecen en $j=j_1\cdots j_n\in J^\circ$.
\end{cor}
\begin{proof}
    Nótese que $j=j_1\cdots j_n\in J^\circ$
    es un prenúcleo porque es composición de prenúcleos.
    Como también es idempotente, se sigue que $j\in NA$.
    Ahora, para cualquier núcleo $k\in NA$ que acote a $J$ por arriba,
    tenemos
    \[
        j = j_1\cdots j_n \leq k^n = k
    .\]
    Luego, $j=\Sup J$ en $NA$.
\end{proof}

\subsubsection{Los núcleos abiertos y cerrados son complementarios}

Recordemos que cualquier elemento $a$ de un marco $A$ tiene
asociados los núcleos $\unuc a$ y $\vnuc a$ dados por
\begin{align*}
  \unuc a(x) &= a\sup x
  &
  \vnuc a(x) &= (a\succ x).
\end{align*}
No es difícil ver que
\begin{align*}
  \unuc 1 &= \tp = \vnuc 0 \\
  \unuc 0 &= \id = \vnuc 1.
\end{align*}

Esto se puede generalizar para cualquier elemento $a\in A$.

\begin{lemma}
  Sea $A$ un marco.
  Para cualquier $a\in A$ se tiene
  \begin{align*}
    \vnuc a\inf\unuc a &= \id
    &
    \vnuc a\sup\unuc a &= \tp
  \end{align*}
  en $NA$.
  Es decir, $\unuc a$ y $\vnuc a$ son complementos uno del otro.
\end{lemma}
\begin{proof}
Sabemos que $\unuc a\vee \vnuc a=(\vnuc a\circ \unuc a)^\infty$, pero $(\vnuc a\circ \unuc a)(x)=(a\succ (a\vee x))=1$, para toda $x\in A$. Entonces $\vnuc a\vee \unuc a=(\vnuc a\circ \unuc a)^\infty=\tp$.\\
Además, $(\vnuc a\wedge \unuc a)(x)=\vnuc a(x)\wedge \unuc a(x)=(a\succ x)\wedge (a\vee x)=x\vee (a\wedge x)=x$. Es decir, $\vnuc a\wedge \unuc a=\id$.\\
Por lo tanto $\unuc a$ y $\vnuc a$ son complementados.
\end{proof}

\subsubsection{La representación en núcleos abiertos y cerrados}

\begin{lemma}
    \label{lemma:sup-nuc-cerrado}
  Sea $A$ un marco.
  Para cualesquiera $j\in NA$ y $a\in A$, se tiene
  \begin{enumerate}[label=(\roman*)]
    \item $j\unuc a$ es idempotente y, por lo tanto, un núcleo,
    \item $j\sup\unuc a = j\unuc a$ (el supremo en $NA$),
    \item $\unuc{j(a)}\inf\vnuc a\leq j$.
  \end{enumerate}
\end{lemma}
\begin{proof}
  (i). Como $PA$ es cerrado bajo composición, al menos tenemos
  $j\unuc a\in PA$.
  Luego, para ver que $j\unuc a$ es un núcleo,
  basta demostrar que es idempotente.
  Para todo $x\in A$, tenemos
  \begin{align*}
    j\unuc a j\unuc a (x)
    &= j\unuc a j(a\sup x) \\
    &= j(a\sup j(a\sup x)) \\
    &= j(j(a\sup x))
      & \text{ pues } a\leq j(a\sup x) \\
    &= j(a\sup x) \\
    &= j\unuc a (x),
  \end{align*}
  como se quería.

  (ii). Por (i), $j\unuc a$ es un núcleo que acota
  superiormente a $j$ y a $\unuc a$.
  Por otro lado, si $k$ es cualquier núcleo con $j\leq k$ y
  $\unuc a\leq k$, tenemos $j\unuc a \leq kk=k$.

  (iii). Para cualquier $x\in A$, tenemos
  \begin{align*}
    \unuc{j(a)}(x)
    &= j(a)\sup x \\
    &\leq j(a \sup x) \\
    &= j\unuc a(x).
  \end{align*}
  Luego,
  \begin{align*}
    \unuc{j(a)}
    &\leq j\unuc a \\
    &= j\sup \unuc a && \text{ por (ii)} \\
    &= \neg \vnuc a \sup j
      && \text{ pues } \neg\vnuc a = \unuc a \\
    &= (\vnuc a \succ j)
  \end{align*}
  Luego, $\unuc{j(a)} \inf \vnuc a \leq j$.
\end{proof}

\begin{thm}[La representación en núcleos abiertos y cerrados]
  Sea $A$ un marco y $j$ un núcleo en $A$.
  Entonces
  \[
    j = \Sup\{ \unuc{j(a)}\inf\vnuc a \mid a\in A\}
  \]
  en $NA$.
\end{thm}
\begin{proof}
Sea $k=\bigvee\{\unuc {j(a)}\wedge \vnuc a\mid a\in A\}$.
Por el lema anterior tenemos que $k\leq j$.
Para la otra desigualdad, tomemos $a\in A$.
Entonces $(\unuc {j(a)}\wedge \vnuc a)(a)=j(a)\wedge (a\succ a)=j(a)\wedge 1=j(a)$;
es decir: $j(a)=(\unuc {j(a)}\wedge \vnuc a)(a)\leq k(a)$,
por lo cual $j\leq k$.
\end{proof}

\begin{cor}
  Si $A$ es un marco finito, entonces su ensamble $NA$ es un
  álgebra booleana completa.
\end{cor}
\begin{proof}
Por el teorema anterior cualquier $j\in NA$ tiene complemento, pues $j$ se puede expresar como un supremo finito de elementos complementados. Por lo tanto $NA$ es un álgebra booleana completa.
\end{proof}

\section{El encaje de un marco en su ensamble}

\begin{defn}
  Si $A$ es un marco, la función $\eta_A:A\to NA$ está dada como
  \[
    \eta_A(a) = \unuc a
  .\]
\end{defn}

\begin{thm}
  Si $A$ es un marco, $\eta_A$ es un morfismo de marcos inyectivo
  y es un epimorfismo.
\end{thm}
\begin{proof}
Para ver que $\eta_A$ es un morfismo de marcos primero notemos que $\eta_A(0)=\unuc 0=\id$ y $\eta_A(1)=\unuc 1=\tp$. También es una función monótona pues si consideramos $a\leq b$, con $a,b\in A$, $\eta_A(a)=\unuc a\leq \unuc b=\eta_A(b)$.\\
Además, $\eta_A(a)\wedge\eta_A(b)=\unuc a\wedge \unuc b$, entonces $$(\unuc a\wedge \unuc b)(x)=\unuc a(x)\wedge \unuc b(x)=(a\wedge b)\vee x=\unuc {a\wedge b}(x)$$
Así $\eta_A(a)\wedge \eta_A(b)=\eta_A(a\wedge b).$\\
Ahora consideremos $X\subseteq A$, queremos ver que $\bigvee\eta_A(X)=\eta_A(\bigvee X)$. Como $\eta_A$ es monótona, se cumple que $\eta_A(x)\leq \eta_A(\bigvee X)$ para todo $x\in A$, es decir, $\bigvee\eta_A (X)\leq \eta_A(\bigvee X).$ Resta ver la otra desigualdad.\\
Consideremos $c=\bigvee X$ y $j=\bigvee \eta_A(X)=\bigvee\{ \unuc x\mid x\in X\}.$ Queremos ver que $\unuc c\leq j$. Sea $a\in A$, entonces $$\unuc c(a)=c\vee a=\bigvee X\vee a=\bigvee\{x\vee a\mid x\in X\}=\left(\dot{\bigvee}\{\unuc x\mid x\in X\}\right)(a)\leq j(a)$$
pues el supremo puntual es menor que el supremo en $NA.$\\
Veamos ahora que $\eta_A$ es inyectiva. Consideremos $a,b\in A$ tales que $\eta_A(a)=\eta_A(b)$, entonces $\unuc a=\unuc b$. Evaluando en $x=0$, obtenemos que $a=a\vee 0=b\vee 0=b$. Así, $\eta_A$ es inyectiva.\\
Por último veamos que $\eta_A$ es un epimorfismo. Para ello consideremos dos morfismos 
\[\begin{tikzcd}
	{NA} \ar[r,"f",shift left] \ar[r,"g"',shift right] & {B},
\end{tikzcd}\]
donde $B$ es un marco y $f\circ\eta_A=g\circ\eta_A$,es decir, $f(\unuc a)=g(\unuc a)$ para todo $a\in A$. Por el teorema anterior tenemos que 
\begin{align*}
    f(j)
    &= f\left(\bigvee\{\unuc {j(a)}\wedge \vnuc a\mid a\in A\}\right)
    =\Sup\{f(\unuc {j(a)})\wedge f(\vnuc a)\mid a\in A\} & \mbox{ y } \\
    g(j)
    &= g\left(\bigvee\{\unuc {j(a)}\wedge \vnuc a\mid a\in A\}\right)
    = \Sup\{g(\unuc {j(a)})\wedge g(\vnuc a)\mid a\in A\} & 
\end{align*}
Ahora usemos que $f(\unuc {j(a)})=g(\unuc {j(a)})$ y,
tomando complementos, $f(\vnuc a)=g(\vnuc a)$, pues $\vnuc a$ y $\unuc a$
son complementarios en $A$ y los morfismos de marcos $f,g$
preservan complementos.
Por lo tanto, para todo $j\in NA$, tenemos $f(j)=g(j)$.
Así, $\eta_A$ es un epimorfismo.
\end{proof}

%\section*{(SESIÓN 12: 21 OCT)}

\subsubsection{El ensamble como solución a un problema universal}
\label{ssec:complementacion}

Vimos que, para cada marco $A$, el ensamble $NA$ es un marco y
tenemos un morfismo
\begin{align*}
  \eta_A: A&\to NA \\
  a &\mapsto \unuc a
\end{align*}
el cual es mono y epi, aunque en general no es suprayectivo.
En particular, $\Frm$ no es una categoría balanceada.

\begin{cor}[Adjunción del ensamble]
  Sea $A$ un marco.
  El adjunto derecho del morfismo $\eta_A:A\to NA$ está dado por
  $\bot:NA\to A$, $\bot(j)=j(0)$.
  Es decir, tenemos
  \[
    \unuc a \leq j \ssi a\leq j(0) 
  .\]
\end{cor}
\begin{proof}
  Si $\unuc a \leq j$, entonces
  $a=\unuc a(0) \leq j(0)$.
  Por otro lado, si $a\leq j(0)$, entonces para todo $x\in A$
  tenemos
  \begin{align*}
    \unuc a (x)
    &= a\sup x \\
    &\leq j(0) \sup x \\
    &\leq j(0) \sup j(x) \\
    &= j(x).
  \end{align*}
  Luego, $\unuc a \leq j$.
\end{proof}

\begin{defn}
  Sea $f:A\to B$ un morfismo de marcos.
  Diremos que $f$ resuelve el problema de complementación para
  $A$ si, para todo $a\in A$, $f(a)\in B$ es complementado en
  $B$.
\end{defn}
\begin{exa}
  Para todo $a\in A$, el núcleo $\unuc a$ es complementado en
  $NA$ (su complemento es $\vnuc a$).
  Es decir, $\eta_A:A\to NA$ resuelve el problema de
  complementación para $A$.
\end{exa}

\begin{thm}
  Sea $A$ un marco.
  El morfismo $\eta_A:A\to NA$ resuelve el problema de
  complementación de manera universal.
  Es decir, para cualquier morfismo $f:A\to B$ que resuelve el
  problema de complementación, existe un único morfismo
  $f^\sharp:NA\to B$ tal que el diagrama
  \[
    \begin{tikzcd}
      A \ar[dr,"\eta_A"'] \ar[rr,"f"] && B \\
      & NA \ar[ur,"f^\sharp"',dotted]
    \end{tikzcd}
  \]
  es conmutativo.

  Más aún, si $f_*:B\to A$ es el adjunto derecho de $f=f^*:A\to
  B$, el adjunto derecho $f_\flat:B\to NA$ de $f^\sharp:NA\to B$
  se calcula como
  \[
    f_\flat(b) = f_*\unuc b f^* \in NA
  .\]
\end{thm}
\begin{proof}
  Para empezar, como $\eta_A$ es epi, la factorización de $f$ a
  través de $\eta_A$ es única, en caso de existir.
  Es decir, si $f^\sharp,f^!:NA\to B$ son tales que
  $f^\sharp\eta_A=f=f^!\eta_A$, entonces $f^\sharp=f^!$.
  \[
    \begin{tikzcd}
      A \ar[dr,"\eta_A"'] \ar[rr,"f"] && B \\[5mm]
      & NA \ar[ur,shift right,"f^!"'] \ar[ur,shift left,"f^\sharp"]
    \end{tikzcd}
  \]
  Por lo tanto, basta con mostrar la existencia de $f^\sharp$.
  
  Recordemos que queremos definir $f^\sharp:NA\to B$ tal que el
  diagrama 
  \[
    \begin{tikzcd}
      A \ar[dr,"\eta_A"'] \ar[rr,"f"] && B \\
      & NA \ar[ur,"f^\sharp"',dotted]
    \end{tikzcd}
  \]
  conmute.
  Es decir, tal que $f^\sharp(\unuc a) = f(a)$.
  Recordemos que cada núcleo $j\in NA$ se puede representar como
  \[
    j = \Sup\{\unuc{j(a)} \inf \neg \unuc a \mid a\in A\}
  ,\]
  pues $\neg\unuc a = \vnuc a$.
  Dado que los morfismos de marcos respetan complementos,
  si existiese un morfismo $f^\sharp:NA\to B$ con las propiedades
  deseadas, necesariamente debería cumplirse que
  \begin{align*}
    f^\sharp(j)
    &= f^\sharp\left(
      \Sup\{\unuc{j(a)}\inf\neg\unuc a\mid a\in A\}
      \right) \\
    &= \Sup\{f^\sharp(\unuc{j(a)}\inf\neg\unuc a)\mid a\in A\} \\
    &= \Sup\{f^\sharp(\unuc{j(a)})\inf f^\sharp(\neg\unuc a)
       \mid a\in A\} \\
    &= \Sup\{f^\sharp(\unuc{j(a)})\inf \neg f^\sharp(\unuc a)
       \mid a\in A\} \\
    &= \Sup\{f(j(a))\inf \neg f(a) \mid a\in A\}.
  \end{align*}
  Con esta motivación, definimos $f^\sharp$ como
  \[
    f^\sharp(j) = \Sup\{f(j(a))\inf\neg f(a) \mid a\in A\}
  .\]
  
  Hay que probar que esta definición nos da un morfismo de marcos
  con las propiedades deseadas.
  Verificamos la monotonicidad.
  Si $k\leq j$ son núcleos en $A$, entonces $k(x)\leq j(x)$ para
  todo $x\in A$.
  Aplicando $f$ tenemos $f(k(x))\leq f(j(x))$, y así $f(k(x))\inf
  f(x)\leq f(j(x))\inf f(x)$.
  Esto nos dice que $f^\sharp$ es monótono.

  Por otro lado $f_\flat:B\to NA$ también es monótona,
  pues si $b\leq c\in B$, entonces $\unuc b\leq\unuc c \in NB$.
  Luego, $f_*\unuc bf^*\leq f_*\unuc cf^*$, pero
  esto es $f_\flat(b)\leq f_\flat(c)$.

  Ahora veamos que $f^\sharp \dashv f_\flat$.
  Dados $j\in NA$ y $b\in B$ arbitrarios, debemos mostrar la
  equivalencia
  \[
    f^\sharp(j)\leq b \ssi j\leq f_\flat(b)
  .\]
  Por definición
  $f^\sharp(j)=\Sup\{f^*(j(x))\inf\neg f^*(x) \mid x\in A\}$.
  Luego, tenemos las equivalencias
  \begin{align*}
    f^\sharp(j) \leq b
    &\iff \forall(x\in A)\;f^*(j(x))\inf\neg f^*(x)\leq b \\
    &\iff \forall(x\in A)\;f^*(j(x))\leq (\neg f^*(x)\succ b) \\
    &\iff \forall(x\in A)\;f^*(j(x)) \leq f^*(x)\sup b
      & \text{caballo de batalla} \\
    &\iff \forall(x\in A)\;j(x) \leq f_*(b\sup f^*(x))
      & \text{adjunción } f^*\dashv f_* \\
    &\iff \forall(x\in A)\;j(x) \leq f_*(\unuc b(f^*(x))) \\
    &\iff j\leq f_*\unuc b f^* = f_\flat(b).
  \end{align*}
  Esto muestra que $f^\sharp\dashv f_*$.
  En particular, $f^\sharp$ preserva supremos arbitrarios.
  Ahora hay que ver que $f^\sharp$ preserva ínfimos finitos.
  Como $f^\sharp$ es monótona, tenemos
  $f^\sharp(j\inf k)\leq f^\sharp(j)\inf f^\sharp(k)$,
  así que falta probar la otra comparación.
  Tenemos
  \begin{align*}
    f^\sharp(j)\inf f^\sharp(k)
    &= \Sup\Big\{[f(j(x))\inf\neg f(x)]
        \inf[f(j(y))\inf\neg f(y)] \mid x,y\in A\Big\} \\
    &= \Sup\Big\{f(j(x)\inf k(y))\inf\neg f(x\sup y)
        \mid x,y\in A\Big\} \\
    &\leq \Sup\Big\{f(j(x\sup y)\inf k(x\sup y))
        \inf\neg f(x\sup y) \mid x,y\in A\Big\} \\
    &= \Sup\Big\{f(j(z)\inf k(z))
        \inf\neg f(z) \mid z\in A\Big\} \\
    &= \Sup\Big\{f((j\inf k)(z))
        \inf\neg f(z) \mid z\in A\Big\} \\
    &= f^\sharp(j\inf k).
  \end{align*}
  Finalmente, hay que ver que $f=f^\sharp \eta_A$.
  En efecto: para cualquier $a\in A$, tenemos
  \begin{align*}
    f^\sharp(\eta_A(a))
    &= f^\sharp(\unuc a) \\
    &= \Sup\{f(\unuc a(x))\inf\neg f(x)\mid x\in A\} \\
    &= \Sup\{f(a\sup x)\inf\neg f(x)\mid x\in A\} \\
    &= \Sup\{(f(a)\sup f(x))\inf\neg f(x)\mid x\in A\} \\
    &= \Sup\{f(a)\inf\neg f(x)\mid x\in A\} \\
    &= f(a)\inf\Sup\{\neg f(x)\mid x\in A\} \\
    &= f(a)\inf 1 \\
    &= f(a),
  \end{align*}
  lo cual concluye la prueba.
\end{proof}

\begin{thm}[El ensamble como indicador de booleanidad]
  Sea $A$ un marco.
  Entonces el encaje $\eta_A:A\to NA$ es suprayectivo (y, por lo
  tanto, un isomorfismo) si, y solo
  si, $A$ es un álgebra booleana completa.
\end{thm}
\begin{proof}
    Supongamos que $\eta_A$ es suprayectiva.
    Entonces, para todo elemento $a\in A$,
    $\eta_A(a)=\unuc a$ tiene complemento $\vnuc a$ en $NA$.
    Como $\eta_A$ es isomorfismo, entonces
    $a$ tiene complemento en $A$.
    Luego, $A$ es booleana.
    
    Por otro lado, supongamos que $A$ es booleana.
    Dado $j\in NA$, mostraremos que $\eta_A(a)=j$,
    donde $a=j(0)$.
    Como $a\leq j(0)$, tenemos que $\unuc a\leq j$
    (por la adjunción $\eta_A\dashv\bot$).
    Queda demostrar la comparación $j\leq\unuc a$;
    esto es: $j(x)\leq x\sup a$ para todo $x\in A$.
    Como $A$ es booleana, podemos usar nuestro
    caballo de batalla, que nos dice que esto es equivalente
    a mostrar que $j(x)\inf\neg x\leq a$ para todo $x\in A$.
    En efecto, tenemos
    \begin{align*}
        j(x)\inf\neg x
        &\leq j(x)\inf j(\neg x) \\
        &= j(x\inf\neg x) \\
        &= j(0) \\
        &= a.
    \end{align*}
    Esto muestra que $\unuc a=j$,
    así que $\eta_A$ es suprayectiva y,
    por lo tanto, un isomorfismo.
\end{proof}

\section{Más cálculos en el ensamble}
\label{ssec:calculos}

\begin{lemma}[Tres equivalencias]
  \label{lemma:tres-equivalencias}
  Sea $A$ un marco.
  Entonces
  \begin{align*}
    \unuc a\leq j &\iff a\leq j(0) &
    \vnuc a\leq j &\iff 1=j(a) &
    j\leq \wnuc a &\iff j(a)=a.
  \end{align*}
  Nótese que la primera equivalencia es la adjunción $\eta_A\dashv\bot$
  que demostramos en \ref{ssec:complementacion}.
  También demostramos, en el lema \ref{lemma:nucleos-densos},
  el caso $a=0$ de la tercera equivalencia.
\end{lemma}
\begin{proof}
    Mostraremos la segunda y tercera equivalencias.
    
    Supongamos que $\vnuc a\leq j$.
    Evaluando en $a$, obtenemos $1=(a\succ a)\leq j(a)$,
    así que $1=j(a)$.
    Por otro lado, supongamos que $1=j(a)$.
    Para todo $x\in A$, tenemos $\vnuc a(x)=a\succ x$,
    por lo cual $\vnuc a(x)\inf a\leq x$.
    Aplicando $j$, obtenemos
    \begin{align*}
        j(x)
        &\geq j(\vnuc a(x)\inf a) \\
        &= j(\vnuc a(x))\inf j(a) \\
        &= j(\vnuc a(x))\inf 1 \\
        &\geq j(\vnuc a(x)) \\
        &\geq \vnuc a(x).
    \end{align*}
    Luego, $\vnuc a\leq j$.
    
    Ahora supongamos que $j\leq\wnuc a$.
    Evaluando en $a$, obtenemos $j(a)\leq a$.
    Como $j$ infla, esto es equivalente a $j(a)=a$.
    Por otro lado, supongamos que $j(a)=a$.
    Debemos mostrar que $j\leq\wnuc a$;
    esto es: que $j(x)\leq((x\succ a)\succ a)$
    para todo $x\in A$.
    Recordando que siempre tenemos $x\inf(x\succ a)=x\inf a$,
    se sigue que
    \begin{align*}
        j(x)\inf(x\succ a)
        &\leq j(x)\inf j(x\succ a) \\
        &= j(x\inf (x\succ a)) \\
        &= j(a) \\
        &= a.
    \end{align*}
    Luego, $j(x)\leq((x\succ a)\succ a)=\wnuc a(x)$,
    como se quería mostrar.
\end{proof}

\begin{lemma}
  Sea $A$ un marco y $j,k\in NA$ núcleos.
  Si $jk\leq kj$, entonces $k\sup j = kj$.
\end{lemma}
\begin{proof}
  Supongamos que $jk\leq kj$.
  Sea $g=kj$.
  Entonces
  \begin{align*}
    g^2
    &= kjkj \\
    &\leq kkjj \\
    &= k^2j^2 \\
    &= kj \\
    &= g.
  \end{align*}
  Es decir, $g$ es un prenúcleo idempotente, y así $g\in NA$
  es un núcleo por encima de $k$ y de $j$.

  Ahora, si $h\in NA$ es cualquier núcleo con $j\leq h$ y $k\leq
  h$, entonces $g=kj\leq h^2=h$.
  Se sigue que $g=k\sup j$.
\end{proof}

\begin{lemma}[Supremos con núcleos abiertos y cerrados]
    \label{lem:sup-ab-cerr}
  Sea $A$ un marco.
  Dado cualquier núcleo $j\in NA$ y elementos $a,b\in A$, tenemos
  \[
    \vnuc b \sup j \sup \unuc a = \vnuc b j \unuc a
  .\]
\end{lemma}
\begin{proof}
    Antes probamos que $j\sup\unuc a = j\unuc a$,
    por lo cual basta demostrar $\vnuc b \sup j = \vnuc b j$.
  Por el lema anterior, es suficiente con probar la desigualdad
  $j\vnuc b \leq \vnuc b j$.
  Es decir, hay que probar que $j(b\succ x) \leq (b\succ j(x))$
  para todo $x\in A$.
  Para esto, observemos que
  \begin{align*}
    j\vnuc b (x) \inf b
    &= j(b\succ x) \inf b \\
    &\leq j((b\succ x)\inf b) \\
    &= j(b\inf x) \\
    &\leq j(x).
  \end{align*}
  Usando la definición de la implicación, esto nos da $j\vnuc
  b(x) \leq (b\succ j(x))$, que es lo que queríamos.
\end{proof}

%\section*{(SESIÓN 13: 26 OCT)}

\subsubsection{La representación de un núcleo generado por una derivada}

Ya probamos que todo núcleo $j\in NA$ se puede representar como
\[
    j = \Sup\{\unuc{j(a)}\inf \vnuc a \mid a\in A \}
.\]
Si existe una derivada $f\in DA$ tal que $j=f^\infty$,
esta construcción se puede mejorar.
En esta sección, fijamos una derivada $f\in DA$ y suponemos que
$j=f^\infty\in NA$.
Usando la cadena de iteraciones de $f$, construiremos una cadena
en $A$, y luego una cadena en $NA$.
\begin{itemize}
  \item
  Para cada $a\in A$ y cada ordinal $\alpha$, definimos
  $a(\alpha)=f^\alpha(a)$.
  Esto nos da una cadena en $A$
  \[
    (a(\alpha) \mid \alpha\in\Ord)
  \]
  la cual, por cardinalidad, se estaciona en algún ordinal.
  En particular, por la definición de $a(\alpha)$, se tiene
  $a(\infty+1)=a(\infty)$ (recordemos que la cadena de los
  $f^\alpha$ se estaciona en el ordinal $\infty$).
  \item
  Usando la cadena anterior, construimos una nueva cadena en $NA$.
  \begin{align*}
    j_{a,0}
    &= \id_A \\
    j_{a,\alpha+1}
    &= (\unuc {a(\alpha+1)}\inf \vnuc {a(\alpha)})\sup j_{a,\alpha}
    \\
    j_{a,\lambda}
    &= \Sup\{j_{a,\alpha} \mid \alpha < \lambda\}
      & \text{(si $\lambda$ es límite).}
  \end{align*}
  Dado que los $a(\alpha)$ se estacionan, los $j_{a,\alpha}$ también.
  En efecto, si $a(\alpha) = a(\alpha+1)$, entonces
  \begin{align*}
    j_{a,\alpha+1}
    &= (\unuc {a(\alpha)}\inf \vnuc {a(\alpha)})
      \sup j_{a,\alpha} \\
    &= \id_A\sup j_{a,\alpha} \\
    &= j_{a,\alpha}.
  \end{align*}
  Sea $j_a$ el mayor de los $j_{a,\alpha}$.
  Es decir,
  \begin{align*}
    j_a
    &= \Sup\{j_{a,\alpha} \mid \alpha\in\Ord\} \\
    &= \Sup\{(\unuc {a(\alpha+1)}\inf\vnuc {a(\alpha)})
      \sup j_{a,\alpha} \mid \alpha\in\Ord\} \\
    &= \Sup\{\unuc {a(\alpha+1)}\inf\vnuc {a(\alpha)}
    \mid \alpha\in\Ord\}
  \end{align*}
  En particular, observemos que $j_a=j_{a,\infty}$.
\end{itemize}
El siguiente resultado nos dice que los núcleos
$j_{a,\alpha}$ tienen una descripción más simple.

\begin{lemma}
  Para cada ordinal $\alpha$, el núcleo $j_{a,\alpha}$ se puede
  expresar como
  \[
    j_{a,\alpha} = \unuc{a(\alpha)} \inf \vnuc a
  .\]
  En particular, para $\alpha=\infty$, tenemos
  \[
    j_a = j_{a,\infty} = \unuc{f^\infty(a)}\inf\vnuc a
  .\]
  Una consecuencia inmediata es que
  \[
    f^\infty = \Sup\{j_a \mid a\in A\}
  ,\]
  pues
  $f^\infty = \Sup\{\unuc{f^\infty(a)}\inf\vnuc a \mid a\in A\}$.
\end{lemma}
\begin{proof}
  Probamos la afirmación por inducción
  \begin{itemize}
    \item Para $\alpha=0$, tenemos $j_{a,0}=\id$, mientras que
    $\unuc{a(0)}\inf \vnuc a = \unuc a \inf \vnuc a = \id$.
    \item Supongamos que
    $j_{a,\alpha} = \unuc{a(\alpha)} \inf \vnuc a$.
    Entonces
    \begin{align*}
      j_{a,\alpha+1}
      &= (\unuc {a(\alpha+1)}\inf \vnuc {a(\alpha)})
        \sup j_{a,\alpha} \\
      &= (\unuc {a(\alpha+1)}\inf \vnuc {a(\alpha)})
        \sup (\unuc{a(\alpha)} \inf \vnuc a) \\
      &=
      (\unuc {a(\alpha+1)}\sup (\unuc{a(\alpha)} \inf \vnuc a))
      \inf(\vnuc {a(\alpha)}\sup (\unuc{a(\alpha)} \inf \vnuc a)) \\
      &= \unuc {a(\alpha+1)}
      \inf(\vnuc {a(\alpha)}\sup (\unuc{a(\alpha)} \inf \vnuc a)) \\
      &= \unuc {a(\alpha+1)}
      \inf(\vnuc {a(\alpha)}\sup\unuc{a(\alpha)})
      \inf(\vnuc {a(\alpha)}\sup \vnuc a) \\
      &= \unuc {a(\alpha+1)} \inf \tp \inf \vnuc a \\
      &= \unuc {a(\alpha+1)}\inf \vnuc a,
    \end{align*}
    como se quería.
    \item Si $\lambda$ es un ordinal límite, supongamos que 
    $j_{a,\alpha} = \unuc{a(\alpha)} \inf \vnuc a$ para todo
    ordinal $\alpha <\lambda$.
    Entonces
    \begin{align*}
      j_{a,\lambda}
      &= \Sup\{j_{a,\alpha} \mid \alpha<\lambda\} \\
      &= \Sup\{\unuc{a(\alpha)}\inf\vnuc a \mid\alpha<\lambda\}
      \\
      &= \Sup\{\unuc{a(\alpha)}\mid\alpha<\lambda\}\inf\vnuc a \\
      &= \unuc{\Sup\{a(\alpha)\mid\alpha<\lambda\}}\inf\vnuc a \\
      &= \unuc{a(\lambda)}\inf\vnuc a,
    \end{align*}
    como se deseaba.
  \end{itemize}
\end{proof}


Con este resultado, podemos probar que el núcleo $j=f^\infty$
tiene una descripción más simple que la canónica.

\begin{lemma}
  Si $f\in DA$ es una derivada tal que $f^\infty$ es un núcleo,
  entonces
  \[
    f^\infty = \Sup\{\unuc{f(a)}\inf\vnuc a \mid a\in A\}
  .\]
\end{lemma}
\begin{proof}
  Dado que
  \[
    \unuc{f(a)}\inf\vnuc a\leq \unuc{f^\infty(a)}\inf\vnuc a
  \]
  para todo $a\in A$, se sigue que
  \[
    \Sup\{\unuc{f(a)}\inf\vnuc a \mid a\in A\}
    \leq
    \Sup\{\unuc{f^\infty(a)}\inf\vnuc a \mid a\in A\}
    = f^\infty
  .\]

  Por otro lado, para cada $a\in A$ y cada ordinal $\alpha$, tenemos
  \[
    a(\alpha+1)=f^{\alpha+1}(a)=f(f^\alpha(a))=f(\alpha(a))
  ,\]
  por lo cual
  \[
     \unuc{a(\alpha+1)}\inf\vnuc{a(\alpha)}
     \in
     \{\unuc{f(b)}\inf\vnuc b \mid b\in A\}
  \]
  (poniendo $b=a(\alpha)$).
  Se sigue que
  \[
     \unuc{a(\alpha+1)}\inf\vnuc{a(\alpha)}
     \leq
     \Sup\{\unuc{f(b)}\inf\vnuc b \mid b\in A\}
  .\]
  Como esto es válido para todos los ordinales, tenemos
  \[
     j_a\leq \Sup\{\unuc{f(b)}\inf\vnuc b \mid b\in A\}
  ,\]
  pues $j_a = \Sup\{\unuc{a(\alpha+1)}\inf\vnuc{a(\alpha)}
   \mid\alpha\in\Ord\}$.
  De nuevo, como esto es válido para cualquier $a\in A$, concluimos
  que
  \[
     f^\infty\leq \Sup\{\unuc{f(b)}\inf\vnuc b \mid b\in A\}
  ,\]
  pues $f^\infty = \Sup\{j_a\mid a\in A\}$ (aquí es donde usamos
  el lema anterior).
\end{proof}

\subsubsection{Los núcleos regulares}

Recordemos que los núcleos regulares de un marco
(esto es, los de la forma $\wnuc a$) son exactamente
los que corresponden a sus cocientes booleanos.
Ahora probaremos que todo núcleo se puede descomponer en
núcleos regulares.

\begin{thm}[La representación en núcleos regulares]
    Sea $A$ un marco y $j:A\to A$ un núcleo.
    Entonces
    \[
        j
        = \Inf\{\wnuc{j(a)}\mid a\in A\}
        = \Inf\{\wnuc a\mid a\in A_j\}
    .\]
    Como $\{\wnuc{j(a)}\mid a\in A\}=\{\wnuc a \mid a\in A_j\}$,
    basta probar la primera igualdad.
\end{thm}
\begin{proof}
    Sea $l = \Inf\{\wnuc{j(a)}\mid a\in A\}$.
    En \ref{ssec:calculos} probamos que
    \[
        j\leq\wnuc a \ssi j(a) = a
    ,\]
    por lo cual $j\leq \wnuc{j(a)}$ para todo $a\in A$.
    Luego, $j\leq l$.
    Para la otra desigualdad,
    observemos que siempre tenemos $l\leq\wnuc{j(a)}$.
    Luego,
    \begin{align*}
        l(a)
        &\leq l(j(a)) \\
        &\leq \wnuc{j(a)}(j(a)) \\
        &= j(a),
    \end{align*}
    así que $l\leq j$, como se quería.
\end{proof}

\begin{lemma}
    Sean $A$ un marco y $a\in A$.
    Si $j\in NA$ es un núcleo tal que $\wnuc a\leq j$, entonces
    \[
        j = \wnuc a \sup\unuc b = \wnuc b
    ,\]
    donde $b=j(0)$.
    Nótese que, en particular, este resultado implica que los núcleos
    regulares forman una sección superior.
    
    También nótese que, por el lema
    [\nameref{lem:sup-ab-cerr}],
    el miembro central es igual a $\wnuc a\unuc b$.
\end{lemma}
\begin{proof}
    Como $b\leq j(0)$, tenemos
    $\unuc b\leq j$ (por la adjunción $\eta_A\dashv \bot$).
    Luego,
    \[
        \wnuc a\sup\unuc b\leq j
    .\]
    Notemos, además, que $j(b)=j(j(0))=j(0)=b$,
    lo cual sucede si, y solo si,
    \[
        j \leq \wnuc b
    .\]
    Finalmente, resta probar que
    $\wnuc b\leq \wnuc a\sup\unuc b$.
    Por nuestro caballo de batalla,
    esto es equivalente a $\wnuc b\inf\vnuc b\leq \wnuc a$
    lo cual sucede si, y solo si, $(\wnuc b\inf\vnuc b)(a)=a$.
    Dado que $\wnuc a\leq j$, tenemos
    $a=\wnuc a(0)\leq j(0)=b$.
    Luego, $(a\succ b)=1$, por lo cual
    \begin{align*}
        (\wnuc b\inf\vnuc b)(a)
        &= \wnuc b(a)\inf \vnuc b(a) \\
        &= ((a\succ b)\succ b)\inf (b\succ a) \\
        &= (1\succ b) \inf (b\succ a)\\
        &= b \inf (b\succ a) \\
        &= b\inf a \\
        &= a.
    \end{align*}
    Esto es lo que se quería mostrar.
\end{proof}

%\section*{SESIÓN 14: 28 OCT}

\begin{lemma}
    Sean $d\in DA$ y $j\in CA$.
    Entonces
    \[
        dj=j \ssi d\leq j \ssi jd=j
    .\]
\end{lemma}
\begin{proof}
    Probaremos la primera equivalencia,
    pues la segunda es completamente análoga.
    Supongamos que $jd=j$.
    Como $x\leq j(x)$, tenemos que $d(x)\leq d(j(x))=j(x)$.
    Luego, $d\leq j$.
    Por otro lado, si $d\leq j$, entonces tenemos
    $dj\leq jj=j$.
    La otra desigualdad ($j\leq dj$) se sigue porque $d$ infla.
\end{proof}

\begin{thm}
    Sean $A$ un marco y $a\in A$.
    Si $k\in NA$ es un núcleo tal que $\unuc a\leq k\leq\wnuc a$,
    entonces, para todo $j\in NA$ se tiene
    \[
        \wnuc a\sup j = \wnuc a j k = \wnuc b
    ,\]
    donde $b=\wnuc a(j(a))$.
\end{thm}
\begin{proof}
    Para la primera igualdad,
    basta ver que el prenúcleo $h=\wnuc ajk$ es idempotente
    y, por lo tanto, un núcleo.
    (En efecto, una vez probado esto, tendremos que
    cualquier núcleo $l$ que esté sobre $\wnuc a$ y $j$ queda
    por debajo de $h$, pues
    $h=\wnuc ajk\leq\wnuc aj\wnuc a\leq l^3=l$).
    
    Ahora, para probar la idempotencia de $h$,
    basta ver que $jh=h$ pues,
    por el resultado anterior,
    $k\leq\wnuc a$ implica $k\wnuc a=\wnuc a$,
    lo cual nos da
    \begin{align*}
        h^2
        &= \wnuc ajk\wnuc ajk \\ 
        &= \wnuc aj\wnuc ajk
            && (k\wnuc a=\wnuc a) \\ 
        &= \wnuc a\wnuc ajk
            && (jh=h)\\ 
        &= \wnuc ajk \\ 
        &= h.
    \end{align*}
    
    Probemos, pues, que $jh=h$.
    Sea $x\in A$ y definamos $y=jk(x)$,
    de modo que $jh(x)=h(x)$ es lo mismo que
    $j(\wnuc a(y))=\wnuc a(y)$.
    Una desigualdad es porque $j$ infla,
    así que queda probar la otra desigualdad:
    $j(\wnuc a(y))\leq\wnuc a(y)$,
    la cual equivale a $j(\wnuc a(y))\inf(y\succ a)\leq a$.
    Como $\unuc a\leq k$, tenemos $a\leq k(0)$, así que
    \begin{align*}
        j\wnuc a(y)\inf(y\succ a)
        &\leq j\wnuc a(y)\inf j(y\succ a) \\
        &= j(\wnuc a(y)\inf (y\succ a)) \\
        &= j(((y\succ a)\succ a)\inf (y\succ a)) \\
        &= j((y\succ a)\inf a) \\
        &= j(a) \\
        &\leq j(k(0)) && (a\leq k(0)) \\
        &\leq j(k(x)) \\
        &= y.
    \end{align*}
    Haciendo ínfimo con $(y\succ a)$, obtenemos
    \begin{align*}
        j(\wnuc a(y))\inf (y\succ a)
        &\leq y\inf (y\succ a) \\
        &= y\inf a \\
        &\leq a,
    \end{align*}
    que es lo que queríamos.
    
    Ahora veamos la otra igualdad.
    Evaluando las desigualdades $\wnuc a\leq k\leq \wnuc a$
    en $0$, obtenemos $k(0)=a$.
    Como $h=\wnuc ajk$ está por encima de $\wnuc a$,
    hace dos lemas vimos que $h=\wnuc b$, donde
    \begin{align*}
        b
        &= h(0) \\
        &= \wnuc ajk(0) \\
        &= \wnuc aj(a),
    \end{align*}
    como se quería.
\end{proof}

\begin{cor}
    Tomando $a=0$ en el resultado anterior,
    vemos que todo $j\in NA$ satisface
    \[
        j\sup\wnuc 0 = \wnuc{\neg\neg j(0)}
    .\]
\end{cor}

\begin{exe}%[Alfredo $\checkmark$]
    Obtén los núcleos regulares del marco
    \[
        9 \hspace{10mm} = \hspace{10mm} 
        \begin{tikzcd}[row sep=3mm, column sep=3mm]
            & & 1 \\
            & p \ar[ur,no head] && q \ar[ul,no head] \\
            l \ar[ur,no head]
                && m \ar[ul,no head] \ar[ur,no head]
                && r \ar[ul,no head] \\
            & a \ar[ul,no head]\ar[ur,no head]
                && b\ar[ul,no head]\ar[ur,no head] \\
            & & 0 \ar[ul,no head]\ar[ur,no head]
        \end{tikzcd}
    \]
\end{exe}
\begin{sol}
    Como los núcleos preservan los ínfimos y el $1$,
    basta conocer su acción sobre $\{l,p,q,r\}$.
    \[ 
        \begin{array}{|c|c|c|c|c|}
            \hline
        j = \wnuc x & j(l) & j(p) & j(q) & j(r) \\
            \hline
      \wnuc 1 = \tp &  1   & 1    & 1    & 1 \\
            \wnuc p &  p   & p    & 1    & 1 \\
            \wnuc q &  1   & 1    & q    & q \\
            \wnuc l &  l   & 1    & 1    & 1 \\
            \wnuc m &  p   & p    & q    & q \\
            \wnuc r &  1   & 1    & 1    & r \\
            \wnuc a &  l   & 1    & q    & q \\
            \wnuc b &  p   & p    & 1    & r \\
            \wnuc 0 &  l   & 1    & 1    & r \\
            \hline
        \end{array}
    \]
%    \[ 
%        \begin{array}{|c|c|c|c|c|}
%            \hline
%                 j=\vnuc x 
%                 & j(l)=(x\succ l) & j(p)=(x\succ p)
%                 & j(q)=(x\succ q) & j(r)=(x\succ r) \\
%            \hline
%      \vnuc 1 = \id &  l   & p    & q    & r \\
%            \vnuc p &  l   & 1    & q    & r \\
%            \vnuc q &  l   & p    & 1    & r \\
%            \vnuc l &  1   & 1    & q    & r \\
%            \vnuc m &  l   & 1    & 1    & r \\
%            \vnuc r &  l   & p    & 1    & 1 \\
%            \vnuc a &  1   & 1    & 1    & 1 \\
%            \vnuc b &  1   & 1    & 1    & 1 \\
%      \vnuc 0 = \tp &  1   & 1    & 1    & 1 \\
%            \hline
%        \end{array}
%    \]
\end{sol}

\part{El espacio de puntos}
\label{part:espacio-de-puntos}

\chapter{La adjunción entre \tps{$\Frm$}{Frm} y \tps{$\Top$}{Top}}

%\section*{VIDEO 5: El espacio de puntos, parte 1. (18 OCT)}
La asignación que manda cada espacio topológico $S$ a su marco de
abiertos $\cal OS$ es un funtor contravariante
$\cal O:\Top\to\Frm$.

Queremos ver que hay un funtor de regreso $\pt:\Frm\to\Top$, que
a cada marco $A$ le asigna un espacio topológico cuyos elementos
se verán como los puntos del marco.
Veremos que $\cal O$ y $\pt$ forman una adjunción
\[
\begin{tikzcd}
\Top \ar[d,shift right=2,"\cal O"'{name=L}]
\\
\Frm^\op \ar[u,shift right=2,"\pt"'{name=R}]
\adj{L}{R}
\end{tikzcd}
\]

Dado un espacio con un punto $\{*\}$, el conjunto de
puntos de $S$ está en biyección con las funciones continuas
$\{*\}\to S$:
\[
  S \simeq \Top(\{*\},S)
\]
donde cada punto $s\in S$ está asociado a la función $*\mapsto
s$.
Así, si $2$ es el marco de dos elementos $2=\{0<1\}$,
cada de estas funciones $s:\{*\}\to S$ induce un morfismo de
marcos $\chi_s:\cal OS\to\cal O\{*\}\simeq 2$ dado como
\[
  \chi_s(u) =
  \begin{cases}
    1 & s\in u \\
    0 & s\not\in u
  \end{cases}
.\]
Así, para cada marco $A$, tiene sentido definir los puntos de $A$
como morfismos $\Frm(A,2)$.
En efecto, más adelante consideraremos esta construcción.
Sin embargo, primero consideraremos otra construcción equivalente:
representaremos cada morfismo $\chi:A\to 2$ con un elemento de
$A$ de manera canónica: el elemento
\[
    p = \Sup\{x\in A\mid \chi(x)=0\}
\]
es el único elemento de $A$ que cumple
\[
    x\leq p \ssi \chi(x) = 0
.\]
En particular, dado que $\chi(1)=1$, tenemos $p\neq 1$.
Por otro lado, para cualesquiera $x,y\in A$ con
$x\inf y\leq p$, tenemos
\[
    \chi(x)\inf\chi(y)=\chi(x\inf y)=0
,\]
así que $\chi(x)=0$ o bien $\chi(x)=0$, pues $\chi$ toma valores
en el marco $2$. es decir: $x\leq p$ o bien $y\leq p$.

\begin{defn}
  Sea $A\in \Frm$. Un punto o elemento $\inf$-irreducible de A es un elemento $p\in A$ con $p\neq 1$ tal que si $x\inf y\leq p$, entonces $x\leq p$ ó $y\leq p$. Denotamos por $\pt A$ al conjunto de todos los puntos de $A$.
\end{defn}


\begin{lemma}
  Sea $A\in \Frm$.
  \begin{itemize}
      \item Cada máximo de $A$ es $\inf$-irreducible.
      \item Si A es booleano, entonces todo elemento $\inf-$irreducible de A es máximo.
      \item Si A es una cadena, entonces cada elemento propio de A es $\inf-$irreducible.
  \end{itemize}
\end{lemma}
\begin{proof}\quad
  \begin{itemize}
      \item Sea $p\in A$ máximo, entonces $p<1$. Si $x\inf y\leq p$ y suponiendo que $x\not\leq p$, entonces $p<x\sup p$ y, por la maximalidad de $p$, tenemos que $p\sup x=1$. Similarmente, $y\not\leq p$ implica $p\sup y=1$. Si $x\not\leq p$ y $y\not\leq p$, se tiene que 
      \[p=p\sup (x\inf y)=(p\sup x)\inf(p\sup y)=1.\]
      Esto es una contradicción ya que $p<1$.
      \item Supongamos que $A$ es booleano. Sean $p\in\pt A$ y $x,y\in A$ con $p<x$ y $y=\neg x$. Tenemos que $x\inf y=0\leq p$, entonces $x\leq p$ ó $y\leq p$ ya que p es $\inf-$irreducible. Además $y\leq p<x$ puesto que $p<x$. En consecuencia, $x\sup y=1=x$, así, $p$ es máximo.
      \item Supongamos que $A$ es una cadena. Para cualesquiera $x,y\in A$, tenemos que $x\leq y$ ó $y\leq x$, es decir, $x\inf y\leq x$ ó $x\inf y\leq y$. Sea $p\in A$ con $p<1$. Si $x\inf y\leq p$, entonces $x\leq p$ ó $y\leq p$.
  \end{itemize}
\end{proof}

\section{La reflexión espacial de un marco}

Sean $A\in \Frm$ y $a\in A$. Decimos que un punto $p\in \pt A$ está en $U_A(a)\subseteq \pt A$ si, y sólo si $a\not\leq p$.
\begin{exe}%[Yareli $\checkmark$ ]
Demostrar el siguiente lema:
  \begin{lemma}
    Sean $A\in \Frm$ y $a,b\in A$.
    \begin{itemize}
        \item $U_A(1)=\pt A$.
        \item $U_A(0)=\emptyset$.
        \item $U_A(a\inf b)=U_A(a)\cap U_A(b)$.
        \item $U_A(\Sup X)=\bigcup \{U_A(x)|x\in X\}$, $\forall X\subseteq A$.
    \end{itemize}
  \end{lemma}
\end{exe}
\begin{proof}
  Sean $A\in \Frm$ y $a,b\in A$.
\begin{itemize}
\item Por definición $U_A(1)\subseteq \pt A$. Sea $p\in \pt A$, entonces $p\neq 1$. Además $1\not\leq p$, por lo que $p\in U_A(1)$. Así, $U_A(1)=\pt A$.
\item Supongamos que $U_A(0)\neq \emptyset$. Sea $p\in U_A(0)$. Por definición, $0\not\leq p$ pero $0\leq a, \forall a\in A$. Por lo tanto, $U_A(0)=\emptyset$.
\item Sea $p\in \pt A$. Tenemos que
\begin{align*}
p\in U_A(a\wedge b)&\iff a\wedge b\not\leq p\\
&\iff a\not\leq p\quad y\quad b\not\leq p\\
&\iff p\in U_A(a)\quad y\quad p\in U_A(b)\\
&\iff p\in U_A(a)\cap U_A(b).
\end{align*}
Por lo que $U_A(a\wedge b)=U_A(a)\cap U_A(b)$.
\item Sea $X\subseteq A$ y notemos que si $X=\emptyset$, entonces ocurre el segundo punto. En caso contrario,
\begin{align*}
p\in U_A(\bigvee X)&\Rightarrow \bigvee X\not\leq p\\
&\Rightarrow \textit{existe }x\in X\textit{ tal que }x\not\leq p\\
&\Rightarrow p\in U_A(x)\\
&\Rightarrow p\in \bigcup \{U_A(x)\mid x\in X\}.
\end{align*}
Además,
\begin{align*}
p\in \bigcup\{U_A(x)\mid x\in X\}&\Rightarrow p\in U_A(x)\textit{ para algún }x\in X\\
&\Rightarrow x\not \leq p\\
&\Rightarrow \bigvee X\not\leq p\\
&\Rightarrow p\in U_A(\bigvee X).
\end{align*}
Por lo tanto, $U_A(\Sup x)=\bigcup \{U_A(x)|x\in X\}$, $\forall X\subseteq A$.
\end{itemize}
\end{proof}
Por el lema anterior, $U_A(A)=\{U_A(a)\mid a\in A\}$
es una topología en $\pt A$ y $U_A:A\to\cal O\pt A$ es un morfismo
suprayectivo de marcos.\\
Al espacio topológico $(\pt A,U_A(A))$ lo llamamos
el \textit{espacio de puntos} de $A$,
mientras que al morfismo $U_A\colon A\to \cal O\pt A$
lo llamamos la \textit{reflexión espacial} de $A$.
Además, si $U_A$ es un isomorfismo (basta con que sea inyectivo),
decimos que el marco $A$ es \textit{espacial}.

Observemos que, como $U_A$ es suprayectivo,
existe un núcleo $S\in NA$ tal que $A_S\cong \cal O\pt A$.\par
Sabemos que $S$ está caracterizado como $x\leq S(a) \iff U(x)\subseteq U(a)$. Probaremos que $S(a)=\Inf \{p\in \pt A|a\leq p\}$.
\begin{align*}
    x\leq S(a) &\iff U(x)\subseteq U(a)\\
    &\iff (\forall p\in \pt A)[x\not\leq p\Rightarrow a\not\leq p]\\
    &\iff (\forall p\in \pt A)[a\leq p \Rightarrow x\leq p]\\
    &\iff x\leq \Inf \{p\in \pt A|a\leq p\}
\end{align*}

\section{El orden de especialización}
\begin{exe}[Para el lector]%[Juan]
    \label{exe:especializacion}
  Sean $S\in Top$ y $p,q\in S$. Probar que la relación
  \[q\sqsubseteq p\iff \overline{q}\subseteq \overline{p}\]
  es un preorden. Si el espacio es $T_0$, entonces es un orden parcial.
\end{exe}
A la relación del ejercicio \ref{exe:especializacion}
le llamamos el \textit{orden de especialización}.\par 
Sean $p,q\in \pt A$. Notemos que
\begin{align*}
    q\sqsubseteq p&\iff \overline{q}\subseteq \overline{p}\\
    &\iff (\forall x\in A)[q\in U(x)\Rightarrow p\in U(x)]\\
    &\iff (\forall x\in A)[x\leq p\Rightarrow x\leq q]\\
    &\iff p\leq q.
\end{align*}
Es decir, el orden de especialización del espacio de puntos es el orden opuesto del marco original.
\[
    (\pt A,\sqsubseteq) = (\pt A,\leq)^\op.
\]
En particular, esto prueba que el espacio de puntos, $\pt A$, es $T_0$.

\section{El espacio de puntos del marco de abiertos}
Tomemos un espacio topológico $S\in\Top$.
¿Cómo se relacionan los puntos $s\in S$ con los puntos $p\in\cal OS$?
Dado $s\in S$ y $u\in\cal OS$ con $u\subseteq \overline{s}'$. Tenemos que
\[u\subseteq \overline{s}' \iff \overline{s}\subseteq u' \iff s\in u' \iff s\notin u.\]
Primero, observemos que $\overline{s}'\neq S$ ya que, de otro modo,
tendríamos $s\in\ol{s}=\emptyset$.\par 
Además, si $u,v\in \cal OS$ son tales que
$u\cap v\subseteq \ol{s}'$, entonces $s\notin u\cap v$.
Esto implica que $s\notin u$ ó $s\notin v$, es decir, $u\subseteq \ol{s}'$ ó $v\subseteq \ol{s}'$.
Esto nos dice que $\ol{s}'$ es un punto de $\cal OS$.
Por lo tanto, tenemos una función $\Phi_S:S\to\pt\cal OS$ dada
como $\Phi_S(s) = \ol{s}'$.
Además, si consideramos a $\pt\cal OS$ con la topología
$U_{\cal OS}(\cal OS)$, tenemos que
\begin{align*}
    s\in (\Phi_S)^{-1}(U_{\cal OS}(u))
    &\iff \Phi_S(s) \in U_{\cal OS}(u) \\
    &\iff u \nsubseteq \Phi_{\cal OS}(s) \\
    &\iff u \nsubseteq \ol{s}' \\
    &\iff s\in u.
\end{align*}
Es decir, $(\Phi_S)^{-1}$ manda abiertos de $\pt\cal OS$ en abiertos
de $S$, así que $\Phi_S:S\to\pt\cal OS$ es continua.

\section{La funtorialidad del espacio de puntos}
Queremos ver que la asignación $A\mapsto \pt A$ es un funtor.
Además comprobaremos que, si varía $A$, la reflexión espacial
es una transformación natural
\[U_\bullet:\id_{\Frm}\to\cal O\pt(\_).\]

Notemos que, para un morfismo de marcos $f\colon A\to B$ y un punto $p\in \pt B$, $z\leq f_\ast (p)\iff f(z)\leq p$, donde $f_\ast$ es adjunto derecho de $f$. En particular, si $1\leq f_\ast(p)\iff f(1)=1\leq p$. Esto es imposible ya que $p\in \pt B$. Por lo que $f_\ast(p)\neq 1$.\\
Sean $x,y\in A$ tales que $x\inf y\leq f_\ast(b)$. Esto pasa si, y sólo si $f(x)\inf f(y)\leq p$, en consecuencia, $f(x)\leq p$ ó $f(y)\leq p$, i.e., $x\leq f_\ast (p)$ ó $y\leq f_\ast (p)$. Por lo que $f_\ast (p)\in \pt A$.\par 
En resumen, dado un morfismo de marcos $f\colon A\to B$, obtenemos una función $\pt f \colon \pt B\to \pt A$ dada por la restricción
de $f_*:B\to A$.\par
Observemos que, para todo $p\in \cal \pt B$, tenemos
\begin{align*}
    p\in (\pt f)^{-1} \left(U_A(a)\right)&\iff f_\ast (p)\in U_A(a)\\
    &\iff a\not\leq f_\ast (p)\\
    &\iff f(a)\not\leq p\\
    &\iff p\in U_B\left(f(a)\right).
\end{align*}
Por lo tanto $\pt f\colon \pt B\to \pt A$ es continua.
Es fácil ver que, dados morfismos $k:C\to B$ y $h:B\to A$,
se satisface $(hk)_*=k_*h_*$.
Además, el adjunto derecho de $\id:A\to A$ también es la identidad
de $A$.
De estas observaciones se sigue que la asignación $\pt$
es un funtor (contravariante) $\pt:\Frm\to\Top$.

Además, en el párrafo anterior probamos que
\[
    \cal O(\pt f)(U_A(a)) = U_B(f(a))
\]
para todo $a\in A$.
Es decir: el diagrama
\[
    \begin{tikzcd}
        A \ar[r,"f"] \ar[d,"U_A"'] & B \ar[d,"U_B"] \\
        \cal O\pt A \ar[r,"\cal O\pt f"'] & \cal O\pt B
    \end{tikzcd}
\]
es conmutativo, así que $U_\bullet=(U_A\mid A\in\Frm)$
es una transformación
natural $U_\bullet:\id_\Frm\to\cal O\pt$.

Por último, hagamos la siguiente observación.
Dada una función continua $\psi:S\to T$,
las funciones $\Phi_S:S\to\pt\cal OS$ hacen conmutar el diagrama
\[
    \begin{tikzcd}
        S \ar[r,"\psi"] \ar[d,"\Phi_S"'] & T \ar[d,"\Phi_T"] \\
        \pt\cal OS \ar[r,"\pt\cal O\psi"'] & \pt\cal OT
    \end{tikzcd}
\]
En efecto, para todo $v\in\cal OT$, tenemos
\begin{align*}
    v\subseteq (\pt\cal O\psi)(\Phi_S(s))
    &\iff v\subseteq (\cal O\psi)_*(\Phi_S(s)) \\
    &\iff (\cal O\psi)(v) \subseteq \Phi_S(s) \\
    &\iff \psi^{-1}(v) \subseteq \ol{s}' \\
    &\iff s\nin \psi^{-1}(v) \\
    &\iff \psi(s)\nin v \\
    &\iff v\subseteq \ol{\psi(s)}' \\
    &\iff v\subseteq \Phi_T(\psi(s)),
\end{align*}
por lo cual $(\pt\cal O\psi)(\Phi_S(s))=\Phi_T(\psi(s))$.
Luego, la familia de funciones
\[
    \Phi_\bullet=(\Phi_S:S\to\pt\cal OS\mid S\in \Top)
\]
es una transformación natural
\[
    \Phi_\bullet : \id_\Top\to\pt\cal O
.\]

%\section*{VIDEO 6: El espacio de puntos, 2da parte (25 OCT)}
\section{La adjunción}
    \label{ssec:adjuncion}
En la primera parte, vimos que todo morfismo de marcos
$f:A\to B$ induce una función continua $\pt f:\pt B\to\pt A$ dada
como la restricción del adjunto derecho $f_*:B\to A$ de $f$ y
probamos que esta asignación es un funtor $\pt:\Frm\to\Top$.
Ahora veremos que $\pt$ y el funtor de abiertos
$\cal O:\Top\to\Frm$ son las mitades de una adjunción contravariante
entre $\Top$ y $\Frm$; es decir: que existe un isomorfismo
\begin{equation}
    \label{eqn:adj_frm_top}
    \Frm(A,\cal OS) \simeq \Top(S,\pt A)
\end{equation}
natural en $A$ y en $S$.

Cuando aprendimos sobre adjunciones,
vimos el caso covariante, en el cual el isomorfismo de
adjunción es equivalente a la existencia de dos transformaciones
naturales que satisfacen las identidades triangulares.

Ahora veremos que, en el caso contravariante,
tenemos el resultado análogo:
las identidades triangulares adecuadas
implican el isomorfismo natural (\ref{eqn:adj_frm_top}).

Recordemos que las transformaciones naturales
$U_\bullet:\id_\Frm\to\cal O\pt$ y
$\Phi_\bullet:\id_\Top\to\pt\cal O$
tienen componentes dadas como
\begin{align*}
    U_A:A&\to \cal O\pt A \\
    a &\mapsto U_A(a) = \{p\in \pt A \mid a\nleq p\}, \\
    \Phi_S:S&\to \pt\cal O S \\
    s &\mapsto \Phi_S(s)=\ol{s}'.
\end{align*}
Primero veremos que se cumplen las identidades triangulares
\[
    \begin{tikzcd}[row sep=15mm]
        & \cal OS \ar[d,"U_{\cal OS}"] \ar[dl,"\id_{\cal OS}"']
        \\
        \cal OS
        & \cal O\pt\cal OS \ar[l,"\cal O\Phi_S"]
    \end{tikzcd}
    \hspace{10mm}
    \begin{tikzcd}[row sep=15mm]
        & \pt A \ar[d,"\Phi_{\pt A}"] \ar[dl,"\id_{\pt A}"']
        \\
        \pt A
        & \pt \cal O\pt A \ar[l,"\pt U_A"]
    \end{tikzcd}
\]
En efecto, usando las equivalencias
\begin{align*}
    u\subseteq \Phi_S(s) &\ssi s\nin u, \\
    x\in U_A(a) &\ssi a\nleq x,
\end{align*}
tenemos
\begin{align*}
    x\in (\cal O\Phi_S)(U_{\cal OS}(u))
    &\iff \Phi_S(x) \in U_{\cal OS}(u) \\
    &\iff u\nleq \Phi_S(x) \\
    &\iff x\in u,
    \\
    a\leq (\pt U_A)(\Phi_{\pt A}(x))
    &\iff U_A(a) \leq \Phi_{\pt A}(x) \\
    &\iff x\nin U_A(a) \\
    &\iff a\leq x.
\end{align*}
Es decir, $(\cal O\Phi_S)(U_{\cal OS}(u))=u$
y $(\pt U_A)(\Phi_{\pt A}(x))=x$, como se quería.

Ahora, afirmamos que las funciones
\begin{align*}
    \Frm(A,\cal OS) &\to \Top(S,\pt A) \\
    f &\mapsto \bar f = (\pt f)\Phi_S,
    \\
    \Frm(A,\cal OS) &\leftarrow \Top(S,\pt A) \\
    (\cal O\phi)U_A = \bar\phi &\mapsfrom \phi.
\end{align*}
conforman una biyección.
En efecto,
la naturalidad de $\Phi_\bullet$, $U_\bullet$ y las identidades
triangulares implican la conmutatividad de los diagramas
\[
    \begin{tikzcd}[row sep=15mm]
        & \cal OS \ar[d,"U_{\cal OS}"] \ar[dl,"\id_{\cal OS}"']
        & A \ar[l,"f"'] \ar[d,"U_A"]
        \\
        \cal OS
        & \cal O\pt\cal OS \ar[l,"\cal O\Phi_S"]
        & \cal O\pt A \ar[l,"\cal O\pt f"]
    \end{tikzcd}
    \hspace{10mm}
    \begin{tikzcd}[row sep=15mm]
        & \pt A \ar[d,"\Phi_{\pt A}"] \ar[dl,"\id_{\pt A}"']
        & S \ar[l,"\phi"'] \ar[d,"\Phi_S"]
        \\
        \pt A
        & \pt \cal O\pt A \ar[l,"\pt U_A"]
        & \pt \cal OS \ar[l,"\pt\cal O\phi"]
    \end{tikzcd}
\]
por lo cual tenemos
\[
    \begin{aligned}
        \bar{\bar f}
        &= \ol{(\pt f)\Phi_S} \\
        &= \cal O((\pt f)\Phi_S)U_A \\
        &= (\cal O\Phi_S)(\cal O\pt f)U_A \\
        &= f,
    \end{aligned}
    \hspace{20mm}
    \begin{aligned}
        \bar{\bar\phi}
        &= \ol{(\cal O\phi)U_A} \\
        &= \pt((\cal O\phi)U_A)\Phi_S \\
        &= (\pt U_A)(\pt\cal O\phi)\Phi_S \\
        &= \phi.
    \end{aligned}
\]
Esto nos da la biyección (\ref{eqn:adj_frm_top}).
De manera explícita, la biyección está dada como
$\Frm(A,\cal OS)\ni f\leftrightarrow \phi\in \Top(S,\pt A)$, donde
\[
    s\in f(a) \ssi a\nleq \phi(s)
\]
para cualesquiera $s\in S$, $a\in A$, puesto que
\begin{align*}
    s\in f(a)
    &\iff f(a)\nleq \Phi_S(s) \\
    &\iff a \nleq (\pt f)(\Phi_S(s))=\bar f(s),
    \\
    a\nleq \phi(s)
    &\iff \phi(s) \in U_A(a) \\
    &\iff s \in (\cal O\phi)(U_A(a)) = \bar\phi(a).
\end{align*}

La naturalidad de la biyección se deja como ejercicio:
\begin{exe}%[Alfredo $\checkmark$]
    Verifica que la biyección (\ref{eqn:adj_frm_top})
    es natural en $A$ y en $S$.
\end{exe}
\begin{sol}
    Dado un morfismo de marcos $g:A\to B$, el diagrama
    \[
        \begin{tikzcd}
            \Frm(B,\cal OS) \ar[d,"{-}\circ g"'] \ar[r,"f\mapsto\bar f"']
            & \Top(S,\pt B)
            \ar[d,"\pt g\circ{-}"]
            \\
            \Frm(A,\cal OS) \ar[r,"h\mapsto\bar h"']
            & \Top(S,\pt A)
        \end{tikzcd}
    \]
    es conmutativo:
    \begin{align*}
        \ol{fg}
        &= \pt(fg)\Phi_S \\
        &= (\pt g)(\pt f)\Phi_S \\
        &= (\pt g)\bar f.
    \end{align*}
    Similarmente, dada una función continua $\psi:S\to T$,
    el diagrama
    \[
        \begin{tikzcd}
            \Frm(A,\cal OT)
            \ar[d,"\cal O\psi\circ{-}"']
            & \Top(T,\pt A) \ar[l,"\bar \phi\mapsfrom \phi"']
            \ar[d,"{-}\circ \psi"]
            \\
            \Frm(A,\cal OS)
            & \Top(S,\pt A) \ar[l,"\bar \xi\mapsfrom \xi"']
        \end{tikzcd}
    \]
    es conmutativo:
    \begin{align*}
        \ol{\phi\psi}
        &= \cal O(\phi\psi)U_A \\
        &= (\cal O\psi)(\cal O\phi)U_A \\
        &= (\cal O\psi)\bar\phi.
    \end{align*}
\end{sol}
El ejercicio anterior concluye la demostración.

\section{La propiedad universal de las reflexiones}
La biyección
\begin{align*}
    \Frm(A,\cal OS) &\simeq \Top(S,\pt A) \\
    f &\mapsto \bar f = (\pt f)\Phi_S \\
    (\cal O\phi)U_A = \bar\phi &\mapsfrom \phi.
\end{align*}
se puede leer como sigue:
dado un morfismo $f:A\to\cal OS$, existe una única función continua
$\phi:S\to\pt A$ tal que el diagrama
\[
    \begin{tikzcd}
        A \ar[r,"f"] \ar[d,"U_A"'] & \cal OS \\
        \cal O\pt A \ar[ur,"\cal O\phi"']
    \end{tikzcd}
\]
conmuta.
Similarmente, dada una función continua $\phi:S\to\pt A$, existe
un único morfismo $f:A\to\cal OS$ tal que el diagrama
\[
    \begin{tikzcd}
        S \ar[r,"\phi"] \ar[d,"\Phi_S"'] & \pt A \\
        \pt\cal OS \ar[ur,"\pt f"']
    \end{tikzcd}
\]
conmuta.

%\section*{SESIÓN 14: 28 OCT}

\chapter{Espacios sobrios y marcos espaciales}

Recordemos que, por definición, un marco $A$ es espacial si
su reflexión espacial $U_A:A\to\cal O\pt A$ es un isomorfismo
(o, equivalentemente, si $U_A$ es inyectiva).
Los marcos espaciales, junto con los morfismos de marcos,
forman la subcategoría $\Sp$ de $\Top$.

Ahora nuestro objetivo es ver que $\Top$ tiene una subcategoría
dual a $\Sp$, de tal modo que la dualidad
está dada por la restricción de la adjunción.
La categoría que queremos es la de los espacios sobrios,
a la cual denotaremos como $\Sob$.
También veremos que, análogamente a lo que pasa
con los marcos espaciales, un espacio topológico $S$ es sobrio
si, y solo si, $\Phi_S:S\to\pt\cal OS$ es un isomorfimso.

\section{Espacios sobrios}
Comenzaremos por definir los espacios topológicos sobrios.

Recordemos que, dado un espacio topológico $S$,
$\pt\cal OS$ es el conjunto de elementos
$\inf$-irreducibles del marco $\cal OS$.
Además, $\pt\cal OS$ tiene una topología canónica,
donde los abiertos son los conjuntos de la forma
\[
    U_{\cal OS}(u) = \{p\in\pt\cal OS \mid u\nleq p\}
.\]
También recordemos que, dotando a $\pt A$ con esta topología,
la función $\Phi_S:S\to\pt\cal OS$ dada como
\[
    \Phi_S(x) = \ol{x}' = S-\ol{\{x\}}.
\]
es continua.
A $\Phi_S(x):S\to\pt\cal OS$ le llamamos
la reflexión sobria de $S$, debido a la siguiente definición.

\begin{defn}
    Decimos que un espacio topológico $S$ es sobrio si
    cada abierto $\inf$-irreducibles es de la forma
    $\Phi_S(x)$ para un único punto $x\in S$.
    En otras palabras, un espacio $S$ es sobrio
    si su reflexión sobria $\Phi_S:S\to\cal OS$ es biyectiva.
    
    Puede parecer extraño definir la sobriedad en términos de
    la biyectividad de $\Phi_S$, en lugar de pedir que $\Phi_S$
    sea un homeomorfismo.
    Más adelante, veremos que estas condiciones son equivalentes.
    
    Denotamos como $\Sob$ a la categoría formada por
    los espacios topológicos sobrios y sus funciones continuas.
\end{defn}

\begin{lemma}
    Sea $S$ un espacio topológico.
    Si $S$ es de Hausdorff, entonces $S$ es sobrio.
    Si $S$ es sobrio, entonces es de Kolmogorov.
    Esto es
    \[
        T_2 \implies \text{sobrio}\implies T_0.
    \]
\end{lemma}
\begin{proof}
    Supongamos que $S$ es Hausdorff y sea $u\in\pt\cal OS$.
    Es decir, $u$ es un elemento $\inf$-irreducible de $\cal OS$.
    Queremos ver que $u=\ol{x}'$ (i.e.: $u'=\ol x$) para un único
    punto $x\in S$.
    Como $S$ es Hausdorff, esto sucede si, y solo si, $u'=\{x\}$
    para algún $x\in S$.
    Por definición, $u\neq S$, así que existe,
    al menos, un punto en $u'$.
    Supongamos que hay dos puntos $x,y\in u'$ distintos.
    Como $S$ es Hausdorff, existen abiertos $v_1,v_2\in\cal OS$
    con $x\in v_1$, $y\in v_2$ y $v_1\inf v_2=\emptyset$.
    Luego,
    \begin{align*}
        u
        &= u\sup(v_1\inf v_2) \\
        &= (u\sup v_1)\inf (u\sup v_2).
    \end{align*}
    Como $u$ es $\inf$-irreducible, esto implica que $v_1\leq u$
    o que $v_2\leq v$, pero esto implicaría que $x\in u$ o que $y\in u$,
    lo cual es una contradicción.
    Se sigue que $u'=\{x\}$, que es lo que se quería demostrar.
    
    Ahora supongamos que $S$ es sobrio.
    Si $x,y\in S$ son puntos distintos, entonces
    Dados $x,y\in S$, tenemos
    \begin{align*}
        \Phi_S(x) = \Phi_S(y)
        &\iff \ol{x}' = \ol{y}' \\
        &\iff \ol x = \ol y \\
        &\iff \cal U(x) = \cal U(y),
    \end{align*}
    donde $\cal U(x)$ y $\cal U(y)$ son los filtros
    de vecindades abiertas de $x$ y $y$, respectivamente.
    Como $\Phi_S$ es inyectiva, dados $x,y\in S$ distintos, tenemos
    \[
        \cal U(x)\neq\cal U(y),
    \]
    así que existe una vecindad abierta de $x$ que no contiene a $y$
    o una vecindad abierta de $y$ que no contiene a $x$.
    Esto es, $S$ es $T_0$.
\end{proof}

Reformulando un poco la definición de sobriedad,
obtenemos el siguiente resultado.
\begin{lemma}
    Un espacio $S$ es sobrio si, y solo si,
    todo cerrado irreducible de $S$
    (esto es, todo elemento $\sup$-irreducible de $\cal CS$)
    tiene un único punto genérico.
\end{lemma}
\begin{proof}
    Los cerrados $\sup$-irreducibles son exactamente
    los de la forma $c=u'$ para $u$ un abierto $\inf$-irreducible.
    Tomando complementos, vemos que las siguientes afirmaciones
    son equivalentes:
    \begin{itemize}
         \item Todo abierto $\inf$-irreducible es de
         la forma $u=\ol{x}'$ para un único $x\in S$.
         \item Todo cerrado $\sup$-irreducible es de
         la forma $c=\ol x$ para un único $x\in S$.
    \end{itemize}
    La primera afirmación es la sobriedad de $S$,
    mientras que la segunda dice que todo cerrado
    irreducible de $S$ tiene un único punto genérico.
\end{proof}

\begin{exa}
    Dado un anillo conmutativo $R$,
    el espectro primo $\mathrm{Spec}R$ es un espacio sobrio.
    
    Por ejemplo, los cerrados irreducibles de $\mathrm{Spec}\Z$ son
    de la forma $c=\{p\}$ (para un primo $p\in\Z$) o $c=\mathrm{Spec}\Z$.
    En el primer caso, el punto genérico es $p$.
    De otro modo, tenemos $\ol{\{0\}}=\mathrm{Spec}\Z$.
\end{exa}

%\section*{SESIÓN 15: 4 NOV}

\section{La topología de Skula}

Recordemos que, dado un marco $A$, el ensamble $NA$ viene equipado con
un morfismo $\eta_A:A\to NA$ que resuelve el problema de complementación
(de hecho, $\eta_A$ es la solución universal).

Ahora queremos explorar una situación parecida, para una topología
$\cal OS$, aunque solo consideraremos topologías en el conjunto $S$.

\begin{defn}
    Sea $S$ un espacio topológico y $\cal OS$ su topología.
    Definimos $\cal O\prs f{}S$ como la topología más pequeña
    en $S$ tal que todo $u\in\cal OS$ es abierto y cerrado.
    Es decir, $\cal O\prs f{}S$ es la topología generada por la subbase
    \[
        \cal OS\cup\{u'\mid u\in\cal OS\}
    .\]
    En otras palabras, $\cal O\prs f{}S$
    es la topología más pequeña sobre $S$
    tal que la inclusión $\cal OS\to\cal O\prs f{}S$ resuelve
    el problema de complementación.
    $\cal O\prs f{}S$ se llama la \emph{topología de Skula}
    de $S$, y al conjunto $S$ equipado con $\cal O\prs f{}S$
    lo denotamos $\prs f{}S$.
\end{defn}

\begin{exa}
    Sea $\R$ el conjunto de los números reales.
    Consideraremos los espacios topológicos
    Además, sean $\prs l{}\R$, $\prs{}m\R$
    y $\prs r{}\R$ los espacios topológicos dados por $\R$
    equipado con la topologías generadas por
    \begin{align*}
        \{(-\infty,a)\mid a\in\R\}, \\
        \{(a,b)\mid a,b\in\R\}, \\
        \{[a,b)\mid a,b\in\R\},
    \end{align*}
    respectivamente.
    Nótese que $\cal O\prs{}m\R$ es la topología estandar.
    Además, tenemos
    \[
        \cal O\prs l{}\R
        \subseteq
        \cal O\prs{}m\R
        \subseteq
        \cal O\prs r{}\R.
    \]
    No es difícil ver que $\prs l{}\R$ es $T_0$,
    aunque no es $T_0$.
    
    Entonces $\cal O\prs r{}\R$ es la topología de Skula
    en $\cal O\prs l{}\R$:
    \[
        \cal O\prs f{}(\prs l{}\R)
        = \cal O\prs r{}\R
    .\]
\end{exa}

Dado que la inclusión $\iota:\cal OS\to\cal O\prs f{}S$
es un morfismo de marcos que resuelve el problema de complementación,
se factoriza de manera única a través de $\eta_{\cal OS}$:
\[
    \begin{tikzcd}
        \cal OS \ar[d,"\eta_{\cal OS}"'] \ar[r,"\iota"]
        & \cal O\prs f{}S \\
        N\cal OS \ar[ur,"\iota^!"']
    \end{tikzcd}
\]
Por la adjunción entre $\cal O$ y $\pt$,
el morfismo $\iota^!:N\cal OS\to\cal O\prs f{}S$ corresponde
a un único morfismo $\phi:\prs f{}S\to\pt N\cal OS$.
Reemplazando a $\cal OS$ por un marco arbitrario $A$
y a $S$ por $\pt A$,
se puede demostrar que $\phi$ es un isomorfismo.

\section{Las distintas encarnaciones del espacio de puntos}

Recordemos que definimos el espacio de puntos de un marco
como el conjunto de sus elementos $\inf$-irreducibles.
Ahora veremos otras dos construcciones equivalentes.

\begin{defn}
    Sea $A$ es una retícula.
    Un subconjunto $F\subseteq A$ es un filtro si
    \begin{itemize}
        \item es sección superior (absorbe hacia arriba),
        \item es no vacío y
        \item es cerrado bajo ínfimos de dos elementos.
    \end{itemize}
    Además, un filtro $F$ es propio si $0\nin F$.
    Nótese que
    \[
        0\in F \ssi F=A
    .\]
    
    Decimos que un filtro $F\subseteq A$ es primo si,
    \begin{itemize}
        \item es propio y
        \item siempre que $a\sup b\in F$, entonces $a\in F$ o $b\in F$.
    \end{itemize}
    
    Si $A$ es una retícula completa (por ejemplo, un marco),
    entonces decimos que un filtro $F\subseteq A$ es completamente
    primo si,
    \begin{itemize}
        \item es propio y
        \item siempre que $\Sup X\in F$, entonces existe $x\in X\cap F$.
    \end{itemize}
\end{defn}

\begin{exa}
    Sean $S$ un espacio topológico y $x\in S$.
    Entonces el conjunto de vecindades abiertas de $x$
    \[
        \cal U(x) = \{u\in \cal OS\mid x\in u\}
    \]
    es un filtro completamente primo.
    
    En efecto, $\cal U(x)$ es un filtro:
    \begin{itemize}
        \item si $x\in u\leq v$, entonces $x\in v$;
        \item $x\in S$;
        \item si $x\in u$ y $x\in v$, entonces $x\in u\inf v$.
    \end{itemize}
    Además,  $\cal U(x)$ es propio, ya que $\emptyset\nin\cal U(x)$.
    Finalmente, si $X\subseteq \cal OS$ es tal que $x\in \Sup X$,
    entonces existe $u\in X$ tal que $x\in u$.
\end{exa}

%\section*{SESIÓN 16: 9 NOV}

\begin{defn}
    Un caracter en un marco $A$ es un morfismo
    \[
        \chi:A\to 2
    .\]
\end{defn}

\begin{thm}
    Las funciones
    \[
        \begin{aligned}
            (\pt A,\sqsubseteq)
            =(\pt A,\leq)^\op &\rightleftarrows \Cp(A) \\
            p &\mapsto F_p=\{a\in A\mid a\nleq p\} \\
            \Sup\{a\in A\mid a\nin F\} = p_F &\mapsfrom F
        \end{aligned}
        \hspace{20mm}
        \begin{aligned}
            \Cp(A) &\rightleftarrows \Frm(A,2) \\
            F &\mapsto \chi_F \\
            \chi^{-1}(1) = F_\chi &\mapsfrom \chi
        \end{aligned}
    \]
    son isomorfismos de copos.
\end{thm}
\begin{proof}
    \textbf{Primera parte.}
    Veamos que las funciones
    \begin{align*}
        \pt A &\rightleftarrows \Cp(A) \\
        p &\mapsto F_p = \{a\in A\mid a\nleq p\} \\
        \Sup\{a\in A\mid a\nin F\} = p_F &\mapsfrom F
    \end{align*}
    están bien definidas.
    \begin{itemize}
        \item
        Dado un $p\in\pt A$, sea $F_p=\{a\in A\mid a\nleq p\}$.
        Como $p\neq 1$, tenemos $1\nleq p$, por lo cual
        $1\in F_p$.
        Además, $F_p$ es cerrado hacia arriba:
        Si $a\geq b$, entonces $a\leq p\implies b\leq p$,
        o bien $b\nleq p\implies a\nleq p$;
        es decir: $b\in F_p$ implica que $a\in F_p$.
        Si $a,b\in A$, la irreducibilidad de $p$ implica que
        $a\inf b\leq p \implies a\leq p \text{ o } b\leq p$.
        Tomando contrapuesta, tenemos
        $a,b\in F_p \implies a\inf b\in F_p$.
        Luego, $F_p$ es un ideal.
        
        Notemos que $F_p$ es propio, pues $0\leq p$
        implica $0\nin F_p$.
        Finalmente, si $X\subseteq A$ tenemos
        \[
            (\forall x\in X,\; x\leq p)\implies\Sup X\leq p
        \]
        o, tomando contrapuesta:
        \[
            \Sup X\nleq p \implies \exists x\in X,\; x\nleq p
        .\]
        Luego, $F_p$ es completamente primo.
        \item
        Dado un filtro completamente primo $F$,
        consideremos $p_F=\Sup\{x\in A\mid x\nin F\}$.
        Como $F$ es completamente primo, tenemos $p_F\nin F$.
        Además, todo $x\leq p$ cumple $x\nin F$
        (de otro modo, tendríamos $p\in F$,
        pues $F$ es sección superior).
        Es decir:
        \[
            x\nin F\iff x\leq p_F
        .\]
        Notemos que $p_F\neq 1$, pues $1\in F$.
        Como $F$ es filtro, tenemos que
        $a,b\in F\implies a\inf b\in F$.
        Tomando contrapuesta, obtenemos
        $a\inf b\leq p\implies a\leq p_F$ o $b\leq p_F$.
        Ahora sean $a,b\in A$ tales que $a\nleq p_F$, $b\nleq p_F$.
        Como $F$ es sección superior, se sigue que $a\in F$,
        por lo cual $a\nleq p_F$.
        Es decir, $p_F$ es $\inf$-irreducible,
        o bien $p_F\in\pt A$.
    \end{itemize}
    Ahora veamos que estas funciones son inversas mutuas.
    Dado $p\in\pt A$, tenemos $F_p=\{x\in A\mid x\nleq p\}$.
    Entonces para todo $y\in A$ tenemos
    \begin{align*}
        p_{F_p} \leq y
        &\iff \Sup\{x\in A\mid x\nin F_p\}\leq y \\
        &\iff (\forall x\in A,\; x\nin F_p\implies x\leq y) \\
        &\iff (\forall x\in A,\; x\leq p\implies x\leq y) \\
        &\iff p\leq y.
    \end{align*}
    Se sigue que $p_{F_p}=p$.
    Ahora sea $F\in\Cp(A)$ y consideremos
    $p_F=\Sup\{x\in A\mid x\nin F\}$.
    Arriba ya mostramos que, para todo $x\in A$, tenemos
    \[
        x\leq p \iff x\nin F_p
    ,\]
    de modo que $F_{p_F}=\{x\in A\mid x\nleq p\}=F$.
    Luego, las funciones forman una biyección.
    
    Finalmente, notemos que, dados $p,q\in\pt A$, tenemos
    \[
        p\leq q
        \implies
        F_q=\{x\in A\mid x\nleq q\}
        \subseteq
        \{x\in A\mid x\nleq p\}=F_p,
    \]
    por lo cual obtenemos un isomorfismo de copos
    \[
        (\pt A,\sqsubseteq)=(\pt A,\leq)^\op \simeq \Cp(A)
    .\]
    \textbf{Segunda parte.}
    Veamos que las otras dos funciones
    \begin{align*}
        \Cp(A) &\rightleftarrows \Frm(A,2) \\
        F &\mapsto \chi_F \\
        \chi^{-1}(1) = F_\chi &\mapsfrom \chi
    \end{align*}
    están bien definidas.
    \begin{itemize}
        \item
        Si $F$ es un filtro completamente primo de un marco $A$, entonces
        la función característica $\chi_F:A\to 2$ de $F$, dada como
        \[
            \chi_F(a)=
            \begin{cases}
                1 & a\in F \\
                0 & a\nin F,
            \end{cases}
        \]
        es un morfismo de marcos y, por lo tanto, es un caracter de $A$.
        
        En efecto, dados $x,y\in A$, tenemos
        \begin{align*}
            \chi_F(x\inf y) = 1
            &\iff x\inf y\in F \\
            &\iff x\in F, y\in F & \text{ya que $F$ es filtro} \\
            &\iff \chi_F(x)=1, \chi_F(y)=1 \\
            &\iff \chi_F(x)\inf\chi_F(y)=1.
        \end{align*}
        Como $\chi_F$ toma valores en $2$, esto muestra que
        $\chi_F$ preserva ínfimos de dos elementos.
        Además, $1\in F$, por lo cual $\chi_F(1)=1$.
        
        Más aún, dado $X\subseteq A$, tenemos
        \begin{align*}
            \chi_F(\Sup X) = 1
            &\iff \Sup X\in F \\
            &\iff \exists x\in X, x\in F
                & \text{ya que $F$ es comp. primo} \\
            &\iff \exists x\in X, \chi_F(x) = 1 \\
            &\iff \Sup\{\chi_F(x)\mid x\in X\} = 1
                & \text{ya que $\chi_F$ es $2$-valuado.}
        \end{align*}
        Luego, $\chi_F$ preserva supremos.
        Esto prueba que $\chi_F\in\Frm(A,2)$.
        \item
        Tomemos $\chi\in\Frm(A,2)$ y sea $F_\chi=\chi^{-1}(1)$.
        $F_\chi$ es no vacío, pues $1\in F_\chi$.
        $F_\chi$ es cerrado hacia arriba: si $a\geq b\in F_\chi$,
        entonces $\chi(a)\geq\chi(b)=1$, por lo cual $a\in F_\chi$.
        Ahora, dados $a,b\in F_\chi$ tenemos
        $\chi(a\inf b)=\chi(a)\inf\chi(b)=1\inf 1=1$, así que
        $a\inf b\in F_\chi$.
        Se sigue que $F_\chi$ es un ideal.
        
        Además $F_\chi$ es propio, pues $0\nin F_\chi$.
        Finalmente, si $X\subseteq A$ es tal que
        $\Sup X\in F_\chi$,
        tenemos $1=\chi(\Sup X)=\Sup\{\chi(x)\mid x\in X\}$,
        lo cual solo puede suceder si hay $x\in X$ con $\chi(x)=1$,
        así que $x\in X\cap F_\chi$.
        Por lo tanto, $F_\chi$ es completamente primo.
    \end{itemize}
    Ahora veamos que estas funciones son inversas mutuas.
    Si $\chi:A\to 2$, consideremos $F_\chi=\chi^{-1}(1)$.
    Tenemos
    \begin{align*}
        \chi_{F_\chi}(x) = 1
        &\iff x\in F_\chi \\
        &\iff \chi(x),
    \end{align*}
    por lo cual $\chi_{F_\chi}=\chi$.
    Dado un filtro completamente primo $F$, consideremos
    $\chi_F$.
    Entonces
    \begin{align*}
        F_{\chi_F}
        &= \chi_F^{-1}(1) \\
        &= \{x\in A\mid \chi_F(x)=1 \} \\
        &= \{x\in A\mid x\in F\} \\
        &= F.
    \end{align*}
    Luego, las funciones son inversas mutuas.
    Además, si $\chi\leq\xi$ son caracteres de $A$,
    tenemos que
    \begin{align*}
        F_\chi
        &= \{x\in A\mid \chi(x)=1\} \\
        &\subseteq \{x\in A\mid \xi(x)=1\} \\
        &= F_\xi,
    \end{align*}
    de modo que tenemos un isomorfismo de copos
    \[
        \Cp(A) \simeq \Frm(A,2).
    \]
    Esto concluye la demostración.
\end{proof}

Recordemos que los elementos de la topología en $\pt A$
se definen como los de la forma
\[
    U_A(a) = \{p\in\pt A\mid a\nleq p\}.
\]
El teorema anterior nos dice que, en vez de tomar
al espacio de puntos $\pt A$ formado por los elementos
$\inf$-irreducibles de $A$, a un marco le podemos asignar
su espacio de puntos formado por sus filtros completamente primos
\[
    \pt^{\cal F} A = \Cp A
\]
o su espacio de puntos formado por sus caracteres
\[
    \pt^\chi A = \Frm(A,2).
\]
cuyas topologías están dadas por la imagen de $\cal O\pt A$
bajo las biyecciones.\\
Explícitamente, las topologías en $\pt^{\cal F}A$
y en $\pt^\chi A$ están dadas por los conjuntos de la forma
\[
    U^{\cal F}_A(a) = \{F\in\Cp(A) \mid a\in F\}
\]
y
\[
    U^\chi_A(a) = \{\chi\in\Frm(A,2)\mid\chi(a)=1\},
\]
respectivamente.

En particular, dado un espacio topológico $S$, podemos formar
los tres espacios homeomorfos
$\pt\cal OS$, $\pt^{\cal F}\cal OS$ y $\pt^\chi \cal OS$,
y cada uno viene equipado con las reflexiones sobrias
que se obtienen al componer con los homeomorfismos.
Explícitamente, tenemos
\begin{align*}
    \Phi_S:S&\to \pt\cal OS \\
    x&\mapsto \ol{x}' \\
    \Phi^{\cal F}_S:S&\to\pt^{\cal F}\cal OS \\
    x&\mapsto \{u\in\cal OS \mid x\in u\} = \cal U(x) \\
    \Phi^\chi_S:S&\to\pt^\chi\cal OS \\
    x&\mapsto \chi_{\cal U(x)}.
\end{align*}
Dado que estas tres funciones tienen las mismas
propiedades, podemos ver que un espacio $S$ es sobrio si,
y solo si, todo filtro completamente primo de $\cal OS$
es de la forma $\cal U(x)$ para un único $x\in X$,
lo cual sucede si, y solo si, todo morfismo de marcos
$\cal OS\to 2$ es de la forma $\chi_{\cal U(x)}$ para un único
$x\in S$.

%\section*{SESIÓN 17: 11 NOV}

\section{La dualidad entre \tps{$\Sob$}{Sob} y \tps{$\Sp$}{Sp}}

Recordemos que un marco $A$ es espacial si su reflexión espacial
\[
    U_A:A\to\cal O\pt A
\]
es un isomorfismo, y que un espacio topológico $S$ es sobrio
si su reflexión sobria
\[
    \Phi_S:S\to\pt\cal OS
\]
es biyectiva (después veremos que este es equivalente a que
$\Phi_S$ sea un homeomorfismo).

\begin{lemma}
    \leavevmode
    \begin{itemize}
        \item Para todo espacio $S$,
            el marco $\cal OS$ es espacial.
        \item Para todo marco $A$,
            el espacio $\pt A$ es sobrio.
    \end{itemize}
    En otras palabras, los funtores
    $\cal O:\Top\to\Frm$ y $\pt:\Frm\to\Top$ se factorizan
    a través de $\Sp$ y $\Sob$, respectivamente:
    \[
        \begin{tikzcd}
            \Top \ar[rr,"\cal O"] \ar[dr] && \Frm \\
            & \Sp \ar[ur]
        \end{tikzcd}
        \hspace{10mm}
        \begin{tikzcd}
            \Frm \ar[rr,"\pt"] \ar[dr] && \Top \\
            & \Sob \ar[ur]
        \end{tikzcd}
    \]
\end{lemma}
\begin{proof}
    En \ref{ssec:adjuncion} probamos que
    las identidades triangulares
    \[
        \begin{tikzcd}[row sep=15mm]
            & \cal OS \ar[d,"U_{\cal OS}"] \ar[dl,"\id_{\cal OS}"']
            \\
            \cal OS
            & \cal O\pt\cal OS \ar[l,"\cal O\Phi_S"]
        \end{tikzcd}
        \hspace{10mm}
        \begin{tikzcd}[row sep=15mm]
            & \pt A \ar[d,"\Phi_{\pt A}"] \ar[dl,"\id_{\pt A}"']
            \\
            \pt A
            & \pt \cal O\pt A \ar[l,"\pt U_A"]
        \end{tikzcd}
    \]
    siempre se satisfacen.
    Como queremos probar que $U_{\cal OS}$ es un isomorfismo
    y que $\Phi_{\pt A}$ es biyectiva,
    basta probar que las otras composiciones también son
    las identidades en $\cal OS$ y en $\pt A$, respectivamente.
    Esto es:
    \begin{align*}
        (U_{\cal OS})(\cal O\Phi_S) &= \id_{\cal OS} \\
        (\Phi_{\pt A})(\pt U_A) &= \id_{\pt A}.
    \end{align*}
    Lo primero es fácil:
    todo abierto $U\in\cal O\pt\cal OS$ es de la forma
    $U=U_{\cal OS}(u)$ para algún $u\in\cal OS$.
    Luego,
    \begin{align*}
        U_{\cal OS}(\cal O\Phi_S(U))
        &= U_{\cal OS}(\cal O\Phi_S(U_{\cal OS}(u))) \\
        &= U_{\cal OS}(u) \\
        &= U.
    \end{align*}
    
    Por otro lado, todo punto $z\in\pt\cal O\pt A$,
    es elemento de $\cal O\pt A$ y, por lo tanto,
    es de la forma $z=U_A(x)$ para algún $x\in A$.
    Poniendo $y=(\pt U_A)(z)$, tenemos
    \begin{align*}
        y
        &= (\pt U_A)(z) \\
        &= (U_A)_*(z) \\
        &= \Sup\{a\in A\mid U_A(a)\leq z\} \\
        &= \Sup\{a\in A\mid U_A(a)\leq U_A(x)\},
    \end{align*}
    de modo que
    \begin{align*}
        U_A(y)
        &= \Sup\{U_A(a)\in A\mid U_A(a)\leq U_A(x)\} \\
        &= U_A(x) \\
        &= z.
    \end{align*}
    Luego, para todo $p\in\pt A$ tenemos
    \begin{align*}
        p\in\Phi_{\pt A}((\pt U_A)(z))
        &\iff p\in \Phi_{\pt A}(y) \\
        &\iff p\in \ol{y}' \\
        &\iff y\nleq p \\
        &\iff p\in U_A(y) = z.
    \end{align*}
\end{proof}

Esta prueba también muestra que, si $\Phi_S:S\to\pt\cal OS$
es biyectiva, entonces es un homeomorfismo,
pues $\cal O\Phi_S:\cal O\pt\cal OS\to\cal OS$
siempre es un isomorfismo de marcos.
Luego, un espacio $S$ es sobrio si, y solo si,
$\Phi_S:S\to\pt\cal OS$ es un isomorfismo.

Una consecuencia inmediata es que las composiciones
\begin{align*}
    \Sob \to \Frm \to \Sp \\
    \Sp \to \Top \to \Sob
\end{align*}
son esencialmente suprayectivas.
En efecto: para cualquier marco espacial $A$ tenemos
$A\simeq\cal O\pt A$ con $\pt A$ sobrio, mientras que,
para cualquier espacio sobrio $S$, tenemos $S\simeq\pt\cal OS$
con $\cal OS$ espacial.

Además, estos funtores son fielmente plenos, pues dados marcos
espaciales $A,B$ y espacios $S,T$ sobrios, tenemos
\begin{align*}
    \Sp(A,B)
    &= \Frm(A,B) \\
    &\simeq \Frm(A,\cal O\pt B) \\
    &\simeq \Frm(\pt B,\pt A) \\
    &\simeq \Sob(\pt B,\pt A),
    \\
    \Sob(S,T)
    &= \Top(S,T) \\
    &\simeq \Top(S,\pt\cal OT) \\
    &\simeq \Frm(\cal OT,\cal OS) \\
    &\simeq \Sp(\cal OT,\cal OS).
\end{align*}
Por lo tanto, tenemos el resultado
\begin{thm}
    La adjunción contravariante
    \[
        \begin{tikzcd}
            \Frm \ar[r,"\cal O",shift left]
            & \Top \ar[l,"\pt",shift left]
        \end{tikzcd}
    \]
    se restringe a una equivalencia dual entre $\Sp$ y $\Sob$.
    Esto es:
    \[
        \Sp^\op \simeq \Sob.
    \]
\end{thm}

\section{\tps{$\Sp$}{Sp} y \tps{$\Sob$}{Sob} son reflexivas.}
Ahora veremos que las subcategorías $\Sp$ de $\Frm$ y
$\Sob$ de $\Top$ son reflexivas.
Esto es: los funtores de inclusión
\begin{align*}
    \Sp&\to\Frm \\
    \Sob&\to\Top
\end{align*}
tienen adjuntos izquierdos.
De hecho, veremos que los adjuntos son (las restricciones de)
$\cal O\pt$ y $\pt\cal O$, respectivamente.
En realidad la demostración es bastante fácil.
Usaremos la adjunción
\[
    \Frm(A,\cal OS) \simeq \Top(S,\pt A).
\]
Denotemos, por un momento, como $i:\Sp\to\Frm$ al funtor
de inclusión.
Entonces, para todo marco $A$ y todo marco espacial $B$, tenemos
$\pt\cal O\pt A\simeq\pt A$ y $\cal O\pt B\simeq B$, por lo cual
tenemos isomorfismos
\begin{align*}
    \Frm(A,iB)
    &=\Frm(A,B) \\
    &\simeq \Frm(A,\cal O\pt B) \\
    &\simeq \Top(\pt B,\pt A) \\
    &\simeq \Top(\pt B,\pt\cal O\pt A) \\
    &\simeq \Frm(\cal O\pt A,\cal O\pt B) \\
    &\simeq \Frm(\cal O\pt A,B) \\
    &\simeq \Sp(\cal O\pt A,B)
\end{align*}
naturales en $A$ y en $B$.
Se sigue que $\cal O\pt\dashv i$.

Ahora denotemos como $i:\Sob\to\Top$ al funtor de inclusión.
Para todo espacio $S$ y todo espacio sobrio $T$,
tenemos $\cal O\pt\cal OS\simeq\cal OS$ y $\pt\cal O T\simeq T$,
por lo cual tenemos isomorfismos
\begin{align*}
    \Top(S,iT)
    &= \Top(S,T) \\
    &\simeq \Top(S,\pt\cal OT) \\
    &\simeq \Frm(\cal OT,\cal OS) \\
    &\simeq \Frm(\cal OT,\cal O\pt\cal OS) \\
    &\simeq \Top(\pt\cal OS,\pt\cal OT) \\
    &\simeq \Top(\pt\cal OS,T) \\
    &\simeq \Sob(\pt\cal OS,T)
\end{align*}
naturales en $S$ y en $T$.
Se sigue que $\pt\cal O\dashv i$.

\section{Dualidad de Stone}

\begin{defn}
    Sea $A$ una retícula completa.
    Decimos que un elemento $a\in A$ es compacto si,
    para todo $S\subseteq A$ tal que $a\leq\Sup S$,
    existe un subconjunto finito $T\subseteq S$ tal que
    $a\leq\Sup T$.
    
    Al conjunto de elementos compactos
    de $A$ lo denotamos como $\cal KA$.
\end{defn}

Nótese que $\cal KA$ es cerrado bajo supremos finitos.
En efecto, sean $a,b\in\cal KA$.
Si $X\subseteq A$ es tal que $a\sup b\leq\Sup X$,
entonces $a\leq\Sup X$ y $b\leq\Sup X$, por lo cual
existen subconjuntos finitos $S,T\subseteq X$
tales que $a\leq\Sup S$ y $b\leq\Sup T$.
Luego, $a\sup b\leq\Sup\{S\cup T\}$ con $S\cup T\subseteq X$ finito.
Claramente, $0\in\cal KA$.

\begin{defn}
    Decimos que un marco $A$ es coherente si
    \begin{itemize}
        \item Todo elemento de $A$ es supremo de elementos
        en $\cal KA$.
        \item $\cal KA$ es cerrado bajo ínfimos finitos
        y $1\in\cal KA$.
        Es decir, $\cal KA$ es una subretícula de $A$.
    \end{itemize}
    En particular, dado un marco coherente $A$, la retícula
    $\cal KA$ es distributiva.
\end{defn}

\begin{defn}
    Sea $D$ una retícula distributiva.
    Un ideal de $D$ es un subconjunto $I\subseteq D$ tal que
    \begin{itemize}
        \item Absorbe hacia abajo (esto es, $I\in\cal LA$).
        \item Es no vacío.
        \item Es cerrado bajo supremos finitos.
    \end{itemize}
    Al conjunto de ideales de $D$ lo denotamos como $\cal ID$.
\end{defn}

\begin{lemma}
    Sea $D$ una retícula distributiva.
    El conjunto $\cal ID$ de ideales de $D$ es un marco,
    con el orden de contención (el heredado de $\cal PD$).
    
    Nótese que $\cal ID$ no es un submarco de $\cal PD$
    ni de $\cal LD$, pues $\emptyset\nin\cal ID$.
\end{lemma}
\begin{proof}
    Nótese que $D$ y $\{0\}$ son el mayor y menor elemento
    de $\cal ID$, respectivamente.
    
    Sea $X\subseteq\cal ID$ y notemos que $\bigcap X$
    es una sección inferior no vacía.
    Además, dados $a,b\in \bigcap X$, tenemos
    $a,b\in I$ para todo $I\in X$.
    Como cada $I$ es ideal, se sigue que
    $a\inf b\in I$ para todo $I\in X$; esto es:
    $a\inf b\in\bigcap X$.
    Luego, $\bigcap X$ es ideal de $D$ y, por lo tanto,
    es el ínfimo de $X$ en $\cal ID$
    \[
        \Inf X = \bigcap X,
    \]
    Es decir, $\cal ID$ es una sub-$\Inf$-semiretícula
    de $\cal PD$ (y de $\cal LD$).
    En particular, $\cal ID$ es una retícula completa.
    Sin embargo, los supremos en $\cal ID$ no se calculan
    como en $\cal PD$.
    
    Como $\cal ID$ es un conjunto $\Inf$-cerrado de $\cal PD$,
    le corresponde un operador cerradura $j:\cal PD\to\cal PD$.
    Afirmamos que $j$ está dado como
    \[
        j(S) = \{\Sup T\mid T\subseteq\down S\text{ finito}\},
    \]
    donde $\down:\cal PD\to\cal PD$ es la sección inferior
    generada por $S$ (el operador
    cerradura que le corresponde a $\cal LD$).
    En efecto, si $I$ es un ideal que contiene a $S$,
    entonces $\down S\subseteq I$ (porque $I$ es sección inferior)
    así que, para todo $T\subseteq\down S$ finito tenemos
    $\Sup T\in I$.
    Además, $\{\Sup T\mid T\subseteq\down S\text{ finito}\}$
    es ideal, ya que $D$ es distributiva.
    En particular, para un ideal $I$ y una sección inferior $L$,
    tenemos
    \begin{align*}
        I\cap j(L)
        &= I\cap\{\Sup T\mid T\subseteq\down L\text{ finito}\} \\
        &= I\cap\{\Sup T\mid T\subseteq L\text{ finito}\} \\
        &= \{\Sup T\mid\Sup T\in I,T\subseteq L\text{ finito}\}
        \\
        &= \{\Sup T\mid T\subseteq I,T\subseteq L\text{ finito}\}
            & \text{(}\Sup T\in I \iff T\subseteq I\text{)} \\
        &= \{\Sup T\mid T\subseteq(I\cap L)\text{ finito}\} \\
        &= j(I\cap L).
    \end{align*}
    Ahora recordemos que los supremos en $\cal ID$ se calculan como
    \[
        \Sup X = j(\bigcup X)
    \]
    para $X\subseteq\cal ID$.
    Luego, dado $I\in\cal ID$, tenemos
    \begin{align*}
        I\inf\Sup X
        &= I\cap j(\bigcup X) \\
        &= j(I\cap\bigcup X)
            &\text{pues $\bigcup X$ es sección inferior} \\
        &= j(\bigcup\{I\cap J\mid J\in X\}) \\
        &= \Sup\{I\inf J\mid J\in X\}.
    \end{align*}
    Se sigue que $\cal ID$ es marco.
\end{proof}

\begin{thm}
    \begin{itemize}
        \item Si $A$ es un marco coherente, entonces
        \[
            A\simeq \cal I\cal KA
        .\]
        (Recordemos que $\cal KA$ es una retícula distributiva).
        \item Si $D$ es una retícula distributiva, entonces
        \[
            D \simeq \cal K\cal ID
        ,\]
        donde $\cal ID$ es un marco coherente.
    \end{itemize}
    Nótese: este teorema implica que los marcos coherentes
    son exactamente los marcos de ideales de las retículas
    distributivas.
\end{thm}
\begin{proof}
    \begin{itemize}
        \item
        Sea $A$ un marco coherente.
        Entonces la función $\iota_A:A\to\cal I\cal KA$ dada como
        \[
            \iota_A(a) = \{c\in\cal KA\mid c\leq a\}
            =\down a\cap\cal KA
        \]
        es monótona y, para cualesquiera $a\in A, I\in\cal I\cal KA$,
        tenemos
        \begin{align*}
            \Sup\iota_A(a)
            &= \Sup\{c\in\cal KA\mid c\leq a\} \\
            &= a & \text{porque $A$ es coherente} \\
            \iota_A(\Sup I)
            &= \{c\in\cal KA\mid c\leq \Sup I\} \\
            &= I.
        \end{align*}
        Se sigue que $\iota_A:A\to\cal I\cal KA$ tiene inversa
        dada por
        \[
            \iota_A^{-1}(I) = \Sup I
        .\]
        
        \item
        Ahora sea $D$ una retícula distributiva.
        Por un lado, notemos que toda sección inferior
        principal $\down d$ es un ideal.
        Afirmamos que $\down d$ es compacto:
        \begin{quote}
            Supongamos que $X$ es una familia de ideales de $D$
            con $\down d\leq \Sup X$; es decir: $d\in j(\bigcup X)$,
            de modo que tenemos $d=\Sup\{d_1,\dots,d_n\}$,
            donde $d_i\in I_i\in X$ para $i=1,\dots,n$.
            Luego, $d\in j(\bigcup_{i=1}^n I_i)$,
            por lo cual $\down d\leq\Sup\{I_i\mid i=1,\dots,n\}$.
            Esto muestra la compacidad de $\down d$.
        \end{quote}
        Recíprocamente, todo ideal compacto $I$ es principal:
        \begin{quote}
            Observemos que $I\leq\Sup\{\down d\mid d\in I\}$,
            lo cual implica que existen $d_1,\dots,d_n\in I$
            tales que $I\leq\Sup\{\down d_1,\dots,\down d_n\}$,
            pero
            \[
                I
                \leq \Sup\{\down d_1,\dots,\down d_n\}
                = \down(d_1\sup\cdots\sup d_n),
            \]
            con $d_1\sup\dots\sup d_n\in I$, pues $I$ es ideal.
            Luego, $I=\down(d_1\sup\cdots\sup d_n)$,
            de modo que $I$ es principal.
       \end{quote} 
        Luego, la función $\kappa_D:D\to\cal K\cal ID$ dada como
        \[
            \kappa_D(d) = \down d
        \]
        es un isomorfismo.
        Nótese que, como todo ideal compacto $I$ es principal,
        el elemento $d\in D$ que lo genera es su mayor elemento,
        por lo cual $I$ tiene supremo $\Sup I=d$.
        
        Solo falta verificar que $\cal ID$ es coherente,
        pero esto es sencillo:
        Primero, todo ideal $I\in\cal ID$ es supremo
        de ideales coherentes:
        \[
            I = \Sup\{\down d\mid d\in I\}.
        \]
        Además, el ideal total
        \[
            1_{\cal ID}=D=\down 1_D
        \]
        es compacto y, dados ideales compactos
        $\down d,\down e\in\cal K\cal ID$, tenemos que su ínfimo
        $\down d\inf\down e=\down(d\inf e)$ es compacto.
    \end{itemize}
\end{proof}

\begin{defn}
    Sean $A$ y $B$ marcos coherentes.
    Decimos que un morfismo de marcos $f:A\to B$ es coherente
    si $f(\cal KA)\subseteq\cal KB$.
    
    Los marcos coherentes, junto con los morfismos coherentes,
    forman una categoría, a la cual denotamos como $\CohFrm$.
    Nótese que tenemos un funtor de inclusión $\CohFrm\to\Frm$.
\end{defn}

Por definición, un morfismo de marcos coherentes $f:A\to B$
se restringe a un morfismo de retículas (distributivas)
$\cal Kf:\cal KA\to\cal KB$.
Además, dado un morfismo de retículas distributivas $g:D\to E$,
definimos $\cal Ig:\cal ID\to\cal IE$ como
\[
    \cal Ig(I)
    = \Sup\{\down g(d)\mid d\in I\},
\]
lo cual respeta supremos (ya que $I=\Sup\{\down d\mid d\in I\}$)
y respeta ínfimos, pues
\begin{align*}
    \cal Ig(I)\inf\cal Ig(J)
    &= \Sup\{\down g(d)\mid d\in I\}
        \inf \Sup\{\down g(e)\mid e\in J\} \\
    &= \Sup\{\down g(d\inf e)\mid d\in I, e\in J\} \\
    &\leq \Sup\{\down g(x)\mid x\in I\cap J\}.
\end{align*}
(La otra comparación se sigue de la monotonía).

También es claro que las asignaciones $f\mapsto\cal Kf$
y $g\mapsto\cal Ig$ respetan la identidad y la composición
de morfismos, por lo cual obtenemos funtores
$\cal I:\DLat\to\CohFrm$ y $\cal K:\CohFrm\to\DLat$.

\begin{thm}
    Los funtores
    \[
        \begin{tikzcd}
            \DLat \ar[r,"\cal I",shift left] &
            \CohFrm \ar[l,"\cal K",shift left]
        \end{tikzcd}
    \]
    constituyen una equivalencia.
\end{thm}
\begin{proof}
    Dado que, para toda retícula distributiva $D$
    y todo marco coherente $A$,  $\kappa_D$ y $\iota_A$
    son isomorfismos, basta demostrar que las familias
    de morfismos
    \begin{align*}
        \kappa_\bullet &= (\kappa_D\mid D\in\DLat) \\
        \iota_\bullet &= (\iota_A\mid A\in\CohFrm)
    \end{align*}
    son transformaciones naturales
    \begin{align*}
        \kappa_\bullet:\id_\DLat &\to\cal K\cal I \\
        \iota_\bullet:\id_\CohFrm &\to\cal I\cal K.
    \end{align*}
    
    Dado un morfismo de retículas distributivas
    $g:D\to E$, debemos verificar la conmutatividad de
    \[
        \begin{tikzcd}
            \cal K\cal ID \ar[d,"\cal K\cal I g"']
                & D \ar[l,"\kappa_D"'] \ar[d,"g"] \\
            \cal K\cal IE
                & E \ar[l,"\kappa_E"]
        \end{tikzcd}
    \]
    En efecto, tenemos
    \begin{align*}
        \cal K\cal Ig(\kappa_D(d))
        &= \cal Ig(\down d) \\
        &= \Sup\{\down g(x)\mid x\in\down d\} \\
        &= \Sup\{\down g(x)\mid x\leq d\} \\
        &= \down g(d) \\
        &= \kappa_E(g(d)).
    \end{align*}
    Esto muestra la naturalidad de $\kappa_\bullet$.
    
    Por otro lado, dado un morfismo de marcos coherentes
    $f:A\to B$ debemos verificar la conmutatividad de
    \[
        \begin{tikzcd}
            \cal I\cal KA
                \ar[d,"\cal I\cal Kf"']
            & A \ar[d,"f"]
                \ar[l,"\iota_A"'] \\
            \cal I\cal KB & B \ar[l,"\iota_B"] 
        \end{tikzcd}
    \]
    Primero notemos que, para $c\in A$ compacto, tenemos
    \begin{align*}
        \cal I\cal Kf(\iota_A(c))
        &= \Sup\{\down f(x)\cap\cal KB\mid x\in\iota_A(c)\} \\
        &= \Sup\{\down f(x)\cap\cal KB\mid x\leq c,x\in\cal KA\} \\
        &= \down f(c)\cap\cal KB \\
        &= \iota_B(f(c)).
    \end{align*}
    Como todo elemento de $A$ es supremo de compactos,
    podemos tomar $a\in A$ y encontrar $X\subseteq A$
    con $a=\Sup X$.
    Luego, como $\cal I\cal Kf$, $\iota_A$, $\iota_B$ y $f$
    son morfismos de marcos, tenemos
    \begin{align*}
        \cal I\cal Kf(\iota_A(a))
        &= \cal I\cal Kf(\iota_A(\Sup X)) \\
        &= \Sup\{\cal I\cal Kf(\iota_A(c))\mid c\in X\} \\
        &= \Sup\{\iota_B(f(c))\mid c\in X\} \\
        &= \iota_B(f(\Sup X)) \\
        &= \iota_B(f(a)).
    \end{align*}
    Esto muestra la naturalidad de $\iota_\bullet$.
\end{proof}

El siguiente lema, junto con el lema de Zorn,
nos servirán para mostrar
que todo marco coherente es espacial.

\begin{lemma}
    Sean $A$ un marco y $d\in A$.
    Denotemos como $Z(d)$ al conjunto de los ideales de $A$
    que no contienen a $d$.
    Entonces
    \begin{enumerate}
        \item el copo $Z(d)$ es cerrado bajo uniones de familias
        dirigidas,
        \item cada elemento máximo de $Z(d)$ es un ideal primo de $A$ y,
        \item si $d$ es compacto, entonces cada máximo de $Z(d)$
        es principal.
    \end{enumerate}
\end{lemma}
\begin{proof}
    \begin{enumerate}
        \item Basta observar que $\cal IA$ es cerrado
        bajo uniones dirigidas.
        \item Sea $M$ un elemento máximo de $Z(d)$.
        Notemos que $M\neq A$, pues $d\nin M$.
        Para mostrar que es primo, veremos que $x,y\nin M$ implica
        $x\inf y\nin M$.
        En efecto, si $x,y\nin M$,
        entonces tenemos
        \begin{align*}
            M&<M\sup \down x=j(M\cup\{x\}), \\
            M&<M\sup\down y = j(M\cup\{y\}),
        \end{align*}
        donde $j(S)$ es el ideal de $A$ generado por $S\subseteq A$.
        Por la maximalidad de $M$, tenemos que $d\in j(M\cup\{x\})$
        y $d\in j(M\cup\{y\})$.
        Luego, $d\leq m_1\sup x$ y $d\leq m_2\sup y$, para algunos
        $m_1,m_2\in M$, por la construcción de $j$.
        Poniendo $m=m_1\sup m_2$, tenemos $m\in M$, por lo cual
        \begin{align*}
            d   &\leq (m_1\sup x)\inf(m_2\sup y) \\
                &\leq (m\sup x)\inf(m\sup y) \\
                &=m\sup (x\inf y)
                \in j(M\cup\{x\inf y\})
                = M\sup\down(x\inf y).
        \end{align*}
        Luego, $x\inf y\nin M$ pues,
        de otro modo, tendríamos $d\in M\sup\down(x\inf y)=M$,
        lo cual no sucede porque $M\in Z(d)$.
        
        \item 
        Supongamos que $d\in A$ es compacto y sea $M$ un elemento
        máximo de $Z(d)$.
        Si $p=\Sup M$, entonces tenemos $M\subseteq\down p$,
        por lo cual basta mostrar que $p\in M$.
        Si fuera el caso que $p\nin M$,
        entonces $M$ estaría propiamente contenido
        en el ideal $\down p$.
        Por la maximalidad de $M$, tendríamos $d\leq p=\Sup M$
        y la compacidad de $d$ implicaría que $d\in M$.
    \end{enumerate}
\end{proof}

Nótese que, si $d\in A$ es un elemento compacto,
entonces por el lema de Zorn y el punto 1,
todo elemento de $Z(d)$ está contenido en un elemento máximo de
$Z(d)$, el cual es un ideal primo principal de $A$,
por los puntos 2 y 3.


\begin{lemma}
    Todo marco coherente es espacial.
\end{lemma}
\begin{proof}
    Sea $A$ un marco coherente.
    Debemos ver que $U_A:A\to\cal O\pt A$ es inyectiva.
    Tomemos elementos $a,b\in A$ distintos (digamos $a\nleq b$).
    Entonces mostraremos que $U_A(a)\neq U_A(b)$
    probando que existe $p\in U_A(a)$ con $p\nin U_A(b)$;
    es decir: un elemento irreducible $p\in A$
    tal que $a\nleq p$ y $b\leq p$.
    
    Dado que $A$ es coherente, existe un compacto $d\in\cal KA$
    tal que $d\leq a$ y $d\nleq b$
    (de otro modo, tendríamos $a\leq b$, por la coherencia de $A$).
    Por el lema anterior, podemos tomar un ideal primo
    $I=\down p$ que es máximo en $Z(d)$
    y contiene a $\down b\in Z(d)$.
    Notemos que
    \begin{itemize}
        \item $p\in\pt A$, pues $I$ es primo,
        \item $a\nleq p$ pues, de otro modo,
        tendríamos $d\leq a\leq p$,
        \item $b\leq p$, pues $I$ contiene a $\down b$.
    \end{itemize}
    Luego, $p$ es el elemento primo que buscábamos.
\end{proof}

\begin{defn}
    Sea $S$ un espacio sobrio.
    Decimos que $S$ es coherente
    si $\cal OS$ es un marco coherente.
    
    Sea $f:S\to T$ una función continua entre espacios coherentes.
    Decimos que $f$ es coherente si $\cal Of:\cal OT\to\cal OS$
    es un morfismo coherente.
    Es decir, si todo abierto compacto de $T$ tiene preimagen
    compacta en $S$.
    
    Los espacios coherentes con sus funciones continuas
    coherentes forman una categoría llamada $\CohTop$.
\end{defn}

De la definición anterior,
es claro que la equivalencia $\Sob\simeq(\Sp)^\op$
se restringe a una equivalencia $\CohTop\simeq(\CohFrm)^\op$.
(Nota: en algunos lugares de la literatura, a los espacios
coherentes se les llama espacios espectrales).

\begin{thm}[Dualidad de Stone generalizada]
    La categoría de espacios coherentes es dual
    a la categoría de retículas distributivas:
    \[
        \CohTop \simeq (\DLat)^\op
    .\]
\end{thm}
\begin{proof}
    Se sigue de lo anterior:
    \[
        \CohTop \simeq (\CohFrm)^\op \simeq (\DLat)^\op
    .\]
\end{proof}

Un caso especial del teorema anterior es
la dualidad de Stone clásica.

\begin{defn}
    Decimos que un espacio topológico es cero dimensional
    si existe una base de la topología que consiste en
    conjuntos cerrados-abiertos.
    
    Un espacio cero dimensional, compacto y Hausdorff es llamado
    un espacio de Stone.
    
    Los espacios de Stone y las funciones continuas forman
    una categoría que denotamos como $\Stone$.
\end{defn}

Se puede probar que un espacio topológico es de Stone
si, y solo si, es Hausdorff y coherente,
y que todas las funciones continuas entre espacios de Stone
son coherentes, de modo que la dualidad anterior
se restringe como sigue.

\begin{thm}[Dualidad de Stone]
    \[
        \Stone \simeq (\Bool)^\op.
    \]
\end{thm}

\section*{Fin de la sesión 23 (2 de diciembre)}
\chapter{Ejemplos relevantes}
Sea $A$ un marco y $j\in NA$. Sea $p\in pt(A_j)$, visto como un morfismo $p:A_j\to 2$. Así, el morfismo $p_j=p\circ j$ representa un punto en $A$, esto es, que todo punto en $A_j$ es un punto en $A$. Por lo anterior, $ptA_j=\{p\in ptA \mid j(p)=p\}$.
 Para cualquier retícula distributiva, sea spec$A$ el conjunto de ideales primos de un marco $A$, equivalente al conjunto de filtros primos de $A$. Nótese que spec$A$ siempre es no vacío por el lema de Zorn; sin embargo, el conjunto de puntos de un marco $A$ sí puede ser vacío.
 
 \begin{exa}
     Sea $S\in \Top$ sobrio y $T_1$, y considérese el marco $\mathcal{O}(S)_{\neg \neg}$ que es el marco de puntos fijos de la doble negación, o el álgebra Booleana completa formada por los abiertos regulares de $S$, $R\mathcal{O}S$.
     Sea $p\in R\mathcal{O}S$; así, $p=\overline{s}^{\prime}$ para algún $s\in S=\{s\}^{\prime}$, ya que $S$ es $T_1$. Nótese que \begin{align*}
         \{s\}^{\prime}\in R\mathcal{O}S&\iff \neg\neg \{s\}^\prime =\{s\}^\prime\\
         &\iff \overline{\{s\}^\prime}^\circ=\{s\}^\prime\\
         &\iff \overline{\{s\}}^\circ=\{s\}
     \end{align*}
Ahora bien, sea $U=\{s\}^\circ$, y nótese que $U\neq\emptyset$ porque $\{s\}=\overline{U}$. Por ello, $s$ es un punto aislado en $S$.  Por lo tanto, $R\mathcal{O}S$ es un álgebra Booleana completa sin átomos, por lo que el espacio de puntos del marco $R\mathcal{O}S$ es vacío.
 \end{exa}
 Un área activa de investigación procura caracterizar los núcleos de un marco $A$ para los que $a_j$ es espacial, así como los marcos para los que todo cociente es espacial.
 
 \begin{exa}
 Considérense $\{G\in \mathbb{Z}-\text{Mod} \mid t(G)=G\}=\mathscr{T}_t$ la clase de grupos de torsión, y $\{G\in\mathbb{Z}-\text{Mod}\mid t(G)=0\}=\mathscr{F}_t$, la clase de grupos libres de torsión.Nótese que $\mathbb{T}_t$ es cerrada bajo submódulos, cocientes, isomorfismos, extensiones y productos, por lo que es una clase de torsión hereditaria.
 Ahora bien, las clases de torsión en la categoría de $\mathbb{Z}-\text{Mod}$ forman un conjunto, $\mathbb{Z}-$tors, que a la vez es un marco. Esto es cierto también en el caso de $\mathbb{R}$-módulos y $\mathbb{Q}$-módulos.
 Estos marcos no son la topología de ningún espacio.
 \end{exa}
\part{Temas selectos}

\chapter{La derivada de Cantor-Bendixon}

%\section*{SESIÓN 14: 28 OCT (parte 2)}

\begin{exe}
    Muestre que la categoría $\Top_0$ de espacios topológicos
    $T_0$ reflexiva en $\Top$.
    Es decir, que el funtor de inclusión $\Top_0\to\Top$
    tiene un adjunto izquierdo.
\end{exe}

Recordemos que, dada una derivada $f\in DA$,
definimos $\infty$ como el menor ordinal donde la cadena
\[
    f^0\leq f^1\leq \cdots\leq f^\alpha \leq f^{\alpha+1} \leq \cdots
\]
se detiene.
Esta construcción nos permite obtener
el menor operador cerradura $f^\infty$
que está por encima de $f$.

Ahora veremos que hay derivadas $f\in DA$ tales que
su ordinal de cerradura $\infty$ es arbitrariamente grande.

Dado un espacio topológico $S$,
denotaremos como $\cal CS$ al conjunto de los cerrados de $S$.
Es decir,
\[
    \cal CS = \{u'\mid u\in\cal OS\}
.\]
Además, dado un subconjunto $X\subseteq S$,
decimos que un punto $x\in S$ es un punto límite de $X$ si,
para toda vecindad abierta $u\in\cal OS$ de $x$,
existe un punto $y\in u\cap X$, $y\neq x$.
Al conjunto de puntos límite de $X$ lo denotamos como $\lim X$.

No es difícil verificar las siguientes propiedades.
\begin{itemize}
    \item si $X\in\cal CS$, entonces $\lim X\in\cal CS$,
    \item si $X\in\cal CS$, entonces $\lim X\subseteq X$,
    \item si $X,Y\in\cal CS$ y $X\subseteq Y$,
        entonces $\lim X\subseteq\lim Y$.
    \item si $x,Y\in\cal CS$,
        entonces $\lim(X\cup Y)=\lim X\cup\lim Y$.
\end{itemize}

Ahora, dado un abierto $u\cal OS$, definimos $\cbd u = \lim(u')'$.
Debido a las cuatro propiedades de arriba,
se sigue que $\cbd$ es una función $\cbd:\cal OS\to\cal OS$
monótona que, además, infla, y respeta ínfimos (intersección).
En otras palabras, $\cbd$ es un prenúcleo en $\cal OS$,
al cual llamamos la derivada de Cantor-Bendixon.

Notemos que, dado un punto $x\in S$,
tenemos $\lim(\{x\})=\emptyset$,
de modo que $\cbd(\{x\}')=S$.

En topología, un conjunto perfecto es un subconjunto cerrado tal que todos sus puntos son puntos de acumulación (es decir, el conjunto carece de puntos aislados).

Un conjunto es booleano si para cualquier elemento dentro del conjunto, este tiene complemento dentro del conjunto.
\begin{itemize}
\item La derivada de Cantor-Bendixson es una herramienta que permite construir conjuntos perfectos.
\item La derivada de Cantor-Bendixson mide que tan booleano es un conjunto
\end{itemize}

\begin{defn}
Para un marco $A$ y elementos $a\leq b$, el intervalo $[a,b]$ es booleano si, como marco, este es booleano.
\end{defn}

\noindent
En otras palabras, si $x\in[a,b]$ existe un único elemento $y\in[a,b]$ tal que $x\wedge y=a$ y $x\vee y=b$. Cuando existe este elemento $y$ es de la forma $$y=(x\succ a)\wedge b\mbox{  (ó }x=(y\succ a)\wedge b).$$

\noindent
Por ejemplo, al sustituir a $x$ obtenemos lo siguiente:

\begin{itemize}
    \item $x\wedge y$ $=((y\succ a)\wedge b)\wedge y=y\wedge a\wedge b=a$
\item $x\vee y$ $=((y\succ a)\wedge b)\vee y=((y\succ a)\vee y)\wedge (b\vee y)=(y\succ a)\vee y)\wedge b=b$.
\end{itemize}

\noindent
Notemos que si $x$ es el complemento de $y$, $x\vee y=b$. Luego $$(y\succ a)=(y\succ x\wedge y)\leq x\Rightarrow y\vee (y\succ a)\leq y\vee x=b.$$
Entonces $x=(y\succ a)\wedge b.$

\begin{lemma}
Sean $A\in$ \textit{Frm} y $a\in A$. Sea $X\subseteq A$, $$X=\{x\in X|a\leq x\mbox{ y } [a, x]\mbox{ es booleano}\},$$ entonces $\bigvee X\in X$. 
\end{lemma}

\begin{proof}
Sea $b=\bigvee X$. Notemos que $a\leq\bigvee X$ así resta ver que $[a, b]$ es booleano.\\
\noindent
Sea $y\in A$ tal que $a\leq y\leq b$. Sabemos que para cualquier $x\in X$, $[a, x]$ es booleano. Como $a\leq x\wedge y\leq x$ $\exists z(x)\in [a,x]$ tal que 
$$z(x)\wedge (x\wedge y)=a\mbox{  y  }z(x)\vee (x\wedge y)=x.$$

\noindent
Tomemos $z=\bigvee\{z(x)|x\in X\}$, entonces $y\wedge z=y\wedge\bigvee\{z(x)|x\in X\}$.Al ser $z(x)\leq x$, entonces $z(x)\wedge x=z(x)$, luego $z(x)\wedge x\wedge y=z(x)\wedge y$, pero  $z(x)\wedge(x\wedge y)=a$. Por lo tanto $y\wedge z=\bigvee\{z(x)\wedge y|x\in X\}=a$.

\noindent
Resta ver $z\vee y=b$. Sabemos que $x=z(x)\vee (x\wedge y)=(z(x)\vee x)\wedge (z(x)\vee y)$, pero como $z(x)\leq x$, entonces $x=x\wedge (z(x)\vee y)$ y esto implica que $x\leq z(x)\vee y\leq b=\bigvee X.$ Luego $$y\vee z=y\vee\bigvee\{z(x)|x\in X\}=\bigvee\{y\vee z(x)|x\in X\}\leq b.$$

\noindent
Además, $b=\bigvee X\leq \bigvee\{z(x)\vee y|x\in X\}$. Por lo tanto $y\vee z=b.$ Así,hemos probado que el intervalo $[a,b]$ es booleano y de esta forma $b=\bigvee X\in X$.
\end{proof}

\begin{defn}
Para cualquier marco $A$, si $a,x\in A$, decimos que $x$  es \textbf{esencialmente mayor que} $a$ $(a\lessdot x)$ si y sólo si $$a\leq x\mbox{  y  }(x\succ a)=a.$$
Con esta relación entre elementos de un marco ya podemos definir la \textbf{derivada de Cantor-Bendixson} como $$cbd^A(a)=\bigwedge\{x\in A|a\lessdot x\}.$$
\end{defn}

\begin{lemma}\label{Lema46}
Sea $A\in$ \textit{Frm}. Para cualquier $a\in A$, $[a,cbd^A(a)]$ es el intervalo booleano más grande arriba de $a$. Es decir, para cualquier $x\in A$, si $[a,x]$ es booleano, entonces $x\leq cbd^A(a)$.
\end{lemma}

\begin{proof}
Supongamos que $[a,y]$ es un intervalo booleano y sea $x\in A$ tal que $a\lessdot x$. Sea $b=x\wedge y$, entonces $a\leq b\leq y$. Como $[a,y]$ es booleano existe $c\in [a, y]$ tal que $$c\wedge b=a\mbox{  y  }c\vee b=y.$$
Si $c\wedge x\wedge y\leq c\wedge y\leq a$, entonces $c\wedge y\leq (x\succ a)=a$. Como $a\leq x\wedge y=b$ tenemos que $c\wedge y\leq b$.

\noindent
Así, $b=b\vee (y\wedge c)=(b\vee y)\wedge(b\vee c)=(b\vee y)\wedge y=y$. Con ello $b=x\wedge y=y$, es decir, $y\leq x$ para cualquier $x\in A$ con $a\lessdot x$. Entonces $y\leq \bigwedge\{x\in A|a\lessdot x\}=cbd^A(a)$.

\noindent
Veamos que $[a, cbd^A(a)]$ es booleano. Sea $d=cbd^A(a)$ y $y\in A$ tal que $a\leq y \leq d$. Tomemos $z=(y\succ a)$, entonces $a\leq (y\succ a)=z$ y $y\wedge z=y\wedge (y\succ a)=a$. Con ello $((y\vee z)\succ a)=(y\succ a)\wedge(z\succ a)=a$. De aquí que $$a\leq z\vee y\mbox{ y }((y\vee z)\succ a)=a,$$ 
es decir, $a\lessdot (y\vee z)$. Por lo tanto, $d=\bigwedge\{x\in A|a\lessdot x\}\leq y\vee z$.

\noindent
Notemos que $$y\wedge(z\wedge d)=(y\wedge z)\wedge d=a\wedge d=a$$ y $$y\vee (z\wedge d)=(y\vee z)\wedge (y\vee d)=(y\vee z)\wedge d=d,$$ 
es decir, $z\wedge d$ es el complemento de $y$ en $[a,cbd^A(a)]$. Por lo tanto $[a,cbd^A(a)]$ es booleano. 
\end{proof}

\begin{lemma}
Sea $A\in$ \textit{Frm}, para cualesquiera $a,b,y,x\in A$ tenemos que:
\begin{enumerate}
\item $b\leq a\lessdot x\leq y\Rightarrow b\lessdot y$.
\item Si $a\lessdot x$ y $b\lessdot y$, entonces $a\wedge b\lessdot x\wedge y$.
\end{enumerate}
\end{lemma}

\begin{proof}
Para la primera parte, por hipótesis $a\leq x$ y $(x\succ a)=a$, de aqui que $b\leq y$. Resta ver que $(y\succ b)=b$. Sabemos que $b\leq (y\succ b)$. Ahora si $x\leq y$, entonces $(y\succ b)\wedge x\leq (y\succ b)\wedge y=y\wedge b=b\leq a$, así $(y\succ b)\wedge x\leq a$. Por definición de implicación $(y\succ b)\leq (x\succ a)=a\leq y$. Con ello $(y\succ b)=(y\succ b)\wedge y=y\wedge b\leq b$. De esta forma $(y\succ b)=b$.

\noindent
Por lo tanto $b\lessdot y$.

Para la segunda parte, notemos que $a\leq x$ y $b\leq y$, entonces $a\wedge b\leq x\wedge y$. Veamos que $((x\wedge y)\succ (a\wedge b))=a\wedge b$.

\noindent
Sea $z=((x\wedge y)\succ (a\wedge b))$, luego $z\wedge (x\wedge y)=(x\wedge y)\wedge (a\wedge b)\leq a\wedge b\leq b$. Entonces 
\begin{equation*}
\begin{split}
    z\wedge x\leq (y\succ b)=b\leq y & \Rightarrow z\wedge x\leq z\wedge x\wedge y\leq a\wedge b\leq a\\
    & \Rightarrow z\leq (x\succ a)=a.
\end{split}
\end{equation*}
Así, $z= z\wedge a\leq z\wedge x\leq b$ implica que $z\leq a$ y si $z\leq b$, entonces $z\leq a\wedge b$. Además también se cumple que $a\wedge b\leq z$, pues $(a\wedge b)\leq ((x\wedge y)\succ (a\wedge b))$. Por lo tanto $a\wedge b\lessdot x\wedge y$.
\end{proof}

En el contexto de teoría de marcos,
la derivada de Cantor-Bendixson en el marco $A$ es el operador
$$cbd:A\to A$$
$$cbd(a)=\bigwedge\{x\in A|a\lessdot x\}.$$
Tomemos ahora un marco $A$ y $j\in NA$. Si $j\in NA$, entonces
$A_j$ es un marco y su derivada de Cantor-Bendixon es
$$cbd^{A_j}:A_j\to A_j$$ 
$$cbd^{A_j}(a)=\bigwedge\{x\in A_j|a\lessdot x\}.$$
Recordemos que si $j\in NA$, $A_j$ es un conjunto implicativo, es decir, $(x\succ a)\in A_j$. Entonces $$\mbox{esencialmente mayor en }A_j\Rightarrow\mbox{ esencialmente mayor en }A.$$

Consideremos la siguiente composición
$$A\xrightarrow{j} A_j\xrightarrow{cbd^{A_j}} A_j\xrightarrow{i} A$$
Esta composición nos da un operador de $A$ que llamamos $cbd_j^{A}$ y al fijarnos puntualmente en la composición tenemos que
$$cbd_j^A:A\to A$$
$$cbd_j^{A}(a)=\bigwedge\{x\in A_j|j(a)\lessdot x\}.$$
Notemos que $cbd_j^{A}\neq cbd^{A_j}$ pues el primero es un operador en $A$ y el segundo en $A_j$. Si $j=id_A$ entonces $cbd_j^{A}= cbd^{A_j}$.

En lo que sigue, cuando sea claro el marco en el que se este trabajando omitiremos escribir el supraíndice.

\begin{thm}
Sea $A\in$ \textit{Frm} y $j\in NA$, entonces $cbd_j^{A}\in PA$.
\end{thm}

\begin{proof}
Sea $j\in NA$ y $x\in A$. Tomemos $e_x=j\circ u_x\circ v_x\circ j$. Como $j, u_x, v_x\in NA$, entonces $e_x$ es al menos un prenúcleo. Sea $e=\bigwedge\{e_x|x\in A\}$, entonces $e\in PA$, pues es ínfimo de prenúcleos.
\begin{description}
\item[Afirmación:] $cbd_j=e$. 
\end{description}

Veamos que $cbd_j\leq e$. Sean $a\in A$ y $x\in A_j$ tales que $j(a)\lessdot x$. Por como se definió $e_x$, $e_x(a)=(j\circ u_x\circ v_x\circ j)(a)=j(x\vee (x\succ j(a)))=j(x\vee j(a))=j(x)=x$ pues $j(a)\lessdot x$ y $x\in A_j$. Además, $e\leq e_x$, entonces 
$$e(a)\leq e_x(a)=x\leq \bigwedge\{x\in A|j(a)\lessdot x\}=cbd_j(a).$$
Por lo tanto $e\leq cbd_j$.

Para la otra desigualdad. Tomamos $x,a\in A$ y $z=x\vee (x\succ j(a))=(u_x \circ v_x\circ j)(a)$ y $y=e_x(a)=j(z)=(j\circ u_x \circ v_x\circ j)(a)$. Entonces $j(a)\leq z\leq j$.

\noindent
Notemos que $$(y\succ j(a))=(j(z)\succ j(a))=(z\succ j(a))=((x\vee (x\succ j(a))\succ j(a))=j(a).$$ 
Como $j(a)\leq y$ entonces $j(a)\lessdot y$ y por la definición de derivada para el núcleo $j$ tenemos que $cbd_j\leq y=e_x(a)$.

\noindent
Así, $cbd_j\leq e_x$ $\forall x\in A$. Por lo tanto $e=cbd_j$ y $cbd_j\in PA$. 
\end{proof}

\begin{lemma}
Si $A\in$ \textit{Frm} y $j\in NA$, la cerradura idempotente de $cbd_j$, $cbd_j^{\infty}$, es el núcleo mas pequeño que colapsa a todos los intervalos $[a, b]$ en $A$ si $[j(a),j(b)]$ es booleano en $A_j$.
\end{lemma}

\begin{proof}
Como $cbd_j\in PA$, entonces $(cbd_j)^\infty\in$ es un nucleo.

\noindent
Sean $a,b\in A$ tales que $[j(a),j(b)]$ es booleano en $A_j$. Veamos que $((cbd_j)^\infty )(a)= ((cbd_j)^\infty )(b)$. Notemos $$b\leq j(b)\leq cbd^{A_j}(j(a))=cbd_j^A(a)\leq (cbd_j^A)^\infty (a)$$
Como $(cbd_j^A)^\infty\in NA$ entonces 
$$((cbd_j^A)^\infty )(b)\leq ((cbd_j^A)^\infty)((cbd_j^A)^\infty (a))= (cbd_j^A)^\infty (a).$$ 
Así, $cbd_j(b)\leq cbd_j(a)$.

\noindent
Para la otra desigualdad notemos que,
si $a\leq b$ entonces
\[
  ((cbd_j^A)^\infty )(a)\leq ((cbd_j^A)^\infty )(b)
.\]
Por lo tanto, $((cbd_j^A)^\infty )(a)= ((cbd_j^A)^\infty )(b)$.

\noindent
Ahora solo nos queda ver que $(cbd_j^A)^\infty$ es el menor núcleo que colapsa intervalos que son booleanos bajo $j$ en $A_j$. Supongamos que existe un operador $k\in NA$ tal que cumple la propiedad mencionada.

\noindent
Queremos ver que si $s\in A$, entonces $(cbd_j^A)(a)\leq k(a)$. Tomemos el intervalo $[a,cbd_j^A(a)]$ en $A$, entonces $[j(a),j(cbd_j^A(a))]$ es un intervalo en $A_j$. Notemos que $$j(cbd_j^A)(a))=cbd_j^A(a)=cbd^{A_j}(j(a)).$$ 
Así, $[j(a), j(cbd_j^A(a))]=[j(a),cbd^{A_j}(j(a))]$. Por lema \ref{Lema46} este es booleano.

\noindent
Como $k$ colapsa los intervalos de $A$ que son booleanos en $A_j$ bajo $j$, entonces $$k(cbd_j^A(a))=k(a)$$
de esta forma podemos ver que $$cbd_j^A(a)\leq k(a).$$ 
Así, $$cbd_j^A(a)\leq (cbd_j^A)^\infty\leq k(a).$$
Por lo tanto $(cbd_j^A)^\infty$ es el menor núcleo que cumple la propiedad mencionada.
\end{proof}

Si consideramos $j=id$ en el lema anterior obtenemos el siguiente corolario.

\begin{cor}
Para cualquier $A\in$\textit{Frm}, $(cbd^A)^\infty$ es el núcleo mas pequeño que colapsa a todos los intervalos booleanos de $A$.
\end{cor}

\begin{thm}
Sea $A\in$\textit{Frm}, entonces para cualesquiera $j\in NA$ y $a\in A$ $$cbd_j^A(a)=(w_{j(a)}\succ j)(a)$$
\end{thm}
Notemos que la implicación que se enuncia en el Teorema es en $NA$ que no se define como la evaluación puntual.

\begin{proof}
Sean $j\in NA$ y $a\in A$ y consideremos $b=cbd_j^A(a)$ y $k=(w_{j(a)}\succ j)$. Veamos que $b=k(a)$

\noindent
Para la desigualdad $b\leq k(a)$. Tomemos el núcleo $l=u_b\wedge v_{j(a)}$. Notemos que $$j(a)\leq (w_{j(a)}\succ j)(a)\Rightarrow a\leq j(a)\leq k(a).$$

\begin{description}
\item[Afirmación:] $l\leq k$.
\end{description}

Sea $x\in A$ y $y=(x\succ j(a))$, entonces

\begin{equation*}
\begin{split}
y\wedge w_{j(a)}(x) &=y\wedge ((x\succ j(a))\wedge j(a))\\
& =y\wedge(y\succ j(a))\\
& =y\wedge j(a)\leq j(a)
\end{split}
\end{equation*}
Entonces $$y\wedge w_{j(a)}(x)\wedge v_{j(a)}(x)\leq j(a)\wedge v_{j(a)}(x)=(j(a)\succ x)\wedge j(a)\leq x.$$
Luego
\begin{equation}\label{Eq1}
x\vee (y\wedge w_{j(a)}(x)\wedge v_{j(a)}(x))=(y\vee x)\wedge w_{j(a)}(x)\wedge v_{j(a)}(x)\leq x
\end{equation}
Recordemos que $((x\vee (x\succ j(a)))\succ j(a))=j(a)$ y además $j(a)\leq (x\succ j(a))\leq x\vee (x\succ j(a))$, es decir,
$$j(a)\lessdot (x\vee (x\succ j(a)))=x\vee y\leq j(x\vee y).$$
Luego $j(a)\lessdot j(x\vee y).$\\
Como $j(x\vee y)\in A_j$, entonces $b=cbd_j^A(a)=cbd^{A_j}(a)\leq j(x\vee y)$. Así,
\begin{equation*}
\begin{split}
b\vee x\leq j(x\vee y)\vee x=j(x\vee y) &\Rightarrow  \forall x\in A, x\vee b=u_b(x)\leq j(x\vee y).\\
& \Rightarrow u_b(x)\wedge v_{j(a)}(x)\wedge w_{j(a)}(x)\\
& \leq j(x\vee y)\wedge v_{j(a)}(x)\wedge w_{j(a)}(x)\\ 
& \leq j(x\vee y)\wedge j(v_{j(a)}(x))\wedge j(w_{j(a)}(x))\\
& =j((y\vee x)\wedge w_{j(a)}(x)\wedge v_{j(a)}(x))\leq j(x).
\end{split}
\end{equation*}
La última desigualdad la obtenemos de aplicar $j$ en \eqref{Eq1}.

Como $l=u_b\vee v_{j(a)}$ sustituyendo obtenemos que 
\begin{equation*}
\begin{split}
(l\wedge w_{j(a)})(x)\leq j(x) & \Rightarrow l\leq w_{j(a)}\succ j=k\\
& \Rightarrow l(j(a))\leq k(j(a)).
\end{split}
\end{equation*}
Notemos que 
\begin{equation*}
\begin{split}
l(j(a))=(u_b\wedge v_{j(a)})(j(a))& =(b\vee j(a))\wedge (j(a)\succ j(a))\\
& =b\vee j(a)=cbd_j^A(a)\vee j(a)\\
& =cbd_j^A(a)
\end{split}
\end{equation*}
y $j(a)\leq k(a)\leq k(k(a))=k(a)$. Por lo tanto $b\leq k(a)$.

Para la otra desigualdad. Sea $y\in A_j$ tal que $j(a)\lessdot y$, entonces $a\leq j(a)\leq y=j(y)$ y $w_{j(a)}(y)=((y\succ j(a))\succ j(a))=(j(a)\succ j(a))=1$.

Luego 
\begin{equation*}
\begin{split}
k(a)\leq k(y)=k(y)\wedge 1 & =k(y)\wedge w_{j(a)}(y)\\
& \leq (k\wedge w_{j(a)})(y)\\
& =((w_{j(a)}\succ j)\wedge w_{j(a)})(y)\\
& =(w_{j(a)}\wedge j)(y)\\
& \leq j(y)=y.
\end{split}
\end{equation*}
Así, $k(a)\leq y$, para cualquier $y\in A_j$ que cumpla $j(a)\lessdot y$. Entonces $k(a)\leq \bigwedge\{y\in A_j|j(a)\lessdot y\}=cbd_j^A(a)=b$.

\noindent
Por lo tanto $k(a)=b$.
\end{proof}

\begin{cor}
Sea $A\in$ \textit{Frm} para cualquier $j\in NA$, $cbd_j^A=tp\Leftrightarrow j=w_a$, donde $a=j(0)$.
\end{cor}

\begin{proof}
Sean $A\in$ \textit{Frm} y $j\in NA$. Sea $a=j(0)$. Como $j(j(0))=j(0)$, entonces $j\leq w_{j(0)}=w_a$. Por el teorema anterior $cbd_j^A(0)=(w_a\succ j)(0)$. De aquí que
\begin{equation*}
\begin{split}
cbd_j^A=tp & \Leftrightarrow 1=cbd_j^A(0)=(w_a\succ j)(0)\\
& \Leftrightarrow (w_a\succ j)=1\\ 
& \Leftrightarrow w_a\leq j\\
& \Leftrightarrow w_a=j.
\end{split}
\end{equation*}

\end{proof}

Notemos que para cada marco $A$ le asignamos su derivada $cbd^A$. Recordemos que $NA$ también es un marco, entonces de manera similar podemos asignarle su derivada $cbd^{NA}$. Esto mismo puede hacerse para cada $N^\alpha A$ del ensamble.

Para identificar las distintas derivadas en los primeros niveles
de la torre de ensambles, introducimos más notación.
Como notaremos mas adelante, existe una relación entre
ellas.
\begin{description}
\item[Notación:]
\end{description}
\begin{itemize}
\item La derivada en $A$: $$cbd_j^A:A\to A$$
$$cbd_j^A(a)=\bigwedge\{x\in A_j|j(a)\lessdot x\}$$
\item La derivada en $NA$:  $$Cbd_J^A=cbd_J^{NA}:NA\to NA$$
$$Cbd_J^A(k)=\bigwedge\{l\in NA_J|J(k)\lessdot l\}$$
\item La derivada en $N^2A$: $$CBD_\mathfrak{J}^A=Cbd_\mathfrak{J}^{NA}=cbd_\mathfrak{J}^{N^2A}:N^2A\to N^2A$$
$$CBD_\mathfrak{J}^A(K)=\bigwedge\{L\in N^2A_\mathfrak{J}|\mathfrak{J}(K)\lessdot L\}$$
\item La derivada en $N^3A$: $$\mathbb{CBD}_\mathfrak{j}^A=CBD_\mathfrak{j}^{NA}=Cbd_\mathfrak{j}^{N^2A}=cbd_\mathfrak{j}^{N^3A}:N^3A\to N^3A$$
$$\mathbb{CBD}_\mathfrak{j}^A(\mathfrak{K})=\bigwedge\{\mathfrak{L}\in N^3A_\mathfrak{j}|\mathfrak{j}(\mathfrak{K})\lessdot \mathfrak{L}\}$$
\end{itemize}

Siguiendo esta idea podemos construir la derivada para los distintos niveles de la torre de ensambles.

\begin{thm}\label{Teo24}
Sea $A\in$ \textit{Frm}, entonces $(cbd_j^A)^\infty=Cbd^A(j)$. Para cada $j\in NA$.
\end{thm}

\begin{proof}Veamos que $(cbd_j^A)^\infty\leq Cbd^A(j)$ y $Cbd^A(j)\leq (cbd_j^A)^\infty$.\\
Sean $j,k\in NA$ tales que $j\lessdot k$. Sea $x\in A$ y definimos $a=k(x)$, entonces $a\leq j(a)\leq k(a)=k(k(x))=k(x)=a$, es decir, $j(a)=k(a)=a$. Así, $$k\leq w_a\Rightarrow (w_a\succ j)\leq (k\succ j)=j$$ 
Por el teorema anterior $$cbd_j^A(a)=(w_a\succ j)(a)\leq j(a)=a \Rightarrow cbd_j^A(a)\leq a$$
Al ser $cbd_j^A$ un prenúcleo se cumple también $a\leq cbd_j^A(a)$. Por lo tanto, $cbd_j^A(a)=a$.

\noindent
Veamos por inducción sobre los ordinales que $a=cbd_j^\alpha(a)$. Si $\alpha=0$ obtenemos el caso anterior.\\
Tomemos $\alpha=\beta^{+}$ y supongamos que $cbd_j^\beta(a)=a$.
Entonces
\[
  cbd_j^\alpha (a)=cbd_j(cbd_j^\beta(a))=cbd_j(a)=a
.\]
Finalmente si $\alpha$ es ordinal límite y suponemos que para cualquier ordinal $\beta\leq \alpha$, $cbd_j^\beta(a)=a$ obtenemos que $$cbd_j^\alpha(a)=\bigvee \{cbd_j^\beta(a)|\beta\leq \alpha\}=a.$$
Como esta propiedad se cumple para cualquier ordinal, en particular se cumple para $cbd_j^\infty(a)=a$. Entonces $$cbd_j^\infty(x)=cbd_j^\infty(a)=a=k(x), \quad \forall x\in A$$
Así $cbd_j^\infty\leq k$, $\forall k\in NA$ tal que $j\lessdot k$ y por la definición de derivada obtenemos $cbd_j^\infty\leq Cbd(j)$.\\
Para la otra desigualdad. Sea $x\in A$ y consideremos $a=cbd_j^\infty(x)$. Entonces $$a\leq j(a)\leq cbd_j(a)=cbd_j(cbd_j^\infty(x))=cbd_j^\infty(x)=a$$
Así, $j(a)=a$h con ello $j\leq w_a$. Por el teorema anterior
\begin{equation*}
\begin{split}
a=cbd_j(a)=(w_{j(a)}\succ j)(a)=(w_a\succ j)(a) & \Rightarrow a=(w_a\succ j)(a)\\
& \Rightarrow (w_a\succ j)\leq w_a
\end{split}
\end{equation*}
y $j\leq (w_a\succ j)$. De esta forma 
$$(w_a\succ j)=(w_a\succ j)\wedge w_a=w_A\wedge j=j\Rightarrow j\lessdot w_a$$
Luego al evaluar ambos operadores en $x$ obtenemos $$Cbd(j)\leq w_a\Rightarrow Cbd(j)(x)\leq w_a(x)\leq w_A(a)=a=cbd_j^\infty(x), \quad\forall x\in A.$$ 
Por lo tanto $cbd_j^\infty=Cbd(j)$.

\end{proof}

\begin{lemma}
Sea $A\in$ \textit{Frm}, entonces 
$$Cbd(v_b\vee j\vee u_a)=v_b\vee Cbd(j)\vee u_a=v_b\circ Cbd(j)\circ u_a$$
para todo $a,b\in A$ y $j\in NA.$
\end{lemma}

\begin{proof}
    Recordemos que los supremos entre prenúcleos se relacionan con la composición. Con ello obtenemos la segunda igualdad. Para la otra mostremos que se cumplen las desigualdades 
    $$Cbd(v_b\vee j\vee u_a)\leq v_b\vee Cbd(j)\vee u_a\mbox{  y  }Cbd(v_b\vee j\vee u_a)\geq v_b\vee Cbd(j)\vee u_a.$$
    Notemos que $Cbd(v_b\vee j\vee u_a)\leq v_b\vee Cbd(j)\vee u_a$ ya que $u_a,v_b,Cbd(j)\leq Cbd(v_b\vee j\vee u_a)$, pues $Cbd$ infla y es monótona.
    
    \noindent
    Para la otra desigualdad como $Cbd$ es un prenúcleo obtenemos lo siguiente
    \begin{equation*}
        \begin{split}
            u_b\wedge v_a\wedge Cbd(v_b\vee j\vee u_a)& \leq Cbd(u_b \wedge v_a)\wedge Cbs(v_b\vee j\vee u_a)\\
            & =Cbd((u_b\vee v_a)\wedge (v_b\vee j\vee u_a))\\
            & =Cbd((u_b\wedge v_a\wedge v_b)\vee (u_b\wedge v_a\wedge j)\vee (u_b\wedge v_a\wedge u_a))\\
            & =Cbd(u_b\wedge j\wedge v_a)\leq Cbd(j).
        \end{split}
    \end{equation*}
    Entonces $u_b\wedge v_a\wedge Cbd(v_b\vee j\vee u_a)\leq Cbd(j)$. Haciendo supremos con $v_b$ y $u_a$ en ambos lados de la desigualdad obtenemos que
    \begin{equation*}
        \begin{split}
            v_b\vee Cbd(j)\vee u_a & \geq v_b\vee (u_b\wedge v_a\wedge Cbd(v_b\vee j\vee u_a))\vee u_a\\
            & =v_b\vee Cbd(v_b\vee j\vee u_a)\vee u_a\\
            & =Cbd(v_b\vee j\vee u_a).
        \end{split}
    \end{equation*}
    Así $Cbd(v_b\vee j\vee u_a)\leq v_b\vee Cbd(j)\vee u_a$. Por lo tanto obtenemos la igualdad buscada.
\end{proof}

Notemos que para cada nivel del ensamble, la derivada se denota de una forma diferente. En relación con el teorema anterior se obtiene la siguiente notación la cual se utiliza solo para simplificar la escritura. 

\begin{description}
\item[Notación:]
\end{description}
\begin{itemize}
\item \textbf{Nivel 0}: Se menciona en el teorema anterior.
\item \textbf{Nivel 1}: $NA\in$ \textit{Frm} $\Rightarrow$ $(cbd_j^{NA})^\infty=Cbd^{NA}(j)$ $\forall j\in N^2A$
\item \textbf{Nivel 2}: $N^2A\in$ \textit{Frm} $\Rightarrow$ $(cbd_j^{N^2A})^\infty=Cbd^{N^2A}(j)$ $\forall j\in N^3A$
\item \textbf{Nivel 3}: $N^3A\in$ \textit{Frm} $\Rightarrow$ $(cbd_j^{N^3A})^\infty=Cbd^{N^3A}(j)$ $\forall j\in N^4A$
\item $\ldots$
\end{itemize}

Si tomamos $j=id$ 
\begin{itemize}
\item \textbf{Nivel 0}: $(cbd^A)^\infty=Cbd^A(id)$.
\item \textbf{Nivel 1}: $NA\in$ \textit{Frm} $\Rightarrow$ $(cbd^{NA})^\infty=Cbd^{NA}(id)$, $id\in N^2A$
\item \textbf{Nivel 2}: $N^2A\in$ \textit{Frm} $\Rightarrow$ $(cbd^{N^2A})^\infty=Cbd^{N^2A}(id)$, $id\in N^3A$
\item \textbf{Nivel 3}: $N^3A\in$ \textit{Frm} $\Rightarrow$ $(cbd^{N^3A})^\infty=Cbd^{N^3A}(id)$,  $id\in N^4A$
\item $\ldots$
\end{itemize}

La notación que usaremos para la identidad y la constante uno para los distintos niveles de la torre es la siguiente $$id, tp\in NA,\quad Id,Tp\in N^2A,\quad ID, TP\in N^3A.$$
También se introduce nueva notación para facilitara la escritura de las derivadas en los distintos niveles y la relación que hay entre ellas según el teorema \ref{Teo24}.
\begin{itemize}
\item \textbf{$NA:$}\\
$\delta=Cbd(id)=cbd^\infty$\\
$\theta=CBD(Id)(id)=Cbd^\infty(id)$\\
$\xi =\mathbb{CBD}(ID)(Id)(id)=CBD^\infty(Id)(id)$

\item \textbf{$N^2A:$}\\
$\Delta =CBD(Id)=Cbd^\infty$\\
$\Theta =\mathbb{CBD}(ID)(Id)=CBD^\infty(Id)$\\
$\Xi =\mathbb{CBD}^\infty(ID)(Id)$

\item \textbf{$N^3A:$}\\
$\Delta=\mathbb{CBD}(ID)=CBD^\infty$\\
$\Theta=\mathbb{CBD}^\infty(ID)$\\
$\Xi=\ldots$
\end{itemize}

\begin{thm}
Para $A\in$\textit{Frm}
\begin{enumerate}
\item $A$ es booleano $\Leftrightarrow cbd(0)=1$
\item $NA$ es booleano $\Leftrightarrow \delta=tp\Leftrightarrow\delta(0)=1$
\item $N^2A$ es booleano $\Leftrightarrow \theta=tp\Leftrightarrow\theta(0)=1$
\item $N^3A$ es booleano $\Leftrightarrow \xi=tp\Leftrightarrow\xi(0)=1$
\item $\ldots$
\end{enumerate}
\end{thm}

\begin{proof}
\begin{itemize}
\item[1.] Si $A$ es booleano, por el lema \ref{Lema46} $[0,cbd(0)]$ es el intervalo más grande por arriba de 0 que es booleano, pero el intervalo más grande es $[0,1]$. De aqui que $cbd(0)=1$. Si $cbd(0)=1$, entonces  $[0,cbd(0)]$ es el intervalo booleano mas grande por arriba del 0, pero el intervalo es $[0,1]=A$.
\item[2.] $\delta=Cbd(id)$, por el lema \ref{Lema46}, $0=id\in NA$, entonces $[id, Cbd(id)]$ es el intervalo más grande por arriba de $id$ que es booleano, pero el intervalo booleano más grande por arriba de $id$ es $[id, tp]$ $\Leftrightarrow$ $\delta=Cbd(id)=tp$, pero eso solo ocurre si y sólo si $Cbd(id)(0)=Cbd(0)=1$ $\Leftrightarrow$ $\delta(0)=1.$
\item[3.] $N^2A$ es booleano $\Leftrightarrow$ por el lema \ref{Lema46} $[Id, \theta(id)]$ es el intervalo más grande por arriba de $Id$ que es booleano $\Leftrightarrow$ $\theta(id)=Tp$ $\Leftrightarrow$ $\theta=tp$.
\item[4.] Para este inciso se usa el mismo argumento, pero para $N^3A$, pues $\xi=\mathbb{CBD}(ID)(Id)(id)$ y $\xi=tp\Leftrightarrow \mathbb{CBD}(ID)(Id)(id)=Tp\Leftrightarrow \mathbb{CBD}(ID)=TP$.
\end{itemize}
\end{proof}

\begin{thm}
Para $A\in$ \textit{Frm} y $j\in NA$ son equivalentes las siguientes condiciones:
\begin{enumerate}
\item $cbd_j=j$
\item $Cbd(j)=j$
\item $\Delta(j)=j$.
\end{enumerate}
\end{thm}

\begin{cor}
Para $A\in$ \textit{Frm} son equivalentes las siguientes condiciones:
\begin{enumerate}
\item $cbd=id$
\item $\delta=id$
\item $\theta=id$.
\end{enumerate}
\end{cor}

\section{El caso espacial}
El contexto original en que se definió la derivada de
Cantor-Bendixson fue para espacios topológicos.
Veremos cómo se relaciona esta construcción con la construcción
de arriba.

\begin{defn}
Si $S$ es un espacio topológico y $Y, X\subseteq S$ subconjuntos cerrados del espacio. Decimos que $Y$ es una parte no esencial de $X$, denotado por $Y\sqsubset X$ si 
$$Y\subseteq X \quad\mbox{ y }\quad X=(X-Y)^-.$$ 
Además para cualquier $X\subseteq S$ cerrado, $X\in CS$
$$lim_S(X)=\left(\bigcup\{Y\in CS|Y\sqsubset X\}\right)^-$$
\end{defn}

\noindent
Recordemos que $OS$ es un marco y la implicación en $OS$ esta dada por $$(V\succ U)=(V'\cup U)^\circ$$ 
y la negación $$\neg U=U^-\mbox{'}$$ para cualesquiera $U,V\in OS$.

\noindent
Además los ínfimos arbitrarios se calculan de la siguiente forma: $\bigvee U=\left(\bigcap U\right)^\circ$.

\begin{lemma}\label{Lema50}
Para cualquier espacio topológico $S$ se cumple $$Y\sqsubset X\Leftrightarrow X'\lessdot Y',\mbox\quad U\lessdot V\Leftrightarrow V'\sqsubset U',$$
donde $X, Y\in CS$ y $U, V\in OS$. Además se cumple que $$lim_S(X)'=cbd^{OS}(X'),\quad cbd^{OS}(U)'=lim_S(U').$$
\end{lemma}

\begin{proof}
Sean $X, Y\in CS$. Tenemos que $$X'\lessdot Y'\Leftrightarrow (Y'\succ X')=X'\Leftrightarrow (Y'\cup X)^\circ=X'.$$
Luego $(Y'\cup X)^\circ=(Y'\cap X)'^\circ =(Y'\cap X)^-$ $'$. Así. $$X\lessdot Y'\Leftrightarrow X'=(Y'\cap X)^-\mbox{'}\Leftrightarrow X=(Y'\cap X)^-\Leftrightarrow Y\sqsubset X.$$
Para la otra equivalencia basta con cambiar $X'$ y $Y'$ por $U$ y $V$ respectivamente.

Ahora sea $X\in CS$, entonces $$cbd(X')=\left(\bigcap\{V\in OS| X'\lessdot V\}\right)^\circ=\left(\bigcap\{V\in OS|V'\sqsubset X\}\right)^\circ.$$
Luego 
\begin{equation*}
\begin{split}
cbd(X')' &=\left(\bigcap\{V\in OS| X'\lessdot X\}\right)^\circ \mbox{'}\\
& =\left(\bigcup\{V\in OS|V'\sqsubset X\}\right)'^-\\
& =\left(\bigcup\{V'\in OS|V'\sqsubset X\}\right)^-\\
& =\left(\bigcup\{V\in CS|V'\sqsubset X\}\right)^-\\
& =lim_S(X).
\end{split}
\end{equation*}
Para la otra igualdad basta con cambiar $X'$ por $U$.
\end{proof}

Ahora tenemos un lema dual al lema \ref{Lema46} que nos da información sobre el espacio topológico. Para este lema solo hay que recordar que los puntos límite de un subconjunto $X\subseteq CS$ con $S$ espacio topológico, son aquellos puntos que no son aislados en $X$. Un punto aislado de $X$, $p\in X$, es aquel para el cual existe un abierto $U\in OS$ tal que $X\cap U=\{p\}$.

\begin{lemma}\label{Lema51}
Sea $S$ un espacio topológico $T_0$. Para cualquier $X\in CS$ el conjunto $lim_S(X)\subseteq X$ es el conjunto de puntos limite de $X$.
\end{lemma}

Por la dualidad que se tiene entre $cbd$ y $lim$, podemos traducir un problema de marcos a el espacio topológico correspondiente o viceversa. En particular ocupando los lemas \ref{Lema46}, \ref{Lema50} y \ref{Lema51} podemos concluir que 
\begin{equation*}
\begin{split}
\mathcal{O}\mbox{S es booleano } & \Leftrightarrow cbd^{\mathcal{O}S}(\emptyset)=S\\
& \Leftrightarrow lim_S(S)=\emptyset\\
& \Leftrightarrow S \mbox{ no tiene puntos aislados}.
\end{split}
\end{equation*}

\begin{exa}
\begin{enumerate}
\item El operador cerradura para $cbd$, $cbd^\infty$, puede ser tan grande como queramos.

\item Sea $\Gamma$ un ordinal lo suficientemente grande. Entonces tenemos el marco $\Gamma^+$ pero ahora nos tomamos el orden inverso de tal forma que que $\Gamma$ es el cero del marco y $0=\emptyset$ es el uno del marco. Ahora los supremos serían los mínimos o la intersección y los infimos la unión.\\
Notemos que para $\alpha\neq 0$, $cbd(\alpha)=\alpha$ si y sólo si $\alpha$ es un ordinal límite 
$$\bigwedge\{\kappa\leq\Gamma|\alpha\lessdot \kappa\}=cbd(\alpha)=\alpha$$
$$\Rightarrow \bigcup\{\kappa\leq \Gamma|\alpha\lessdot \kappa\}=\{\kappa\leq \Gamma|\alpha>\kappa\mbox{  y  }(\kappa\succ \alpha)=\alpha\}=\alpha$$
pues observemos que para cualquier $\kappa$,
$$(\kappa\succ \alpha)=\bigcap\{\beta\leq \Gamma|\beta\cup\kappa\leq \alpha\}$$
entonces $(\kappa\succ \alpha)=\alpha\Leftrightarrow \kappa<\alpha$.\\
Sólo los límites y el cero son puntos fijos de $cbd$.
Entonces, al obtener $Cbd(id)=cbd^\infty=\delta$, nos quedará que $\Gamma_\delta$ es el conjunto de ordinales límite menores o iguales que $\Gamma$. Si seguimos iterando $Cbd$ tendríamos que 

$$Cbd(id)\mbox{  nos da a los ordinales límites}.$$
$$Cbd^2(id)\mbox{  nos da a los ordinales límites de los límites}.$$
$$\ldots$$
 
\item Considera el intervalo $[0,1]$ en los reales con el orden usual. Entonces $[0,1]$ es un marco linealmente ordenado donde los supremos e ínfimos se calculan como siempre. Notemos que aquí $cbd=id$ pues 
$$cbd(a)=\bigwedge\{0\leq b\leq 1|a\lessdot b\}=\bigwedge\{0\leq b\leq 1|a\leq b\mbox{  y  }b\succ a=a\}, $$
pero $(b\succ a)=a\Leftrightarrow a<b$. Entonces $cbd(a)=\bigwedge\{0\leq b\leq a\mbox{  y  }a<b\}=a$. Así, $cbd=id\Rightarrow cbd^\infty=id$, por el corolario 3 $\theta=id$. 

\end{enumerate}
\end{exa}

\chapter{Existencia de productos y coproductos}
%\section*{SESIÓN 20: 23 NOV (Expo Armando 1)}
\section{Productos de marcos}

\begin{thm}[Producto de marcos]
    Sea $\{A_\lambda\}_{\lambda\in\mathscr{I}}$ de marcos arbitraria
    y sea $L$ el producto cartesiano de los $A_\lambda$
    (vistos como conjuntos).
    Entonces $L$, dotado con los operadores puntuales $\inf,\Sup$,
    es un marco y, equipado con las proyecciones canónicas
    \begin{align*}
        p_\lambda: L&\to A_\lambda \\
        a &\mapsto p_\lambda(a)=a_\lambda
    \end{align*}
    satisface la propiedad universal del producto de los $A_\lambda$.
\end{thm}

\begin{lemma}
    $(L,\leq,\wedge, 0, \bigvee, 1)$, con
    $0:=(0_\lambda)_{\lambda\in\scr{I}}$ y
    $1:=(1_\lambda)_{\lambda\in\scr{I}}$ es un marco.
\end{lemma}
\begin{proof}
    $\leq$ es orden parcial ya que:
    \begin{align*}
        x \leq x
            & \iff x_\lambda \leq x_\lambda \forall \lambda\in\scr I. \\
        x \leq y, y \leq x
            &\implies x_\lambda \leq y_\lambda,
            y_\lambda \leq x_\lambda, \forall  \lambda\in\scr{I}\\
            &\implies x_\lambda = y_\lambda
            \forall\lambda\in\scr{I}\\
            &\implies x = y.\\
        x \leq y, y \leq z
            &\implies x_\lambda \leq y_\lambda,
            y_\lambda \leq z_\lambda
            \forall\lambda\in\scr{I}\\
            &\implies x_\lambda  \leq z_\lambda
            \forall  \lambda\in\scr{I}\\
            &\implies x \leq z.
    \end{align*}
\end{proof}
Para $x,y\in A$, ya que $x_\lambda\wedge_\lambda y_\lambda\in A_\lambda$ para todo $\lambda\in\mathscr{I}$, entonces $x\wedge_\mathscr{I}y\in A$.\\
Luego, ya que $0_\lambda\leq_\lambda x_\lambda$ para todo $x_\lambda\in A_\lambda$ y para cada $\lambda\in\mathscr{I}$, entonces $0_\mathscr{I}\leq_\mathscr{I}x$ para todo $x\in A$.\\
Similarmente, para $X\subseteq A$ arbitrario, consideramos los subconjuntos $X_\lambda\subseteq A_\lambda$ formados por los $x_\lambda$ componentes, y tomamos $\bigvee X_\lambda=:s_\lambda\in A_\lambda$,  para cada $\lambda\in\mathscr{I}$.\\
Entonces $\bigvee_\mathscr{I}X=(s_\lambda)_{\lambda\in\mathscr{I}}\in A$.\\
Además, como $1_\lambda\geq_\lambda x_\lambda$ para todo $x_\lambda\in A_\lambda$, para cada $\lambda\in\mathscr{I}$, entonces $1_\mathscr{I}\geq_\mathscr{I} x\ \forall x\in A$.
Por útlimo, se cumple que:
\begin{align*}
    a\wedge_\mathscr{I}\left(\bigvee_\mathscr{I} X\right) & = (a_\lambda\wedge_\lambda s_\lambda)_{\lambda\in\mathscr{I}}\\
    & = \left(\bigvee_\lambda\{a_\lambda\wedge_\lambda x_\lambda\mid x_\lambda\in X_\lambda\}\right)_{\lambda\in\mathscr{I}}\\
    & = \bigvee_\mathscr{I} \{a\wedge_\mathscr{I}x\mid x\in X\}
\end{align*}
Y con esto, se cumple que $A$ es un marco.
    Para cada $\lambda\in\mathscr{I}$, se define $p^*_\lambda:A\to A_\lambda$ la proyección de $A$ sobre el respectivo componente $A_\lambda$, nótese el siguiente resultado:
    \begin{lemma}
        $p^*_\lambda$ es morfismo de marcos, para cada $\lambda\in\mathscr{I}$.
    \end{lemma}
        \begin{proof}
            \begin{align*}
                x\leq y & \Longleftrightarrow x_\lambda\leq y_\lambda \ \forall\lambda\in\mathscr{I}\\
                & \Rightarrow p^*_\lambda(x)\leq p^*_\lambda(y)\ \forall\lambda\in\mathscr{I} 
            \end{align*}
            Además se cumple que $p^*_\lambda(1_\mathscr{I})=1_\lambda$ y $p^*_\lambda(0_\mathscr{I})$.\\
            Finalmente:
            \begin{align*}
                p^*_\lambda(x\wedge y) & = p^*_\lambda[(x_\mu\wedge y_\mu)_{\mu\in\mathscr{I}}]\\
                & = x_\lambda\wedge y_\lambda\\
                & = p^*_\lambda(x)\wedge p^*_\lambda(y).
            \end{align*}
        \end{proof}
\begin{align*}
    p^*_\lambda(\bigvee X) & = p^*_\lambda[(s_\mu)_{\mu\in\mathscr{I}}] \\
                           & = s_\lambda \\
                           & = \bigvee X_\lambda \\
                           & = \bigvee p^*_\lambda[X].
\end{align*}
\begin{proof}
    Sea $B\in\Frm$, y considere una familia arbitraria de morfismos:
    \begin{equation*}
        \{r^*_\lambda:B\to A_\lambda\mid\lambda\in\mathscr{I}\}.
    \end{equation*}
    Definimos $p^*:B\to A$, de manera que, para $b\in B$:
    \begin{equation*}
        p^*(b) = (r^*_\lambda(b))_{\lambda\in\mathscr{I}}.
    \end{equation*}
\end{proof}
Se sigue que $p^*$ es morfismo de marcos, ya que la familia de $r^*_\lambda$ son morfismos de marcos, y por la construcción de los operadores de $A$.\\
Luego, para todo $b\in B$ y todo $\lambda\in\mathscr{I}$, se cumple que:
\begin{equation*}
    (p^*_\lambda\circ p^*)(b) = p^*_\lambda[(r_\mu(b))_{\mu\in\mathscr{I}}] = r_\lambda(b),
\end{equation*}
y nótese que $p^*$ es único por construcción. Así, se concluye que $A$ satisface la propiedad universal del producto en $\Frm$.

\section{Sitios}

Ya probamos que la categoría de marcos tiene productos.
Para probar que también tiene coproductos,
usaremos una técnica distinta, para la cual necesitamos
algunos resultados concernientes a sitios.

\begin{defn}
    Sea $A$ una semíretícula inferior.
    Una función $C:A\to\mathcal{P}[\mathcal{P(A)}]$
    es una \textit{cobertura} o \textit{función de cubiertas}
    sobre $A$ si,
    para cualesquiera $a,b\in A$, se cumple que:
    \begin{enumerate}
        \item $S\in C(a) \implies S\subseteq\down(a)$
        \item $S\in C(a), b\leq a \implies \{b\wedge s\mid s\in S\}\in C(b)$.
    \end{enumerate}
    Al par $(A,C)$ se le llama sitio.
\end{defn}
\begin{defn}[$C$-ideales]
    Dado un sitio $(A,C)$, un subconjunto
    $I\subset A$ es un $C$-ideal de $A$ si
    \begin{enumerate}
        \item $I\in\mathcal{L}(A)$
        \item Siempre que $a\in A$ y $S\in C(a)$, entonces
        $S\subseteq I\Rightarrow a\in I$.
    \end{enumerate}
    Al conjunto de todos los $C$-ideales del sitio $(A,C)$
    se le denota por $C\Idl$.
\end{defn}
\begin{exa}[Ejemplos de sitios]
    Sea $A$ una $\inf$-retícula.
    Consideremos las funciones cubrientes 
    $C_\emptyset$ y $C_T$ definidas como:
    \begin{align*}
        C_\emptyset(a) &= \emptyset \\
        C_T(a) &= \{\emptyset\}
    \end{align*}
    para todo $a\in A$.
    \begin{itemize}
        \item
        En el primer caso,
        ninguna famila cubre a ningún elemento.
        Entonces, por vacuidad,
        toda sección inferior $F\subseteq A$ es
        un $C_\emptyset$-ideal.
        Es decir, $C_\emptyset\Idl(A)=\cal L(A)$.
        \item
        En el segundo caso,
        la familia vacía cubre a todos los elementos,
        así que el único $C_T$-ideal $F\subseteq A$
        es la sección total $F=A$.
        Es decir, $C_T\Idl(A)=\{A\}$.
    \end{itemize}
\end{exa}

\begin{exa}[Más ejemplos de sitios]
    Sea $A$ un marco y consideremos las funciones cubrientes
    $C_\sup$ y $C_{\Sup}$ definidas como
    \begin{align*}
        X\in C_\sup(a)
        &\ssi
        \text{$X$ es finito y } a=\Sup X \\
        X\in C_{\Sup}(a)
        &\ssi
        a=\Sup X 
    \end{align*}
    para todo $a\in A$ y todo $X\subseteq A$.
    Entonces
    \begin{itemize}
        \item
        una sección inferior $F\subseteq A$ es un
        $C_\sup$-ideal si, y solo si es cerrada bajo supremos
        finitos.
        Por lo tanto, los $C_\sup$-ideales de $A$
        son los ideales de $A$ en el sentido de retículas
        distributivas:
        \[
            C_\sup\Idl(A) = \cal I A.
        \]
        \item
        una sección inferior $F\subseteq A$ es un
        $C_{\Sup}$-ideal si, y solo si es cerrada bajo supremos
        arbitrarios.
    \end{itemize}
\end{exa}

\begin{defn}[Marcos generado por un sitio]
    Sea $(A,C)$ un sitio.
    Decimos que un marco $B$ es generado por $(A,C)$
    si existe un morfismo de semiretículas inferiores
    $f:A\to B$ tal que, para todo $a\in A$, se cumple
    que $f$ manda $C$-cubiertas en $A$ a $C_{\Sup}$-cubiertas
    de $B$:
    \begin{equation*}
        S\in C(a) \implies f(a) = \Sup\{f(s)\mid s\in S\}
    \end{equation*}
    y $f$ es universal con respecto a esta propiedad.
    Explícitamente, la universalidad significa que,
    si $B'$ es un marco y $f':A\to B'$ es un morfismo
    de $\inf$-semiretículas
    que convierte cubiertas en supremos,
    entonces existe un único morfismo de marcos
    $\ol{f}:B\to B'$ tal que el siguiente diagrama conmuta:
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            \& B \arrow[dd, "\exists!\overline{f}", dashed] \\
            A \arrow[ru, "f"] \arrow[rd, "f'"'] \& \\
            \& B'                                          
        \end{tikzcd}
    \]
    Por el argumento usual, entre cualesquiera dos
    marcos generados por $(A,C)$ existe un único isomorfismo,
    de modo que podemos hablar de \emph{el} marco generado
    por $(A,C)$.
\end{defn}

\begin{thm}[$C\Idl$ es un marco]
    Sea $(A,C)$ un cubriente, entonces, su conjunto de $C$-ideales $C\Idl$ es un marco con la contención, y es generado por $(A,C)$.
\end{thm}

Recordemos que $\mathcal{L}A$ es un marco bajo la contención
y que, si $B$ es un marco y $\nu\in NA$ es cualquier núcleo,
entonces $\nu[A]=A_\nu$ es marco con el orden heredado de $A$.

\begin{lemma}[Previo]
    La intersección arbitraria de $C-$ideales es un $C-$ideal.
\end{lemma}
\begin{proof}
    Sean $\{I_\alpha\}_{\alpha\in\Gamma}$ una familia arbitraria de $C-$ideales, y $I=\bigcap_{\alpha\in\Gamma}I_\alpha$ su intersección. Primero, sean $x\leq y\ \in A$ arbitrarios, con $y\in I$. Entonces $y\in I_\alpha\forall\alpha\in\Gamma$, y así, como cada $I_\alpha$ es sección inferior, entonces $x\in I_\alpha\forall\alpha\in\Gamma$, y esto implica que $x\in I$. Por tanto, cómo $x,y$ son arbitrarios, se cumple que $I$ es sección inferior de $A$.\\
    Ahora, sean $a\in A, S\in C(a)$ arbitrarios, y supongáse que $S\subseteq I$, entonces, se cumple que $S\subset I_\alpha$ para todo $\alpha\in\Gamma$. Por tanto, ya que cada $I_\alpha$ es $C-$ideal, se sigue que $a\in I_\alpha\ \forall\alpha\in\Gamma$, y se sigue que $a\in I$.\\
    Con esto, concluimos que $I$ es un $C-$ideal.
\end{proof}

\begin{lemma}[Parte 1]
    Existe un núcleo $j:\cal LA\to\cal LA$ tal que
    $C\Idl=(\cal LA)_j$, de modo que $C\Idl$ es un cociente
    de $\cal LA$.
    En particular, $C\Idl$ es un marco.
\end{lemma}
\begin{proof}
    Considere el marco de secciones inferiores de $A$, $\mathcal{L}A$, y considere la función $j:\mathcal{L}A\to\mathcal{L}A$ tal que
    \begin{equation*}
        j(S)=\bigcap\{I\in C\Idl\mid S\subseteq I\}\quad S\in\mathcal{L}A.
    \end{equation*}
    Primero, para cualquier $S\in\mathcal{L}A$, por la definición de $j$, se tiene que $S\subseteq j(S)$, por tanto $j$ infla. Luego, por el lema anterior, se tiene que $j(S)$ es $C-$ideal, y cómo $j(S)\subseteq j(S)$ trivialmente, y $j(j(S))$ debe ser el menor $C-$ideal que contiene a $j(S)$, obtenemos que $j(j(S))=j(S)$, i.e. $j$ es idempotente.
    
    Ahora, sean $R,T\in\mathcal{L}A, I:=j(R\cap T)$. Por definición de $j$, se tiene que $R\subseteq j(R)$ y $T\subseteq j(T)$, entonces $R\cap T\subseteq j(R)\cap j(T)$, y cómo $j$ es idempotente, se sigue que $j(R\cap T)\subseteq j(R)\cap j(T)$.\\
    Defináse ahora el conjunto
    \begin{equation*}
        R' := \{d\in A\mid \forall t\in T,d\wedge t\in I\}.
    \end{equation*}
    Por la definición de $I$ y ya que $j$ infla, se cumple que $R\subseteq R'$, $T\cap R'\subset I$. Por otro lado, cómo $I\in\mathcal{L}(A)$, obtenemos que $R'\in\mathcal{L}(A)$. Luego, consideremos $U\in C(A)$ tal que $U\subseteq R'$, entonces, para todo $t\in T$, se cumple que $\{u\wedge t\mid u\in U\}\subseteq I$, y además, utilizando la propiedad $(ii)$ de $C$, se cumple que $\{u\wedge t\mid u\in U\}\in C(a\wedge t)$ , y en consecuencia $a\wedge t\in I$, ya que $I$ es $C-$ideal. Luego, cómo $t\in T$ es arbitrario, tenemos que $a\in R'$ y por tanto $R'$ es un $C-$ideal.
    
    Análogamente, se construye el $C-$ideal
    \begin{equation*}
         T' := \{e\in A\mid \forall r\in R',e\wedge r\in I\},
    \end{equation*}
    y se cumple que $T\subseteq T'$, $T'\cap R\subseteq I$ y $T'$ es $C-$ideal. Así, se sigue que $j(R)\subseteq R',j(T)\subseteq T'$ y por tanto
    \begin{equation*}
        j(R)\cap j(T)\subseteq R'\cap T' \subseteq  I = j(R\cap T)
    \end{equation*}
    y en conclusion, $j$ es núcleo cuyo conjunto de puntos fijos
    es $C\Idl$.
\end{proof}

%\section*{SESIÓN 21: 25 NOV (Expo Armando 2, Yareli, Dante, Alfredo)}

\begin{lemma}[Parte 2]
    La función $f:A\to C\Idl$ definida como
    \begin{equation*}
        f(a)=j(\down(a))
    \end{equation*}
    es un morfismo de $\inf$-semiretículas que
    manda $C$-cubiertas en supremos de $C\Idl$.
    Más aún, $f$ es universal con respecto a esta propiedad,
    de modo que $C\Idl$ es el marco generado por $(A,C)$.
\end{lemma}

\begin{proof}
    Cómo $j$ es núcleo y $\down$ es morfismo
    de $\inf$-semiretículas,
    se cumple que $f$ es morfismo de $\inf-$retículas.
    Sean $a\in A,S\in C(a)$ arbitrarios. Entonces, cómo $j(\bigcup\{j(\down(s))\mid s\in S\})=:\mathcal{J}$ es un $C-$ideal que contiene a $S$, se sigue que $a\in\mathcal{J}$, luego 
    \begin{equation*}
        j(\down(a))\subseteq \mathcal{J}.
    \end{equation*}
    Por otro lado, se tiene $a\geq s$ para todo $s\in S$, por lo cuál $j(\down(a))\supseteq j(\down(s))$. Luego, se sigue que
    \begin{equation*}
        j(\down(a))\supseteq \bigcup\{j(\down(s))\mid s\in S\}
    \end{equation*}
    y con esto, cómo $j$ es mónotona e idempotente, obtenemos que
    \begin{equation*}
        f(a)\supseteq\mathcal{J}.
    \end{equation*}

    Por otra parte, sean $B\in\Frm$, $g:A\to B$ un morfismo de $\wedge-$semiretículas que convierte cubiertas de $C$ en supremos. Entonces, la función 
    \begin{align*}
        \overline{g}: &\mathcal{L}A\to B \\
                      & S\to \bigvee_B\{g(s)\mid s\in S\}
    \end{align*}
    es el único morfismo de marcos que factoriza a $g$ a tráves del marco libre de $A$, $\mathcal{L}A$, y además existe su adjunto derecho $g_*:B\to\mathcal{L}A$, que, por definición del adjunto derecho, para $b\in B:$

    \begin{align*}
        g_*(b) & = \bigcup\{L\in\mathcal{L}A\mid\overline{g}(L)\leq b\} \\
               & = \bigcup\left\{L\in\mathcal{L}A\mid \bigvee_B\{g(a)\mid a\in L\}\leq b\right\} \\
               & = \bigcup\{L\in\mathcal{L}A\mid g(a)\leq b (\forall a \in L)\} \\
               & = \{a\in A\mid g(a)\leq b\} 
    \end{align*}

    Y nótese que, si $S\in C(a)$ y $S\subseteq g_*(b)$, entonces se cumple que
    \begin{equation*}
        g(a)= \bigvee_B\{g(s)\mid s\in S\}\leq b
    \end{equation*}
    y esto implica que $a\in g_*(b)$, por tanto $g_*(b)$ es un $C-$ideal. 

    Sea $a\in A$ arbitrario. Cómo $\overline{g}$ y $g_*$ son adjuntos, se tiene que
    \begin{equation*}
        (\overline{g}\circ g_*)(g(a))\leq g(a).
    \end{equation*}
    Además, cómo $g_*(g(a))$ es un $C-$ideal que contiene a $\down(a)$, tenemos que $$f(a)=j(\down(a))\subseteq g_*(g(a))$$, y en consecuencia, se cumple la cadena de desigualdades:
    \begin{equation*}
        g(a)\leq\overline{g}(f(a))\leq(\overline{g}\circ g_*)(g(a))\leq g(a)
    \end{equation*}

    Es decir, que $(\overline{g}\circ f)(a)=g(a)$
    con $a$ arbitrario,
    por tanto $\overline{g}\circ f = g$,
    con $\overline{g}$ único, así que $f$ es universal.
\end{proof}

\section{Coproductos de marcos}

Ya probamos que la categoría de marcos tiene productos.
Ahora queremos demostrar el siguiente teorema.

\begin{thm}
Para una familia de marcos $\{A_\lambda\}_{\lambda\in\scr I}$,
existe el coproducto
\[\coprod_{\lambda\in\scr I} A_\lambda.\]
\end{thm}

Construiremos el coproducto como sigue:
Tomaremos el coproducto $A$ de la familia
en la categoría $\Pos^{\inf}$ de $\inf$-semiretículas.
Le daremos a $A$ una estructura de sitio, equipándole una
cobertura $C$.
Finalmente, veremos que el marco $C\Idl$ generado por $(A,C)$
viene equipado con morfismos que lo convierten en el coproducto
de nuestra familia en la categoría de marcos.

\begin{lemma}
    Consideremos el conjunto
    \[
    A=
    \left\{ a\in\prod_{\lambda\in\scr I} A_\lambda
    \mid a_\lambda\neq 1_{A_\lambda}
    \text{ para una cantidad finita de índices} \right\}.
    \]
    Notemos que $A$ es una subsemiretícula inferior del producto,
    ya que $1\in A$ y, si $a,b\in A$, entonces
    $c=a\inf b\in \prod_{\lambda\in\scr I} A_\lambda$
    satisface
    \[c_\lambda=
    \begin{cases}
        1_\lambda, & \textit{si }a_\lambda=b_\lambda=1_\lambda\\
        a_\lambda\wedge b_\lambda, & \textit{ en otro caso}
    \end{cases}
    \]
    Como hay una cantidad finita de
    $a_\lambda\neq 1_\lambda$ y $b_\lambda\neq 1_\lambda$,
    entonces los $a_\lambda\wedge b_\lambda$ son finitos,
    por lo que $c\in A$.
    
    Definimos las funciones
    $q_\lambda\colon A_\lambda\to A$,
    para cada $\lambda\in \scr I$, dadas por 
    \[q_\lambda(x)=a,\]
    donde $a_\lambda=x$ y $a_\mu =1_{\mu}$
    para $\mu\in \scr I\setminus \{\lambda\}$.
    
    Claramente, $q_\lambda$ es monótona y $q_\lambda(1_\lambda)=1$.
    Además, si $x,y\in A_\lambda$, entonces
    $q_\lambda(x\wedge y)=q_\lambda(x)\wedge q_\lambda(y)$,
    ya que las operaciones son puntuales.
    Así, cada $q_\lambda$ es un morfismo de semiretículas
    inferiores.
    
    Afirmamos que $A$, junto con sus funciones
    \[
        q_\lambda:A_\lambda\to A
    \]
    es el coproducto de la familia
    $\{A_\lambda\}_{\lambda\in\scr I}$
    en la categoría de $\inf$-semiretículas.
\end{lemma}
\begin{proof}
    Para este resultado, los $\{A_\lambda\}_{\lambda\in\scr I}$
    solo necesitan ser $\inf$-semiretículas.
    Sean $B$ una $\inf$-semiretícula y
    $r_\lambda:A_\lambda\to B$ una familia de morfismos
    indicada por $\lambda\in\scr I$.
    Definimos $R:A\to B$ como
    \[
        R(a) = \Inf\{r_\lambda(a_\lambda) \mid \lambda \in \scr I\}
    .\]
    Este ínfimo existe en $B$, ya que todo $a\in A$ tiene soporte
    finito.
    Claramente, $R$ preserva ínfimos y hace conmutar el diagrama
    \[
        \begin{tikzcd}
            A_\lambda \ar[r,"r_\lambda"] \ar[d,"q_\lambda"']
            & B \\
            A \ar[ur,"R"']
        \end{tikzcd}
    \]
    para todo $\lambda\in \scr I$.
    Finalmente, si $R':A\to B$ es cualquier morfismo
    que hace conmutar el diagrama, tenemos
    \begin{align*}
        R'(a)
        &= R'(\Inf\{q_\lambda(a_\lambda)\mid a\in \scr I\}) \\
        &= (\Inf\{R'(q_\lambda(a_\lambda))\mid a\in \scr I\}) \\
        &= (\Inf\{r_\lambda(a_\lambda)\mid a\in \scr I\}) \\
        &= R(a).
    \end{align*}
    De este modo, la semiretícula $A$, equipada con $R$,
    es el coproducto de las $A_\lambda$ en $\Pos^{\inf}$.
\end{proof}

\begin{defn}
Sean $a=(a_\lambda)\in A$, $\mu\in\scr I$ y $S\subseteq A_\mu$, definimos el reemplazo de $a$ por $S$ en la entrada $\mu-$ésima como
\[S(a,\mu)=\{(b_\lambda)\in A\mid b_\lambda=a_\lambda\textit{ para }\lambda\in\scr I\setminus \{\mu\}\textit{ y }b_\mu\in S\}\]
\end{defn}
\begin{exa}
Si $a=(a_1,a_2,a_3,a_4)\in\prod_{\lambda=1}^4A_\lambda$, $\mu=2$ y $S=\{x,y,z\}\subseteq A_2$, entonces
    \[
      S(a,\mu) = \left\{
      \begin{array}{c}
        (a_1,x,a_3,a_4), \\
        (a_1,y,a_3,a_4), \\
        (a_1,z,a_3,a_4)
      \end{array}
      \right\}
    .\]
\end{exa}


\begin{lemma}[La estructura de sitio en $A$]
    La función $C:A\to\cal P(\cal P(A))$
    definida como
    \[
        C(a)
        =\left\{ S(a,\mu)
        \mid \mu\in\scr I, S\subseteq A_\mu
        \text{ tal que }\Sup S=a_\mu\right \}.
    \]
    para cada $a\in A$, es una cobertura en $A$.
\end{lemma}
\begin{proof}
    Sean $a=(a_\lambda),b=(b_\lambda)\in A$ con $b\leq a$ y $W=S(a,\mu)\in C(a)$.
    \begin{itemize}
    \item Sea $c=(c_\lambda)\in W$. Por definición, $c_\lambda=a_\lambda$ para $\lambda\in \scr I\setminus\{\mu\}$ y $c_\mu \in S$, entonces $c_\mu\leq a_\mu$. Esto implica que $c\leq a$, es decir, $c\in \down(a)$.
    \end{itemize}
    
    \begin{itemize}
    \item Probaremos que $\{b\inf w\mid w\in W\}=\{b_\mu \inf w_\mu\mid w_\mu\in S\}(b,\mu)$.\par 
    \begin{itemize}
    \item[$\subseteq)$] Sea $b\inf w\in\{b\inf w\mid w\in W\}$. Observamos que 
    \begin{itemize}
    \item $b\inf w\in A$.
    \item $b_\lambda\inf w_\lambda=b_\lambda\inf a_\lambda=b_\lambda$ para $\lambda\in\scr I\setminus \{\mu\}$.
    \item $b_\mu\inf w_\mu\in\{b_\mu\in w_\mu\mid w_\mu\in S\}$.
    \end{itemize}
    Por lo que $b\inf w\in \{b_\mu \inf w_\mu\mid w_\mu\in S\}(b,\mu)$.
    \item[$\supseteq)$] Sea $c=(c_\lambda) \in \{b_\mu \inf w_\mu\mid w_\mu\in S\}(b,\mu)$. Entonces $c_\lambda=b_\lambda$ para $\lambda\in\scr I\setminus\{\mu\}$ y $c_\mu\in \{b_\mu \inf w_\mu\mid w_\mu\in S\}$.\par 
    Notemos que $c=b\inf m$, donde $m_\lambda=a_\lambda$ para $\lambda\in\scr I\setminus \{\mu\}$ y $m_\mu=w_\mu$. Así, $m\in W$, es decir, $c\in\{b\in w\mid w\in W\}$.
    \end{itemize}
    Además, $\{b_\mu \inf w_\mu\mid w_\mu\in S\}\subseteq A_\mu$ y
    \[\Sup\{b_\mu \inf w_\mu\mid w_\mu\in S\}=b_\mu\inf \left(\Sup S\right)=b_\mu\inf a_\mu=b_\mu\]
    Por lo tanto $\{b\inf w\mid w\in W\}\in C(b)$.
    \end{itemize}
\end{proof}

La estructura de los $C$-ideales en $A$ no es tan sencilla
de entender a primera vista.
Incluimos un ejemplo de un cálculo en $C\Idl(A)$.

\begin{exa}[El menor elemento de $C\Idl(A)$.]
    Supongamos que $a\in A$ tiene
    alguna entrada cero.
    Es decir, $a_\lambda=0\in A_\lambda$ para algún $\lambda$.
    
    Al fijarnos en la entrada $a_\lambda=0\in A_\lambda$,
    tenemos $\Sup\emptyset 0\in A_\lambda$.
    Como $\emptyset(a,\lambda)=\emptyset\subseteq A$,
    de la definición de las $C$-cubiertas
    se sigue que $\emptyset\in C(a)$;
    es decir: la familia vacía cubre a $a$.
    
    En particular, para cualquier $C$-ideal $F\subseteq A_\scr I$,
    tenemos
    \[
        \emptyset \in C(a)
        \hspace{10mm} \text{y} \hspace{10mm}
        \emptyset\subseteq F
    ,\]
    y, por la definición de $C$-ideal, se sigue que $a\in F$.
    
    Esto nos dice que el conjunto $G$ de los elementos que tienen
    alguna entrada nula
    \[
        G=\{a\in A \mid a_\lambda = 0\in A_\lambda
        \text{ para algún } \lambda\in \scr I\}
    \]
    está contenido en todos los $C$-ideales.
    De hecho, probaremos que $G$ es un $C$-ideal.
    Luego, es el menor elemento en el marco de $C$-ideales.

    Claramente, $G$ es sección inferior, por lo cual resta
    probar que es cerrado bajo $C$-cubiertas.
    En efecto, tomemos una cubierta
    \[
        Y(a,\lambda) \in C(a)
        \hspace{10mm} \text{con} \hspace{10mm}
        Y(a,\lambda) \subseteq G
    .\]
    Es decir, $a$ tiene una entrada $a_\lambda$ tal que
    $Y\subseteq A_\lambda$ y $\Sup Y=a_\lambda$.
    
    Si $\Sup Y=0$, entonces $0=\Sup Y=a_\lambda$, así que $a\in G$.
    De otro modo, existe un $y\in Y$, $y\neq 0$.
    Sea $b\in Y(a,\lambda)$ el único elemento de
    $\{y\}(a,\lambda)$.
    Entonces $b$ tiene $\lambda$-ésima entrada
    $b_\lambda=y\neq 0$, pero como $b\in Y(a,\lambda)\subseteq G$,
    existe un índice $\mu\neq\lambda$ tal que $b_\mu = 0$.
    Como $b$ es igual a $a$ en todas las entradas
    que no son $\lambda$ (pues $b\in Y(a,\lambda)$),
    en particular tenemos $b_\mu=a_\mu=0$, así que $a\in G$.
    
    Se sigue que $G$ es un $C$-ideal y, como está contenido
    en todos los $C$-ideales, concluimos que $G$ es el
    menor elemento de $C\Idl(A)$.
\end{exa}


\begin{lemma}[Parte 2]
    Consideremos $C\Idl$ y los morfismos
    $Q_\lambda\colon A_\lambda\to C\Idl$
    definidos como
    \[
        Q_\lambda=j(\down(q_\lambda(\_)))
    .\]
    Entonces $C\Idl$, equipado con los morfismos $Q_\lambda$,
    es el coproducto de la famila de los $A_\lambda$
    en la categoría de marcos.
\end{lemma}
\begin{proof}
Para cualquier marco $Y$ y morfismos
$f_\lambda\colon A_\lambda\to Y$ indicados por $\scr I$,
queremos encontrar un único morfismo
$f\colon C\Idl\to Y$ tal que el siguiente diagrama
\[
    \begin{tikzcd}
        A_\lambda
            \ar[d,"Q_\lambda"']
            \ar[r,"f_\lambda"]
        & Y \\
        C\Idl \ar[ru,"f"']
    \end{tikzcd}
\]
conmuta.

Sean $X$ un marco y una familia de morfismos
\[\{r_\lambda\colon A_\lambda\to X\mid \lambda\in \scr I\}.\]
Dado que $A$, junto con los $q_\lambda:A_\lambda\to A$,
es el coproducto de los $A_\lambda$ como $\inf$-semiretículas,
obtenemos el morfismo de $\inf$-semiretículas
$R\colon A\to X$ dado por
\begin{align*}
    R(a)
    &=\Inf_X \{r_\lambda(a_\lambda)\mid \lambda\in\scr I\} \\
    &= 1_X\inf r_{\lambda_1}(a_{\lambda_1})\inf\cdots\inf r_{\lambda_n}(a_{\lambda_n})
\end{align*}
donde $\{\lambda_1,\dots,\lambda_n\}$ es el conjunto
de las coordenadas de $a$ distintas de $1$.
Este es el único morfismo de $\inf$-semiretículas que
factoriza a todos los $r_\lambda$ a través de $A$.
Probaremos que $R$ convierte cubiertas de $C$ en supremos.

Consideremos $\mu\in\scr I$, $S\subseteq A_\mu$ y $a=(a_\lambda)\in A$ tal que $a_\mu=\Sup_{A_\mu} S$.
Hay que probar que $\Sup R(S(a,\mu)) = R(a)$.
Si $a_\mu= 1_{A_\mu}$, tenemos
\begin{align*}
    \Sup R(S(a,\mu))
    &= \Sup\{R(b) \mid b\in S(a,\mu)\} \\
    &= \Sup\{ 1_X\inf r_{\lambda_1}(a_{\lambda_1})\inf
        \cdots\inf r_{\lambda_n}(a_{\lambda_n}) \inf r_\mu(s) \mid s\in S\} \\
    &= 1_X\inf r_{\lambda_1}(a_{\lambda_1})\inf
        \cdots\inf r_{\lambda_n}(a_{\lambda_n}) \inf
        \Sup\{ r_\mu(s) \mid s\in S\} \\
    &= 1_X\inf r_{\lambda_1}(a_{\lambda_1})\inf
        \cdots\inf r_{\lambda_n}(a_{\lambda_n}) \inf
        r_\mu(a_\mu) \\
    &= R(a).
\end{align*}

Por otro lado, si $a_\mu\neq 1_{A_\mu}$, tenemos $\mu=\lambda_i$.
Entonces
\begin{align*}
    &\hspace{-10mm}\Sup R(S(a,\mu)) \\
    &= \Sup R(S(a,\lambda_i)) \\
    &= \Sup\{R(b) \mid b\in S(a,\lambda_i)\} \\
    &= \Sup\{ 1_X\inf r_{\lambda_1}(a_{\lambda_1})\inf
        \cdots \inf r_{\lambda_i}(s)\inf\cdots\inf r_{\lambda_n}(a_{\lambda_n}) \mid s\in S\} \\
    &= 1_X\inf r_{\lambda_1}(a_{\lambda_1})\inf \cdots
        \inf\Sup\{ r_{\lambda_i}(s) \mid s\in S\} \inf
        \cdots\inf r_{\lambda_n}(a_{\lambda_n}) \\
    &= 1_X\inf r_{\lambda_1}(a_{\lambda_1})\inf \cdots
        \inf r_{\lambda_i}(a_{\lambda_i}) \inf
        \cdots\inf r_{\lambda_n}(a_{\lambda_n})
        \\
    &= R(a).
\end{align*}

Como $R:A\to X$ manda $C$-cubiertas a supremos de $X$,
la propiedad universal del marco $C\Idl$ generado por $(A,C)$
asegura que existe un único morfismo de marcos
$g\colon C\Idl\to X$ tal que el diagrama
\[
    \begin{tikzcd}[ampersand replacement=\&]
        \& X  \\
        C\Idl \ar[ru,"g"] \& A \ar[u,"R"'] \ar[l,"{j(\down({\_}))}"]
    \end{tikzcd}
\]
conmuta.

Notemos que
\[r_\lambda=R\circ q_\lambda=g\circ j(\down(q_\lambda(\_)))=g\circ Q_\lambda.\]
Por lo que el diagrama
\[
    \begin{tikzcd}[ampersand replacement=\&]
        A_\lambda \arrow[d, "Q_\lambda"'] \arrow[r, "r_\lambda"]
        \& X \\
        C\Idl \arrow[ru, "g"']
        \& A \arrow[l, "j(\down(\_))"] \arrow[u, "R"']
    \end{tikzcd}
\]
conmuta.
\end{proof}

\chapter{El teorema de Tychonoff en marcos}

Un espacio topológico es compacto si cualquier cubierta
abierta del espacio admite una subcubierta finita.
En la categoría de espacios topológicos tenemos el
teorema de Tychonoff, que dice que un producto de espacios
topológicos es compacto, si, y solo si, cada uno de los
factores es un compacto.

Del mismo modo, cualquier marco tiene su noción de compacidad.
\begin{defn}[Compacidad de marcos]
Un marco $A$ es compacto si, para cualquier $S\in A$
se satisface lo siguiente:
\[
    \Sup S= 1_A
    \implies
    \textit{ existe } T\subseteq S\text{ finito, tal que }
    \Sup T= 1_A
.\]
\end{defn}
El objetivo de esta sección es probar el teorema análogo
al de Tychonoff, pero en la categoría de marcos:
\begin{thm}
    Sea $\{A_\lambda\}_{\lambda\in\scr I}$ una familia de marcos.
    El coproducto
    \[
        \coprod_{\lambda\in\scr I}A_\lambda
    \]
    es compacto si, y solo si, cada $A_\lambda$ es compacto.
\end{thm}

\section{Idea de la demostración}

En la sección anterior probamos que
$\coprod_{\lambda\in\scr I}A_\lambda$
es el marco de $C$-ideales de $A$, donde $A$ es el coproducto
de los $A_\lambda$ como $\inf$-semiretículas y $C$ es cierta
cobertura en $A$.
Como $C\Idl$ es un cociente de $\cal LA$,
los supremos en $C\Idl$ se calculan como
\[
    \Sup S = j(\bigcup S)
,\]
donde $j:\cal LA\to\cal LA$ es el núcleo asociado a $C\Idl$.
Por lo tanto, es de esperarse que la demostración de
nuestra versión del teorema de Tychonoff involucre al núcleo
$j$ de alguna manera.
De hecho, toda la demostración consiste
en dar una construcción de $j$ que facilite convertir
ciertos supremos arbitrarios en supremos finitos.
Para llevar a cabo esta idea, primero definiremos una
cierta subcobertura $C_f\subseteq C$, de tal modo que
factorizaremos la proyección $\cal LA\to C\Idl$ a través de
$C_f\Idl$:
\[
    \begin{tikzcd}
        \cal LA \ar[d] \ar[r] & C\Idl \\
        C_f\Idl \ar[ur]
    \end{tikzcd}
\]

Más específicamente, el plan es el siguiente:
\begin{itemize}
    \item
    Definimos una subcobertura $C_f\subseteq C$ en $A$ y
    construimos la proyección $\cal LA\to C_f\Idl$.
    Es decir, dado $S\in\cal L(A)$,
    construimos el $C_f$-ideal $FS$ generado por $S$.
    \item 
    Vemos que el conjunto $\cal DS$ de supremos dirigidos
    de $S$ está contenido en el $C$-ideal generado por $S$.
    \item
    Probamos que, si $S$ es un $C_f$-ideal, entonces
    $\cal DS$ también lo es.
    Por lo tanto, $\cal D(FS)$ es un $C_f$ ideal que
    contiene a $S$ y está contenido en el $C$-ideal $j(S)$
    generado por $S$.
    \[
        S\subseteq \cal D(FS) \subseteq j(S)
    .\]
    Sin embargo, la última contención puede ser propia.
    \item
    Para saltar de $\cal D(FS)$ a $j(S)$,
    iteramos $\cal D$ para construir una
    cadena de $C_f$-ideales que contienen a $D(FS)$
    \[
        FS\subseteq \cal D(FS) \subseteq \cal D^2(FS)
        \subseteq \dots
    \]
    y probamos que, eventualmente, se alcanza $j(S)$.
    \item
    Con nuestra construcción de $j(S)$ veremos
    que, dada una familia $P\subseteq C\Idl(A)$,
    la igualdad
    $j(\bigcup P)=A$ implica $F(\bigcup P)=A$.
    En otras palabras,
    $\Sup P = 1_{C\Idl(A)}$ implica $1\in F(\bigcup P)$.
    \item
    Con esta última herramienta, podremos demostrar
    la implicación $\impliedby$ del teorema.
    \item
    La implicación $\implies$ es directa.
\end{itemize}

\section{La cobertura de cubiertas finitas}

\begin{lemma}
La función $C_f:A\to\cal P(\cal P(A))$
definida para todo $a\in A$ como
\[C_f(a)=\{S\subseteq A\mid S\in C(a), S\textit{ finito}\}\]
es una cobertura sobre $A$.
\end{lemma}

Nuestra primera tarea será obtener una construcción para
el núcleo asociado al cociente $\cal LA\to C_f\Idl$.
Para esto, introduciremos algo de notación.

\begin{defn}
Sean $\lambda_1,\dots,\lambda_n\in \scr I$ índices distintos y
$x_1,\dots,x_n$ elementos tales que
$x_i\in A_{\lambda_i}$ para todo $i$.
En otras palabras, $x=(x_1,\dots,x_n)$ es un elemento del producto
$A_{\lambda_1}\times\dots\times A_{\lambda_n}$.

Para cualquier elemento $a\in A$ del coproducto de los $A_\lambda$
en $\Pos^{\inf}$, denotaremos como
$a(x)=a(x_1,\dots,x_n)$ al elemento de $A$ que
es igual a $a$ pero con las entradas $\lambda_1,\dots,\lambda_n$
reemplazadas por $x_1,\dots,x_n$.
Es decir,
\[
    p_\lambda(a(x_1,\dots,x_n))
    =
    a(x_1,\dots,x_n)_\lambda
    =
    \begin{cases}
        x_i, & \lambda = \lambda_i \\
        a_\lambda & \lambda\not\in\{\lambda_1,\dots\lambda_n\}
    \end{cases}
.\]
En particular, si $x_i\in A_{\lambda_i}$, se cumple que
\begin{align*}
  1(x_i)
    &= q_{\lambda_i}(x_i) \\
  1(x_1,\dots,x_n)
    &= \Inf\{q_{\lambda_i}(x_i) \mid i=1,\dots,n\}.
\end{align*}
%
%Estrictamente hablando,
%habría que denotar no solo los elementos $x_1,\dots,x_n$
%que van a reemplazar las
%entradas de $a$, sino también exactamente en qué entradas se
%está haciendo la sustitución
%(ya que podría darse el caso que $A_\lambda=A_\mu$ aún cuando
%$\lambda\neq\mu$).
%Sin embargo, no lo haremos así, pues todas las
%sustituciones se harán en un contexto que permita saber
%el conjunto exacto de índices.
\end{defn}

\begin{defn}
  Dado un conjunto $S\subseteq A$, defino el conjunto $FS$
  especifivando que $a\in FS$ si, y solo si,
  existe un conjunto finito no vacío de índices
  $\Gamma=\{\lambda_1,\dots,\lambda_n\}$ que contiene al
  soporte de $a$ y conjuntos $S_1,\dots,S_n$ con
  $S_i\subseteq A_{\lambda_i}$ tales que $\Sup S_i =
  a_{\lambda_i}$ y, para toda tupla
  $(s_1,\dots,s_n)\in S_1\times\cdots\times S_n$, el elemento
  \[
    a(s_1,\dots,s_n)
  \]
  está en $S$.
  En tal caso, decimos que $a$ es $\Gamma$-generado por $S$ y
  que $(\Gamma,S_1,\dots,S_n)$ es el testigo de $a\in FS$,
  ya que $(\Gamma,S_1,\dots,S_n)$ atestigua (o prueba) que
  $a$ pertenece a $FS$.
\end{defn}

\section{Si \tps{$S$}{S} es sección inferior, \tps{$FS$}{FS} también.}

Sea $S$ una sección inferior, $a\in FS$ y $b\leq a$.

Sea $a\in FS$ y sea $(\Gamma,S_1,\dots,S_n)$ su testigo.
Sin perder generalidad, podemos suponer que $\Gamma$ también
contiene al soporte de $b$.
En efecto, si $b_\gamma\neq 1_\gamma$ y $\gamma\not\in\Gamma$,
podemos agregar $\gamma$ a $\Gamma$ y poner
$S_\gamma = \{1_\gamma\}$,
de modo que $a_\gamma = 1_\gamma = \Sup S_\gamma$
y, para todo
$(s_1,\dots,s_n,1_\gamma)\in\prod_{i=1}^nS_i\times S_\gamma$
se tiene
\[
  1(s_1,\dots,s_n,1_\gamma) = 1(s_1,\dots,s_n) \in S
.\]

Supongamos, pues, que $b$ también tiene soporte contenido en
$\Gamma$.
Entonces haciendo $T_i=\{b_{\lambda_i}\inf s \mid s\in S_i\}$
para todo $i=1,\dots,n$, tenemos que
\begin{align*}
  \Sup T_i
  &= b_{\lambda_i}\inf\Sup S_i \\
  &= b_{\lambda_i}\inf a_{\lambda_i} \\
  &= b_{\lambda_i}.
\end{align*}

Más aún, dado $(b_{\lambda_1}\inf s_1,\dots,b_{\lambda_n}\inf
s_n)\in \prod_{i=1}^n T_\lambda$, tenemos
\begin{align*}
  1(b_{\lambda_1}\inf s_1,\dots,b_{\lambda_n}\inf s_n)
  \leq 1(s_1,\dots,s_n) \in S.
\end{align*}
y, como $S$ es sección inferior, tenemos
\[
  1(b_{\lambda_1}\inf s_1,\dots,b_{\lambda_n}\inf s_n) \in S
.\]
Se sigue que $b$ es finitamente generado por $S$ con testigo
$(\Gamma,T_1,\dots,T_n)$, es decir: $b\in FS$,
así que $FS$ es sección inferior.

\section{Si \tps{$S$}{S} es sección inferior, \tps{$FS$}{FS} está contenido en todos los \tps{$C_f$}{Cf}-ideales que contienen a \tps{$S$}{S}.}

Sea $J$ un $C_f$-ideal que contiene a $S$.
Tomemos un elemento $a\in FS$ con testigo $(\Gamma,S)$, donde
$\Gamma=\{\lambda_1,\dots,\lambda_n\}$.

Probaremos, por inducción sobre $k\leq n$, que, para cada tupla
$(s_k,\dots,s_n)\in S_k\times\cdots\times S_n$, el elemento
$a(s_k,\dots,s_n)$ está en $J$.

Para toda tupla
$(s_1,\dots,s_n)\in S_1\times\cdots\times S_n$, tenemos que
\[
  a(s_1,\dots,s_n)\in S\subseteq J
\]
ya que $a\in FS$.
Esto prueba el caso base ($k=1$).

La hipótesis de inducción ($k$) nos dice que, para cada tupla
$(s_k,\dots,s_n)\in S_k\times\cdots\times S_n$,
el elemento $a(s_k,\dots,s_n)$ está en $J$.

Ahora (el paso de inducción)
sea $(s_{k+1},\dots,s_n)\in S_{k+1}\times\cdots\times S_n$
una tupla arbitraria y consideremos el conjunto
\[
  \{a(s,s_{k+1},\dots,s_n) \mid s\in S_k\}
  =
  S_k(a(s_{k+1},\dots,s_n),\lambda_k)
  \in
  C_f(a(s_{k+1},\dots,s_n))
.\]
Esta es, en efecto, una cubierta, ya que la $\lambda_k$-ésima
coordenada de $a(s_{k+1},\dots,s_n)$ es $a_{\lambda_k}=\Sup S_k$.
Más aún: por hipótesis de inducción, cada elemento
de la cubierta está en $J$.
Como $J$ es un $C_f$-ideal, se sigue que
\[
  a(s_{k+1},\dots,a_n) \in J
.\]
Esto concluye la inducción para $k\leq n$.
En particular, tenemos $a(s_n)\in J$ para cada $s_n\in S_n$,
pero esta es una $C_f$-cubierta de $a$ contenida en $J$,
así que $a\in J$.
Por lo tanto, $FS\subseteq J$.

\section{Si \tps{$S$}{S} es sección inferior, \tps{$FS$}{FS} es cerrado bajo
cubiertas y, por lo tanto, es un \tps{$C_f$}{Cf}-ideal.}

Si $a\in A$ tiene una cubierta vacía, entonces tiene una entrada
cero, digamos $a_{\lambda_1}=0$.
Sea $\lambda_2,\dots,\lambda_n$ el resto de su soporte.
Poniendo $S_1=\{\}$ y $S_i=\{a_{\lambda_i}\}$ para $i=2,\dots,n$,
obtenemos $\Sup S_i = a_{\lambda_i}$.
Como $S_1\times S_2\times\cdots\times S_n=\emptyset$,
se cumple que $a\in FS$ por vacuidad.

Luego, basta considerar cubiertas de dos elementos.

Sean $a,b\in FS$ con $a_\gamma=b_\gamma$ para todo
$\gamma\neq\gamma_0$.
Debemos mostrar que $a\sup b\in FS$.

Como antes, podemos suponer que tanto $a$ como $b$ tienen soporte
en el mismo $\Gamma=\{\gamma_0,\gamma_1,\dots,\gamma_n\}$.

Por definición, tenemos $F_\gamma,G_\gamma$ tales que $\Sup
F_\gamma = a_\gamma$, $\Sup G_\gamma = b_\gamma$ para todo
$\gamma\in\Gamma$ y
\begin{align*}
  1(f_0,\dots,f_n)\in S && 1(g_0,\dots,g_n)\in S.
\end{align*}
siempre que $f_i\in F_{\gamma_i}$ y $g_i\in G_{\gamma_i}$.

Definamos $H_{\gamma_0}=F_{\gamma_0}\cup G_{\gamma_0}$ y
$H_\gamma = \{f\inf g\mid f\in F_\gamma,g\in G_\gamma\}$ para
todo $\gamma\in\Gamma,\gamma\neq\gamma_0$.
Entonces
\begin{align*}
  \Sup H_{\gamma_0}
  &= \Sup(F_{\gamma_0}\cup G_{\gamma_0}) \\
  &= \Sup F_{\gamma_0} \sup \Sup G_{\gamma_0} \\
  &= a_{\gamma_0} \sup b_{\gamma_0}
  \\
  \Sup H_\gamma
  &= \Sup\{f\inf g \mid f\in F_\gamma, g\in G_\gamma\} \\
  &= \Sup F_\gamma \inf \Sup G_\gamma \\
  &= a_\gamma \inf b_\gamma \\
  &= a_\gamma\sup b_\gamma
  \text{ para } \gamma\neq\gamma_0,
\end{align*}
lo cual son las entradas de $a\sup b$.

Ahora, las tuplas $x=\prod_{i=0}^n H_{\gamma_i}$ son de
dos formas posibles.
\begin{itemize}
  \item Si $x=(f_0,f_1\inf g_1,\dots,f_n\inf g_n)$,
  entonces
  \begin{align*}
    1(f_0,f_1\inf g_1,\dots,f_n\inf g_n)
    &\leq 1(f_0,f_1,\dots,f_n) \in S.
  \end{align*}
  \item de otro modo, $x=(g_0,f_1\inf g_1,\dots,f_n\inf g_n)$,
  así que
  \begin{align*}
    1(g_0,f_1\inf g_1,\dots,f_n\inf g_n)
    &\leq 1(g_0,g_1,\dots,g_n)\in S.
  \end{align*}
\end{itemize}
Como $S$ es sección inferior, se sigue que $1(x)$ siempre está en
$S$, así que $a\sup b$ está en $FS$.

\section{El conjunto de supremos dirigidos \tps{$\D S$}{DS} está contenido en todos los \tps{$C$}{C}-ideales que contienen a \tps{$S$}{S}.}

Sea $S$ una sección inferior y $\D S$ su conjunto de supremos
dirigidos.

Sea $J$ un $C$-ideal que contiene a $S$.
Como todo $a\in\D S$ es el supremo de un $D\subseteq S$ dirigido
y $D\subseteq S\subseteq J$, basta ver que $J$ es cerrado bajo
supremos dirigidos.

Tomemos un subconjunto dirigido $D\subseteq J$.
Como $D$ es dirigido, para cualquier $d\in D$ tenemos
\[
  \Sup D = \Sup(D\cap{\uparrow}d)
.\]
($\geq$ es obvia, para $\leq$ basta observar que todo $a\in D$
está por debajo de un $c\in D$ con $\geq a\sup d$).
Luego, podemos suponer que $D$ está contenido en una sección
superior principal.
En particular podemos suponer que todos los elementos de $D$
tienen soporte en $\Gamma=\{\lambda_1,\dots,\lambda_n\}$.

Sea $a=\Sup D$.
Como $D$ es dirigido, entonces sus proyecciones $D_1,\dots,D_n$ a
los marcos $A_{\lambda_1},\dots,A_{\lambda_2}$ son dirigidas
(todos los $x_1,y_1\in D_1$ vienen de elementos $x,y\in D$;
luego, existe $z\in D$ con $x,y\leq z$, por lo cual $x_1,y_1\leq
z_1$).

Por definición del supremo, tenemos
\[
  a = 1(\Sup D_1,\dots,\Sup D_n)
.\]

Por inducción sobre $k\leq n$, probaremos que, para toda tupla
$(d_k,\dots,d_n)\in D_k\times\cdots\times D_n$, el elemento
\[
  a(d_k,\dots,d_n)
  =
  1(\Sup D_1,\dots,\Sup D_{k+1},d_k,\dots,d_n)
\]
está en $J$.

Para cualquier tupla $(d_1,\dots,d_n)\in D_1\times\cdots\times
D_n$, cada entrada $d_i$ es la $\lambda_i$-ésima
proyección de algún $x_i\in D$.
Como $D$ es dirigido, existe $z\in D$ con $x_1,\dots,x_n\leq z$.
Luego,
\[
  1(d_1,\dots,d_n)\leq z\in D \subseteq J
.\]
Como $J$ es sección inferior, tenemos $1(d_1,\dots,d_n)\in J$.
Esto prueba el caso base ($k=1$).

La hipótesis de inducción ($k$) dice que, para cada tupla
$(d_k,\dots,d_n)\in D_k\times\cdots\times D_n$, el elemento
$a(d_k,\dots,d_n)$ está en $J$.

Ahora (paso de inducción) sea
$(d_{k+1},\dots,d_n)\in D_{k+1}\times\cdots\times D_n$ una tupla
arbitraria y consideremos el conjunto
\
\[
  \{a(d,d_{k+1},\dots,d_n) \mid d\in D_k\}
  =
  D_k(a(d_{k+1},\dots,d_n),\lambda_k)
  \in
  C(a(d_{k+1},\dots,d_n))
.\]
Esta es, en efecto, una cubierta, ya que la $\lambda_k$-ésima
coordenada de $a(d_{k+1},\dots,d_n)$ es $\Sup D_k$.
Más aún: por hipótesis de inducción, cada elemento de la cubierta
está en $J$.
Como $J$ es un $C$-ideal, se sigue que
$a(d_{k+1},\dots,d_n)\in J$.
Esto concluye la inducción.
En particular, para $k=n$, mostramos que $a(d_n)\in J$ para todo
$d_n\in D_n$, pero este conjunto es una $C$-cubierta de $a$.
Se sigue que $a\in J$, así que $J$ es cerrado bajo supremos
dirigidos.
Por lo tanto, $\D S\subseteq J$.

\section{Si \tps{$S$}{S} es un \tps{$C_f$}{Cf}-ideal,
entonces \tps{$\D S$}{DS} también.}

Dado $a\in S$, $\{a\}\subseteq S$ es dirigido, así que
$a=\Sup\{a\}\in \D S$, por lo que $S\subseteq\D S$.

Primero veamos que $\D S$ es sección inferior.
Sean $a\in \D S$ y $b\leq a$.
Podemos suponer que $a$ y $b$ tienen soporte en $\Gamma$.
Tenemos $a=\Sup D$ con $D\subseteq S$ dirigido.
Es claro que
\[
  b = \Sup\{b\inf d\mid d\in D\}
.\]
Como $S$ es sección inferior, este último conjunto esta en $S$,
así que basta probar que es dirigido.
Sean $b\in d,b\inf d'$ con $d,d'\in D$.
Entonces existe $d''\in D$ con $d\sup d'\leq d''$, por lo
cual $b\inf d''$ cumple
$(b\inf d)\sup(b\inf d')=b\inf(d\sup d')\leq b\inf d''$ y, así,
el conjunto es dirigido.
Luego $b\in\D S$ y $\D S$ es sección inferior.

Ahora veamos que $\D S$ es cerrado bajo $C_f$-cubiertas.
Si $a\in A$ tiene una cubierta vacía, tenemos $a\in S$, así que
$a\in\D S$ (pues $S$ es $C_f$-ideal),
por lo cual basta ver que $\D S$ es cerrado
bajo $C_f$-cubiertas de dos elementos.
Sean $a,b\in\D S$ con todas sus entradas iguales excepto
$\gamma_0$.
Por definición, existen $D,E\subseteq S$ dirigidos con
$a=\Sup D$ y $b=\Sup E$.

Definimos $*:D\times E\to A$ como
\begin{align*}
  (d*e)_{\gamma_0} &= d_{\gamma_0} \sup e_{\gamma_0} \\
  (d*e)_{\gamma} &= d_{\gamma} \inf e_{\gamma} \text{ para }
  \gamma\neq\gamma_0
\end{align*}
y sea $F=\{d*e \mid d\in D, e\in E\}$.

Ahora veamos que $F$ es dirigido.
Si $d*e,d'*e'\in F$, entonces existen $d''\in D$ y $e''\in E$ con
$d\sup d'\leq d''$ y $e\sup e'\leq e''$.
Luego, $(d*e)\sup(d'*e')\leq d''*e''$, pues la comparación es
puntual y $*$ es monótono en cada coordenada; en efecto:
\begin{align*}
  ((d*e)\sup(d'*e'))_{\gamma_0}
  &= (d*e)_{\gamma_0} \sup (d'*e')_{\gamma_0} \\
  &= d_{\gamma_0}\sup e_{\gamma_0}\sup d'_{\gamma_0}\sup
    e'_{\gamma_0} \\
  &= (d_{\gamma_0}\sup d'_{\gamma_0})
    \sup(e_{\gamma_0}\sup e'_{\gamma_0}) \\
  &\leq d''_{\gamma_0} \sup e''_{\gamma_0}
  \\
  ((d*e)\sup(d'*e'))_{\gamma}
  &= (d*e)_{\gamma} \sup (d'*e')_{\gamma} \\
  &= (d_\gamma\inf e_\gamma)\sup(d'_\gamma\inf e'_\gamma) \\
  &\leq d_\gamma \sup e'_\gamma \\
  &\leq d''_\gamma \sup e''_\gamma.
\end{align*}
Se sigue que $F$ es dirigido.
Mas aún, $\Sup F = a\sup b$, pues
\begin{align*}
  (\Sup F)_{\gamma_0}
  &= \Sup\{(d*e)_{\gamma_0} \mid d\in D,e\in E\} \\
  &= \Sup\{d_{\gamma_0}\sup e_{\gamma_0} \mid d\in D,e\in E\} \\
  &= \Sup\{d_{\gamma_0}\mid d\in D\}
    \sup \Sup\{e_{\gamma_0}\mid e\in E\} \\
  &= (\Sup D)_{\gamma_0} \sup (\Sup E)_{\gamma_0} \\
  &= a_{\gamma_0} \sup b_{\gamma_0}
  \\
  (\Sup F)_\gamma
  &= \Sup\{(d*e)_\gamma\mid d\in D,e\in E\} \\
  &= \Sup\{d_\gamma\inf e_\gamma\mid d\in D,e\in E\} \\
  &= \Sup\{d_\gamma\mid d\in D\}
    \inf \Sup\{e_\gamma\mid e\in E\} \\
  &= (\Sup D)_\gamma \inf (\Sup E)_\gamma \\
  &= a_\gamma \inf b_\gamma \\
  &= a_\gamma \sup b_\gamma \text{ para }\gamma\neq\gamma_0,
\end{align*}
lo cual son las entradas de $a\sup b$.

Para mostrar que $a\sup b\in\D S$,
solo queda ver que $F\subseteq S$.
Para esto, usaremos que $S$ es $C_f$-ideal (nótese que no lo
habíamos usado excepto en un caso muy simple).

Sea $d*e\in F$; es decir: $d\in D\subseteq S$ y $e\in E\subseteq S$.
Queremos construir una $C_f$-cubierta de $d*e$ que esté contenida
en $S$.
Consideremos  $r,s\in A$ dados por
\begin{align*}
  r_\gamma = s_\gamma
    &= d_\gamma \inf e_\gamma \text{ para } \gamma\neq\gamma_0 \\
  r_{\gamma_0} &= d_\gamma \\
  s_{\gamma_0} &= e_\gamma.
\end{align*}
Observemos que $r\leq d\in D\subseteq S$ y que $s\leq e\in
E\subseteq S$.
Como $S$ es sección inferior, tenemos $r,s\in S$.
Finalmente, es claro que $r\sup s = d*e$ donde el supremo se
concentra en una entrada.
Es decir, $\{r,s\}\in C_f(d*e)$ y $\{r,s\}\subseteq S$.
Como $S$ es $C_f$-ideal, se sigue que $d*e\in S$.
Así, $F\subseteq S$, por lo cual $a\sup b\in\D S$.
Es decir, $\D S$ es cerrado bajo $C_f$-cubiertas, por lo cual
también es un $C_f$-ideal.

\section{Lema: saltar de \tps{$\D(FS)$}{D(FS)} a \tps{$j(S)$}{j(S)}.}
    Sea $I$ un $C_f$-ideal de $A$.
    Como ya vimos, $\D I$ es un $C_f$-ideal contenido
    entre $I$ y el $C$-ideal $j(I)$ generado por $I$.
    Aplicando esto a $\D I$, obtenemos
    \[
        I\subseteq \D I
        \subseteq \D(\D I)
        \subseteq j(\D I)=j(I)
    .\]
    Poniendo $I=FS$ (el $C_f$-ideal generado por una sección
    inferior $S\subseteq A$) e iterando $\D$, obtenemos una
    cadena de $C_f$-ideales
    \[
        FS \subseteq \cal D(FS)
        \subseteq D^2(FS)
        \subseteq \dots
    \]
    contenidos en $j(FS)=j(S)$.


    La extensión de esta cadena a todos los ordinales
    \begin{align*}
        I_0 &= FS \\
        I_{\alpha+1} &= \D(I_\alpha) \\
        I_\lambda
        &= \bigcup\{I_\alpha \mid \alpha<\lambda\}
            && \text{ si $\lambda$ es límite }
    \end{align*}
    se estaciona en el $C$-ideal $j(S)$ generado por $S$. \\
    En efecto, sea $\gamma$ el primer ordinal donde la cadena
    se detiene.
    Entonces $I_\gamma=I_{\gamma+1}=\D(I_\alpha)$.
    Es decir, $I_\gamma$ es cerrado bajo supremos dirigidos.
    Como también es cerrado bajo supremos finitos
    (entrada por entrada), se sigue
    que es cerrado bajo supremos arbitrarios
    (entrada por entrada), así que es
    un $C$-ideal.
    Se sigue que $I_\gamma=j(S)$, como se afirmó.


\section{Lema: generar a \tps{$A$}{A} como \tps{$C$}{C}-ideal implica generarlo como \tps{$C_f$}{Cf}-ideal}
    Tomemos una familia $A_\lambda$ de marcos compactos
    y sea $A$ su coproducto como $\inf$-semiretículas.
    Equipémoslo con los cubrientes $C$ y $C_f$.
    
    Si $P\subseteq C\Idl(A)$ es tal que $\Sup P=1_{C\Idl(A)}$,
    entonces $1\in F(\bigcup P)$.
    En otras palabras, si
    $j(\bigcup P)=A$, entonces $F(\bigcup P)=A$.
    \\
    %\pause
    \textbf{\emph{Demostración:}} \\
    Supongamos que $A=j(\bigcup P)$.
    De la construcción anterior, tenemos
    $I_\gamma=j(\bigcup P)$ (donde $\gamma$ es el primer
    ordinal donde se detiene la cadena de iteraciones
    $\D^\alpha(\bigcup P)$),
    así que $1\in I_\gamma$. \\
    Afirmamos que $\gamma$ no puede ser ordinal límite.
    En efecto, si lo fuera, tendríamos
    \[
        1 \in I_\gamma = \bigcup\{I_\alpha \mid \alpha<\gamma\}
    ,\]
    por lo cual $1\in I_\alpha$ para algún $\alpha<\gamma$, lo
    cual no puede suceder por la minimalidad de $\gamma$.

    Más aún, $\gamma$ no puede ser sucesor.
    Si fuera el caso que $\gamma=\beta+1$, tendríamos
    $1\in I_\gamma = \D(I_\beta)$;
    es decir: $1=\Sup D$ para algún conjunto dirigido
    $D\subseteq I_\beta$.
    Dado que $D$ es dirigido, podemos tomar cualquier
    $d\in D$ y obtener
    \[
        1
        = \Sup D
        = \Sup\{a\in D\mid d\leq a\}
        = \Sup(D\cap{\uparrow}d)
    ,\]
    lo cual nos dice que,
    reemplazando a $D$ por $D\cap{\uparrow}d$ en
    caso de ser necesario,
    podemos suponer que $D$ está contenido en una
    sección superior principal.
    En particular, podemos suponer que todos los elementos
    de $D$ tienen soporte contenido en
    un conjunto finito de índices $\Gamma$.

    Para cada $\lambda\in\Gamma$, sea $D_\lambda=p_\lambda(D)$.
    Como $1=\Sup D$, tenemos $1_\lambda=\Sup D_\lambda$ y,
    por compacidad de los $A_\lambda$, esto nos da familias finitas
    $E_\lambda\subseteq D_\lambda$ tales que
    $1_\lambda=\Sup E_\lambda$.
    
    Luego, todos los elementos de todos los $E_\lambda$ aparecen
    como entradas de los elementos de un conjunto finito
    $E\subseteq D$.
    Como $D$ es dirigido y $E$ es finito,
    existe $a\in D$ tal que $\Sup E\leq a$,
    pero $\Sup E=1$, así que
    \[
        1 = a \in D\subseteq I_\beta
    ,\]
    lo cual contradice la minimalidad de $\gamma$.
    
    Se sigue que $\gamma=0$.
    Esto es, $A=j(\Sup P) = I_0 = F(\bigcup P)$, como se deseaba.

\section{Una implicación (Tychonoff)}
    Con toda esta herramienta, podemos demostrar el teorema
    de Tychonoff.
    Si $A_\lambda$ es una familia de marcos compactos y $A$
    es su coproducto como $\inf$-semiretículas,
    debemos mostrar que $C\Idl(A)$ es compacto.
    Sea $P\subseteq C\Idl(A)$ una familia de $C$-ideales tal que
    $\Sup P = 1_{C\Idl(A)}$.
    En otras palabras: $\bigcup P$ genera a $A$ como $C$-ideal.
    \[
        j(\bigcup P) = A
    .\]
    
    Como acabamos de probar, esto implca que $\bigcup P$ también
    genera a $A$ como $C_f$-ideal:
    \[
        F(\bigcup P)=A
    .\]
    En particular, $1\in F(\bigcup P)$; esto es:
    existe algún conjunto finito no vacío de índices $\Gamma$
    tal que $1\in A$ es $\Gamma$-finitamente generado por
    $\bigcup P$.

    Es decir: para cada $\lambda\in\Gamma$ existe un conjunto
    finito $S_\lambda\subseteq A_\lambda$
    con $\Sup S_\lambda = 1_\lambda$
    y, siempre que se tenga una tupla
    $x=(x_\lambda)_{\lambda\in\Gamma}$
    con $x_\lambda\in A_\lambda$,
    se cumple
    \[
        1(x)
        =\Inf\{q_\lambda(x_\lambda)\mid\lambda\in\Gamma\}
        \in\bigcup P
    .\]
    Ahora, como $\Gamma$ es finito y cada $S_\lambda$
    también, solo se puede formar
    una cantidad finta de tuplas
    $x=(x_\lambda)_{\lambda\in\Gamma}$.
    Así, el conjunto de los $1(x)$ es finito y, por lo tanto,
    está contenido en una cantidad finita de factores
    $P_1,\dots,P_n\in P$ de $\bigcup P$.
    
    Luego, $1\in A$ es $\Gamma$-finitamente generado
    por $\bigcup_{i=1}^nP_i$.
    Esto es $F(\bigcup_{i=1}^n P_i)=A$ y, así,
    \[
        \Sup\{P_1,\dots,P_n\}
        = j(\bigcup_{i=1}^nP_i)
        = A
        = 1_{C\Idl(A)}
    .\]
    Luego, $C\Idl(A)$ es compacto.

%\section*{SESIÓN 22: 30 NOV (Expo Alfredo, dudas tarea)}

\section{La otra implicación}

Necesitamos este pequeño resultado.
\begin{lemma}
Dada un elemento $x\in A_\lambda$, entonces
\[
    j(\down q_\lambda(x)) = \down q_\lambda(x)
.\]
\end{lemma}
\begin{proof}
    En efecto, sea $a\in A$ y $S(a,\mu)\subseteq\down q_\lambda(x)$
    una $C$-cubierta de $a$.
    Queremos mostrar que $a\leq q_\lambda(x)$.
    Si $\mu\neq\lambda$, entonces $S(a,\mu)\subseteq \down q_\lambda(x)$
    nos dice que $a_\lambda\leq x$, así que $a\leq q_\lambda(x)$.
    Por otro lado, si $\mu=\lambda$, entonces
    $S(a,\lambda) \subseteq \down q_\lambda(x)$ nos dice que, para todo
    $s\in S$ tenemos $s\leq x$.
    Por lo tanto, $a_\lambda=\Sup S\leq x$, así que $a\leq q_\lambda(x)$.
    Se sigue que $\down q_\lambda(x)$ es un $C$-ideal.
\end{proof}
Ahora sí.

\begin{lemma}
    Si el coproducto $C\Idl(A)$ de una familia de marcos
    $A_\lambda$ es compacto, entonces cada $A_\lambda$
    también es compacto.
\end{lemma}
\begin{proof}
    Supongamos que $C\Idl$ es compacto.
    Si $S\subseteq A_\lambda$ es tal que $\Sup S=1_\lambda$,
    entonces $S(\lambda,1)\in C(1)$.
    
    Para cada $s\in S$, sea $Q_\lambda(s)
    = j(\down q_\lambda(s))$
    el $C$-ideal generado por $s$ bajo $q_\lambda$.
    Luego,
    \[
        \Sup\{Q_\lambda(s) \mid s\in S\} = 1_{C\Idl(A)} = A
    .\]
    Por la compacidad de $C\Idl(A)$,
    existen $s_1,\dots,s_n\in S$ tales que
    \[
        \Sup\{Q_\lambda(s_i) \mid i=1,\dots,n\} = A
    .\]
    Como $Q_\lambda$ es morfismo de marcos, esto es
    \[
        Q_\lambda(\Sup\{s_i \mid i=1,\dots,n\}) = A
    .\]
    
    Ahora, dado que $Q_\lambda(x) = \down q_\lambda(x)$, tenemos
    \[
        1 \in \down q_\lambda(\Sup\{s_i \mid i=1,\dots,n\})
    ,\]
    o bien
    \[
        1 = q_\lambda(\Sup\{s_i \mid i=1,\dots,n\})
    .\]
    Proyectando a la $\lambda$-ésima coordenada, obtenemos
    \[
        1_\lambda = \Sup\{s_i \mid i=1,\dots,n\}
    .\]
    Se sigue que $A_\lambda$ es compacto.
\end{proof}

\chapter{Producto en \tps{$\Top$}{Top} vs coproducto en \tps{$\Frm$}{Frm}}
%\section*{SESIÓN 23: 2 DIC}
\begin{defn}[Morfismo denso]
    Un morfismo de marcos $f:A\to B$ es denso si $\forall \ a\in A$se cumple que
    $$f(a)=0\implies a=0$$
\end{defn}
Sea $\{S_i\}_{i\in I}$ una familia de espacios topológicos, y considérense el marco de abiertos de su producto $\mathcal{O}(\prod\limits_{i\in I}S_i)$ y su coproducto $\bigoplus\limits_{i}\mathcal{O}(S_i)$. Dado que para cualquier $i\in I$ la proyección $p_i:\prod\limits_{i\in I}\to S_i$ es continua, entonces la preimagen $p_i^{-1}:\mathcal{O}S_i$
es un morfismo de marcos. Por la propiedad universal del coproducto, existe un único morfismo $p^\sharp:\bigoplus\limits_{i}\mathcal{O}S_i\to\mathcal{O}(\prod\limits_{i\in I}S_i)$ tal que el siguiente diagrama conmuta para todo $i\in I$:
 \[
            \begin{tikzcd}
                \mathcal{O}S_i \ar[dr,"p_i^{-1}"'] \ar[rr,"k_i"] && \bigoplus\limits_{i\in I}\mathcal{O}S_i \ar[dl,"p_i^\sharp"]
                \\ & \mathcal{O}(\prod\limits_{i\in I}S_i)
            \end{tikzcd}
        \]
donde $k_i$ es la inclusión de $\mathcal{O}S_i$ en $\bigoplus\limits_{i\in I}\mathcal{O}S_i$
Se cumple que $p_i^\sharp$ siempre es suprayectivo y denso; sin embargo, rara vez es un isomorfismo.
\begin{exa}
Considérese el conjunto 
$$\mathbb{D}=\{\frac{a}{2^n}:a\in\mathbb{Z},n\in\mathbb{N}\}\subset\mathbb{Q}$$
y nótese que con la topología usual de subespacio de $\mathbb{R}$ es un espacio topológico isomorfo a $\mathbb{Q}$. Sea $S=\mathbb{D}\times\mathbb{D}$, y para $(x,y)=(\frac{a}{2^m},\frac{b}{2^n})$, defínase $S_{x,y}$ como el cuadrado abierto con centro en $(x,y)$ y lado $2^{-(\mid m-n\mid+1)}$. Por ejemplo, $S_{0,0}=(-\tfrac{1}{4},\tfrac{1}{4})\times (-\tfrac{1}{4},\tfrac{1}{4})$.
Nótese ahora que $A=\{S_{x,y}:(x,y)\in\mathbb{D}\times\mathbb{D}\}$ es un marco, y sea $\mathcal{C}$ la cubierta de coproducto de marcos definida en la sección 9.3. Así, defínase $R_{x,y}$ como el $\mathcal{C}$-ideal generado por $S_{x,y}$, y nótese que $\mathbb{D}\times\mathbb{D}=\bigcup\limits_{x,y\in\mathbb{D}\times\mathbb{D}}R_{x,y}$.

Para $\alpha\in\Ord$, defínase la sucesión $(R_\alpha)$ de $\mathcal{C}$-ideales como 
$$R_{\alpha+1}=\{a\in A : \exists S\in \mathcal{C}(a) \ \text{con} \ S\subseteq R_\alpha\}$$
$$ R_\lambda =\bigcup\{R_\alpha : \alpha<\lambda\} \ \text{para } \ \lambda \ \text{ordinal límite}$$
Dado que $A$ es un conjunto, existe un $\alpha\in\Ord$ tal que $R_\alpha=R_\gamma \ \forall \ \gamma>\alpha$; sea $R_\infty$ el primer término de la sucesión donde esto sucede, y nótese que es el $\mathcal{C}$-ideal generado por $\{S_{x,y}:(x,y)\in\mathbb{D}\times\mathbb{D}\}$.

Supóngase que $(a,b)\times(c,d)\in R_\infty \ \forall a,b,c,d\in \mathbb{R}$. Así para un $\delta_0>0$, existe $\alpha_0\in\Ord$, el menor ordinal tal que $(-\tfrac{1}{3},\tfrac{1}{3})\times(-\delta_0,\delta_0)\in R_{\alpha_0}$, y nótese que $\alpha_0$ debe ser un ordinal sucesor, supóngase $\alpha_0=\beta_0+1$. Sean $u,v\in\mathbb{R}$ tales que $(u,v)\times(-\delta_0,\delta_0)\in R_{\beta_0}$. Considérese $n_0\in\mathbb{N}$ tal que $\frac{1}{3\cdot 2^{n_0}}<\delta_0$, y sea 
$$x_0=\sum\limits_{i=1}^{n_0}\frac{1}{2^{2i}}$$
y nótese que $x_0\in\mathbb{Q}$ tiene denominador $2^{n_0}$. Así, el rectángulo $R_0=R_{x_0,0}$ tiene lado $\delta_1=\tfrac{1}{2^{2n_0+1}}<2\delta_0$. Por otro lado, $x_0<\tfrac{1}{3}$, y por lo tanto el rectángulo $(x_0-\delta_1,x_0+\delta_1)\times(-\delta_0,\delta_0)\in R_{\beta_0}$.
Sea $\alpha_1$ un ordinal tal que 
$$(x_0-\delta_1,x_0+\delta_1)\times(-\delta_0,\delta_0)\in R_{\alpha_1}$$
y nótese qe también es ordinal sucesor. También,  Sean $n_1>n_0$ y   
$$x_1=\sum\limits_{i=1}^{n_1-n_0}\frac{1}{2^{2i}}$$
Se puede probar que el rectángulo
$$(x_0-\delta_1,x_0+\delta_1)\times(x_1\delta_1,x_1+\delta_1)$$
no está en $R_0$, ya que $x_1<\frac{1}{3\cdots 2^{2n_0}}$.Siguiendo el proceso inductivamente, se obtienen tres sucesiones: $(\alpha_i), (\delta_i)$ y $(x_i)$, donde $i\in \Ord$. Sin embargo, la sucesión $(\delta_i)$ es estrictamente decreciente, por lo que $\delta_\alpha\neq\delta_{\gamma} \ \forall \ \gamma>\delta,  \ \forall \ \alpha\in\Ord$. Lo anterior es absurdo, ya quela sucesión $(\delta_i)$ es subconjunto de $\mathbb{R}$, y es cardinable. Por lo tanto, $(-\frac{1}{3}, \frac{1}{3})\times (-\delta_0,\delta_0)\notin R$, y el marco $\mathcal{O}(\mathbb{D})\times\mathcal{O}(\mathbb{D})$ no es espacial; esto es, 
$\mathcal{O}(\mathbb{D}\times\mathbb{D})\not\simeq\mathcal{O}(\mathbb{D})\times\mathcal{O}(\mathbb{D})$.
\end{exa}

Sin embargo, sí es posible que $\bigoplus\limits_{i}\mathcal{O}S_i\simeq\mathcal{O}(\prod\limits_{i\in I}S_i)$. Es más:

\begin{prop}
Si $\{S_i\}_{i\in I}$ es una familia de espacios sobrios y el marco $\bigoplus\limits_{i\in I}\mathcal{O}(S_i)$ es espacial, entonces el morfismo $p_i^{\sharp}$ es un isomorfismo de marcos $\forall \ i \in I$.
\end{prop}
\begin{proof}
Como $\bigoplus\limits_{i\in I}\mathcal{O}(S_i)$ es sobrio, los espacios $\bigoplus\limits_{i\in I}\mathcal{O}(S_i)$ y $\mathcal{O}(Y)$ son isomorfos, bajo un isomorfismo $\varphi:\bigoplus\limits_{i\in I}\mathcal{O}(S_i)\to\mathcal{O}(Y)$ donde  $Y$ es el espacio de puntos de $\bigoplus\limits_{i\in I}\mathcal{O}(S_i)$, que es sobrio.\\
Sean $\iota_i: \mathcal{O}(S_i)\to \bigoplus\limits_{i\in I}\mathcal{O}(S_i)$ las inclusiones canónicas. Sean $q_i=\varphi\circ\iota_i$. Sean $f_i:2\to S_i$ funciones continuas, donce $2$ es el espacio de Sierpi\'nski. Considérese el morfismo $h:\bigoplus\mathcal{O}(S_i)\to\mathcal{O}(2)$ que factoriza los morfismos inducidos por el funtor de abiertos, $\{\mathcal{O}(f_i)\}$, y sea $f:2\to Y$ el morfismo único que se factoriza como $\mathcal{O}(f)=h\circ\varphi^{-1}$, ya que los marcos $2$ y $\mathcal{O}(Y)$ son espaciales.

Entonces, \begin{align*}
    \mathcal{O}(q_i\circ f)&=f_i\\
    &=h\circ\varphi^{-1}\circ\varphi\circ\iota_i\\
    &=h\circ\iota_i\\
    &=\mathcal{O}(f_i)
\end{align*}
Por lo que $q_i\circ f=f_i$. Por la propiedad universal del coproducto, existe un único isomorfismo $g:\bigoplus\limits_{i\in I}S_i\to Y$ tal que $q_i\circ g=p_i$. Así, se cumple que 
\begin{align*}
    \mathcal{O}(g)\circ\varphi\circ\iota_i&=\mathcal{O}(q_i\circ g)\\
    &=\mathcal{O}(p_i)\\
    &=p^\sharp\circ\iota_i
\end{align*}
Por lo anterior, $\mathcal{O}(g)\circ\varphi=p^\sharp$. Como $g$ es un isomorfismo, $\mathcal{O}(g)$ también lo es, y como $\varphi$ es isomorfismo, entonces $\mathcal{O}(g)\circ\varphi=p^\sharp$ es un isomorfismo.
\end{proof}
\begin{defn}
    Sean $A$ un marco y $a,b\in A$. Se dice que $a$ está muy por debajo de $b$, o $a\prec b$, si 
    $$\neg a\sup b=1$$
\end{defn}
\begin{defn}[Marco regular]
Un marco $A$ es regular si para todo $a\in A$ se cumple que
$$a=\Sup\{x\in A \mid x\prec a\}$$
\end{defn}
La definición anterior se relaciona con la de un espacio topológico regular:
\begin{defn}
    Un espacio $S\in\Top$ es regular si para todo $F\subset S$ cerrado y cualquier $x\S\setminus F$ existen abiertos idsjuntos $V_1, V_2$ tales que $s\in V_1$ y $F\subset V_2$.
    Nótese que lo anterior es equivalente a que para todo abierto $U\subset S$ se cumple que
    $$U=\bigcup \{V \in \mathcal{O}(S) \mid \overline{V}\subset U\}$$
\end{defn}
Gracias a la definición de la negación en el marco $\mathcal{O}(S)$, se cumple que $S$ es regular si y sólo si $\mathcal{O}(S)$ lo es.
\begin{defn}[Marco continuo]
    Sean $A$ un marco y $a,b\in A$. Se dice que $a$ está bien por debajo de $b$, o $a<<b$, si para todo $X\subset A$ se cumple que
    $$b\leq \Sup X\implies \exists F\subset X \ \text{finito tal que} \ a\leq \Sup F$$
    $A$ es un marco continuo si para todo $a\in A$ se cumple
    $$a=\Sup\{x\in A\mid x<<a\}$$
\end{defn}
Es fácil probar que se cumplen los siguientes dos resultados.
\begin{lemma}
\begin{itemize}
    \item $S\in\Top$ es localmente compacto si y sólo si el marco $\mathcal{O}(S)$ es continuo.
    \item Para cualesquiera $a,b$ en un marco $A$ se cumple que $a<<b\implies a\prec b$.
    \item Todo marco continuo es espacial.
    \item Todo maco compacto regular es espacial.
\end{itemize}
\end{lemma}
Gracias a lo anterior, ocurre que las categorías de Marcos continuos (ContFrm) y espacios topológicos localmente compactos (LKTop) son isomorfas. Así, la categoría de marcos regulares compactos (KRFrm) es isomorfa a la de espacios compactos Hausdorff (KHaus); este resultado es llamado Dualidad de Isbell.
Gracias a estos resultados se cumple la siguiente proposición.
\begin{prop}
Sean $S,T\in\Top$, con $T$ localmente compacto. Así, los marcos $\mathcal{O}(S)\times \mathcal{O}(T)$ y $\mathcal{O}(S\times T)$ son isomorfos.
\end{prop}
Las proposiciones de esta sección muestran algunos casos en los que el teorema de Tychonoff es equivalente en las categorías de marcos y espacios topológicos.

\chapter{Gavillas}

Recordaremos las noción de gavilla en el contexto
de espacios topológicos y veremos cómo generalizar esto
al contexto de marcos.

%\section*{SESIÓN 24: 7 DIC}
\section{Gavillas sobre espacios topológicos}

\begin{defn}
    Sean $E$, $S$ espacios topológicos
    y $f:E\to S$ una función continua.
    Una sección local de $f$ es una función continua $\sigma:U\to E$,
    donde $U$ es un abierto de $S$, tal que $f\sigma=\id_U$.
    Decimos que una sección $\sigma:U\to E$ de $f$ es global si $U=S$.
\end{defn}

Las secciones locales de una función continua $f:E\to S$
nos proporcionan información acerca del espacio $E$
y la manera en la que éste yace sobre $S$.
¿En qué condiciones se puede reconstruir $f:E\to S$ si solo
conocemos sus secciones?

\begin{defn}
    Sean $E$, $S$ espacios topológicos
    y $f:E\to S$ una función continua.
    Decimos que $f$ es étale (o un homeomorfismo local) si,
    para cada punto $e\in E$ existen vecindades
    $U_e\in\cal OE$ de $e$ y $V_{f(e)}\in\cal OE$ de $f(e)$,
    tales que la restricción
    $f_e:U_e\to V_{f(e)}$ de $f$ es un homeomorfismo.
\end{defn}

Veremos que la respuesta a la pregunta anterior
es que una función $f:E\to S$ está completamente determinada
por su secciones exactamente cuando $f$ es étale.
Para mostrar esto, pasaremos por el concepto de gavilla.

\begin{defn}
    Consideremos un espacio topológico $S$.
    Una pregavilla sobre $S$ es un funtor $(\cal OS)^\op\to\Con$.
\end{defn}

Por ejemplo, tomemos un espacio ``objetivo'' $Y$ y,
para cada abierto $U\subseteq S$,
consideremos los conjuntos
\begin{align*}
    CU &= \{f:U\to Y\mid f \text{ es continua }\}, \\
    KU &= \{f:U\to Y\mid f \text{ es constante }\}.
\end{align*}
Dada una inclusión $U\subseteq V$,
tenemos funciones de restricción $CV\to CU$ y $KV\to KU$
dadas por $f\mapsto f|_U$.
Estas asignaciones son funtoriales,
así que $C$ y $K$ son pregavillas sobre $S$.

Una pregavilla en $S$ asigna información local, abierto por abierto.
Queremos imponer una condición de tal modo que nos permita
convertir esa información local en información global.

\begin{defn}
    Sean $S$ un espacio topológico y $F:(\cal OS)^\op\to\Con$
    una pregavilla sobre $S$.
    
    Además, sean $U\in\cal OS$ un abierto y
    $\cal U = (U_\alpha\mid\alpha\in \Gamma)$
    una cubierta abierta de $U$.
    
    Decimos que una familia
    $(f_\alpha\in FU_\alpha\mid\alpha\in\Gamma)$
    subordinada a la cubierta $\cal U$
    es una familia compatible si se cumple
    \[
        f_\alpha|_{U_\alpha\cap U_\beta}
        =
        f_\beta|_{U_\alpha\cap U_\beta}
    \]
    para cualesquiera $\alpha,\beta\in\Gamma$.
    
    En otras palabras: las inclusiones
    $U_\alpha\cap U_\beta\to U_\alpha$
    y $U_\alpha\cap U_\beta\to U_\beta$ inducen
    dos funciones
    \[
        \prod_{\gamma\in\Gamma}FU_\gamma
        \rightrightarrows
        \prod_{\alpha,\beta\in\Gamma}F(U_\alpha\cap U_\beta)
    \]
    que mandan $(f_\gamma\mid\gamma\in\Gamma)$
    a $(f_\alpha|_{U_\alpha\cap U_\beta}\mid\alpha,\beta\in\Gamma)$
    y $(f_\beta|_{U_\alpha\cap U_\beta}\mid\alpha,\beta\in\Gamma)$,
    respectivamente.
    Entonces una familia
    $(f_\gamma\mid\gamma\in\Gamma)\in\prod_{\gamma\in\Gamma}FU_\gamma$
    es compatible si sus imágenes bajo estas dos funciones coinciden.
\end{defn}

\begin{defn}
    Sea $S$ un espacio topológico.
    Decimos que una pregavilla en $S$
    \[
        F:(\cal OS)^\op\to\Con
    \]
    es una gavilla si,
    para cualquier abierto $U\in\cal OS$, cualquier cubierta abierta
    $\cal U=(U_\alpha\mid \alpha\in\Gamma)$
    y cualquier familia compatible
    $(f_\alpha\in FU_\alpha\mid \alpha\in\Gamma)$,
    existe un único $f\in FU$ tal que
    \[
        f|_\alpha = f_\alpha
    \]
    para todo $\alpha\in\Gamma$.
    
    En otras palabras, $F$ es una gavilla si,
    para cualquier abierto $U$ de $S$ y
    cualquier cubierta abierta
    $(U_\alpha\mid\alpha\in\Gamma)$ de $U$,
    el diagrama
    \[
        FU
        \to
        \prod_{\gamma\in\Gamma} FU_\gamma
        \rightrightarrows
        \prod_{\alpha,\beta\in\Gamma}F(U_\alpha\cap U_\beta)
    \]
    es un igualador.
\end{defn}

Con estas herramientas,
podemos demostrar que los morfismos étales
están completamente determinados por sus secciones.

De hecho, demostraremos un resultado más fuerte,
y la afirmación anterior será un corolario.

Por un lado, sabemos que los funtores $(\cal OS)^\op\to\Con$
y las transformaciones naturales entre éstos
forman una categoría, a la cual denotamos como $\Gav(S)$.

\begin{defn}
    Dado un espacio topológico $S$, definimos la categoría
    $\Et(S)$ como sigue:
    \begin{itemize}
        \item
        Los objetos de $\Top/S$ son pares $(E,f)$,
        donde $E$ es un espacio topológico
        y $f:E\to S$ es una función étale.
        \[
            \begin{tikzcd}
                E \ar[d,"f"] \\ S
            \end{tikzcd}
        \]
        \item
        Dados objetos $(E,f)$, $(E',f')$ de $\Et(S)$,
        un morfismo $g:(E,f)\to(E',f')$ es una función
        continua $g:E\to E'$ tal que el siguiente diagrama conmuta
        \[
            \begin{tikzcd}
                E \ar[dr,"f"'] \ar[rr,"g"] && E' \ar[dl,"f'"]
                \\ & S
            \end{tikzcd}
        \]
    \end{itemize}
    Esta es, en efecto, una categoría,
    con la composición y la identidad
    heredadas de $\Top$.
    
    Nótese que, si en la definición de $\Et(S)$
    no pedimos que la función continua $f:E\to S$ sea coherente,
    seguimos obteniendo una categoría,
    a la cual denotamos como $\Top/S$.
\end{defn}

Ahora ¿qué relación hay entre gavillas y morfismos étales?

Notemos que, dado un objeto $(E,f)$ de $\Et(S)$,
tenemos una pregavilla $\Gamma_f$ en $S$ que,
a cada abierto $U\subseteq S$, le asigna las secciones locales
de $f$ con dominio $U$:
\[
    \Gamma_f U = \{\sigma:U\to E\mid f\sigma = \id_U\}
\]
y, a cada contención $U\subseteq V$, le asigna
la función de restricción $\Gamma V\to\Gamma U$.
De hecho, la pregavilla $\Gamma_f$ asociada a $(E,f)$ es una gavilla,
pues las funciones continuas se pueden pegar a lo largo de abiertos.
(Nótese que no usamos que $f$ fuera étale, por lo cual esta
construcción sigue funcionando en $\Top/S$).
Más aún, dado un morfismo $g:(E,f)\to(E',f')$ en $\Et(S)$,
obtenemos una transformación natural $g_*:\Gamma_f\to\Gamma_{f'}$
dada como $g_*(\sigma)=g\sigma$ pues,
dados abiertos $U\subseteq V$ de $S$, el diagrama
\[
    \begin{tikzcd}
        \Gamma_fV \ar[d,"g_*"'] \ar[r] & \Gamma_fU \ar[d,"g_*"] \\
        \Gamma_{f'}V \ar[r] & \Gamma_{f'}U
    \end{tikzcd}
\]
es conmutativo.

Luego, obtenemos un funtor $\Gamma:\Et(S)\to\Gav(S)$.
El resultado principal es el siguiente teorema.

\begin{thm}
    El funtor $\Gamma:\Et(S)\to\Gav(S)$ es una equivalencia.
\end{thm}
\begin{proof}[Bosquejo de la demostración]
    La demostración se hace construyendo el funtor
    $\Gav(S)\to\Et(S)$ inverso a $\Gamma$.
    Es decir, dada una gavilla $F$ en $U$,
    debemos construir un espacio topológico $E$ y un morfismo
    étale $f:E\to S$ tal que $\Gamma_f\simeq F$.
    
    Primero construiremos $E$ fibra a fibra.
    Dado $s\in S$, ponemos
    \[
        F_s = \Big(\bigsqcup_{U\in\cal OS,s\in U} FU\Big)/\simr_s
    ,\]
    donde $\sim_s$ es la relación de equivalencia en
    $\bigsqcup_{U\in\cal OS,s\in U}FU$ dada,
    para cualesquiera $\sigma\in FU$, $\sigma'\in F(U')$, como
    $\sigma\sim_s\sigma'$ si, y solo si, existe un vecindad abierta
    $U_s\subseteq U\cap U'$ de $s$
    tal que $\sigma|_{U_s}=\sigma'|_{U_s}$.
    A la clase de equivalencia de $\sigma\in FU$ bajo la relación
    $\sim_s$ la denotamos como $[\sigma]_s$.
    
    Después ponemos $T(F)=\bigsqcup_{s\in S}F_s$
    y definimos la proyección $f_F:T(F)\to S$
    mandando $[\sigma]_s\in T(F)$ a $s\in S$.
    Equipamos a $T(F)$ con la topología generada por los básicos
    \[
        B(\sigma,U) = \{[\sigma]_s\mid s\in U\}
    \]
    siempre que $\sigma\in FU$ y $U\in\cal OS$.
    Finalmente, se muestra que $f_F:T(F)\to S$ es étale
    y que esta construcción es inversa a $\Gamma$.
\end{proof}

\section{Gavillas sobre marcos}
Ahora, ¿cómo hacemos esto sobre un marco?
En realidad, la teoría se puede usar casi sin modificación.

\begin{defn}
    \leavevmode
    \begin{itemize}
        \item
        Una pregavilla sobre un marco $A$
        es un funtor $F:A^\op\to\Con$.
        Si $x\leq y\in A$, denotamos la función
        $Fy\to Fx$ inducida por $F$ como $f\mapsto f|_x$.
        \item
        Una pregavilla $F:A^\op\to\Con$ es separada si,
        para cualesquiera $X\subseteq A$ y $f,g\in F(\Sup X)$,
        se tiene
        \[
            (\forall x\in X,\; f|_x=g|_x)\implies f=g
        .\]
        \item
        Sea $F$ una pregavilla sobre $A$.
        Dado un subconjunto $X\subseteq A$,
        una familia $(f_x\in Fx\mid x\in X)$
        es compatible si $f_x|_{x\inf y}=f_y|_{x\inf y}$
        para cualesquiera $x,y\in X$.
        \item
        Una pregavilla $F:A^\op\to\Con$ es cotejada si,
        para cualquier subconjunto $X\subseteq A$
        y cualquier familia compatible
        $(f_x\in Fx\mid x\in X)$
        existe un $f\in F(\Sup X)$ tal que
        $f|_x=f_x$ para todo $x\in X$.
        \item
        Una pregravilla $F:A^\op\to\Con$ es una gavilla
        si es separada y cotejada.
    \end{itemize}
\end{defn}

\begin{exa}
    Sea $\Omega$ un marco.
    Dado $a\in\Omega$, consideremos
    \begin{align*}
        \Omega(a)
            &= \cal L(\down a)
            \subseteq\cal L\Omega, \\
        \Omega\<a\>
            &= \{X\in\cal L(\down a)\mid\Sup X=a\}
            \subseteq\cal L\Omega, \\
        \Omega[a]
            &= \down a
            \subseteq\Omega.
    \end{align*}
    Cada una de estas asignaciones define una pregavilla,
    donde las restricciones están dadas, para $a\leq b$, como
    \begin{align*}
        X &\mapsto \{x\inf b\mid x\in X\}, \\
        X &\mapsto \{x\inf b\mid x\in X\}, \\
        x &\mapsto x\inf b,
    \end{align*}
    respectivamente.
    Se verifica que, en general,
    \begin{itemize}
        \item $\Omega(\cdot)$ es cotejada pero no separada,
        \item $\Omega\<\cdot\>$ es separada pero no cotejada y
        \item $\Omega[\cdot]$ es gavilla.
    \end{itemize}
\end{exa}

Dada una pregavilla $F$ en un marco $\Omega$,
podemos obtener una gavilla $F^+$ en $\Omega$ como sigue.

Para cada $a\in\Omega$, ponemos
\begin{itemize}
    \item
    $\<a\> = \{X\subseteq\Omega\mid\Sup X=a\}$.
    \item
    $F\<a\>
    = \{(f_x\in Fx\mid x\in X)\text{ es compatible}\mid X\in\<a\>\}$
    \item
    $F^+(a)=F\<a\>/\simr$,
    donde $(f_x\in Fx\mid x\in X)\sim(g_y\inf Fy\mid y\in Y)$
    si existe $Z\in\<a\>$, $Z\subseteq X\cap Y$ tal que
    $af_z=g_z$ para todo $z\in Z$.
\end{itemize}
Se puede demostrar que $F^+$ es una gavilla y, más aún,
la asignación $F\mapsto F^+$ se extiende a un funtor
que resulta ser adjunto izquierdo
de la inclusión $\Gav(\Omega)\to[\Omega^\op,\Con]$
de las gavillas en las pregavillas.

Sin embargo, estas construcciones son muy largas y complicadas.
Se puede trabajar con las gavillas en un marco a través
de una categoría equivalente a $\Gav(\Omega)$ llamada la categoría
de $\Omega$-conjuntos y denotada como $\Con(\Omega)$,
pero para desarrollar esta teoría se necesitaría más tiempo.

%\section*{(SESIÓN 9: 7 OCT)}

\chapter{Marcos en teoría de anillos y módulos}

Ahora trataremos de dar una motivación algebraica para
estudiar los núcleos de un marco.
En realidad, el estudio de los núcleos se puede realizar
en un contexto más general que el de marcos.
A continuación damos un ejemplo de cómo se pueden usar
los núcleos para estudiar anillos y módulos.

\paragraph{Localizaciones}
Recordemos que, en teoría de anillos,
podemos localizar un anillo $A$ con respecto a un conjunto
multiplicativo $S\subseteq A$.
Por ejemplo, tomando $A=\Z$ y $S=\Z-\{0\}$,
obtenemos la localización $i:\Z\to\Q$.

El morfismo $i:\Z\to\Q$ induce dos funtores
\[
    \Mod_\Z\leftrightarrows\Mod_\Q
\]
llamados restricción y extensión de escalares.
Las categorías, al igual que los anillos,
tienen su propio concepto de localización.
La definición (que no haremos aquí) es tal que
los funtores $\Mod_\Z\leftrightarrows\Mod_\Q$
exhiben que $\Mod_\Q$ es una localización de $\Mod_\Z$.

\paragraph{Teorías de torsión}
La clase de los $\Z$-módulos (es decir, grupos abelianos)
contiene las clases $\scr T_t$ y $\scr F_t$
formadas por los $\Z$-módulos de torsión y los $\Z$-módulos
libres de torsión, respectivamente.
Notemos que $\scr T_t$ y $\scr F_t$ satisfacen:
\begin{itemize}
    \item
    $\Mod_\Z(M,N)=0$ para cualesquiera $M\in\scr T_t$
    y $N\in\scr F_t$.
    \item
    Si $\Mod_\Z(P,N)=0$ para todo $N\in\scr F_t$,
    entonces $P\in\scr T_t$.
    \item
    Si $\Mod_\Z(M,P)=0$ para todo $M\in\scr T_t$,
    entonces $P\in\scr F_t$.
\end{itemize}
Debido a que la pareja $(\scr T_t,\scr F_t)$ satisface estos
axiomas, decimos que es una teoría de torsión.
Además, como $\scr T_t$ es cerrada bajo submódulos,
decimos que $(\scr T_t,\scr F_t)$ es una teoría de torsión hereditaria.

\paragraph{Los ideales de $\Z$ y un colímite}
Consideremos el conjunto $\Lambda(\Z)$ de los ideales de $\Z$.
Como todos los ideales de $\Z$ son principales, tenemos
\[
    \Lambda(\Z)=\{\<n\>\mid n\in \Z\}
.\]
También consideraremos el conjunto $\nti\Z$
de los ideales de $\Z$ distintos de $0$.

Notemos que $\Lambda(\Z)$ es una retícula, con ínfimo $\inf=\cap$
y supremo $\sup=+$.
Además, el subconjunto $\nti\Z\subseteq\Lambda(\Z)$
satisface las siguientes propiedades:
\begin{itemize}
    \item es no vacío,
    \item cerrado bajo intersecciones y
    \item absorbe hacia arriba
    (es decir, si $I\in\nti\Z$ y $I\leq J$,
    entonces $J\in\nti\Z$).
\end{itemize}
Si un subconjunto de una retícula tiene estas propiedades,
decimos que es un filtro de la retícula.
En otras palabras, $\nti\Z$ es un filtro de $\Lambda(\Z)$.

Cada ideal $I$ de $\Z$ es, en particular, un $\Z$-módulo,
por lo cual podemos considerar el $\Z$-módulo $\Mod_\Z(I,\Z)$.
Además, dados ideales $I\leq J$ de $\Z$,
tenemos un morfismo de $\Z$-módulos
\[
    \phi^I_J:\Mod_\Z(J,\Z)\to\Mod_\Z(I,\Z)
\]
dado por la restricción: $\phi^I_J(f)=f|_I$.

Notemos que los morfismos $(\phi^I_J\mid I\leq J\in\Lambda(\Z))$
satisfacen
\begin{itemize}
    \item para todo $I$, tenemos $\phi^I_I=\id_{\Mod_\Z(I,\Z)}$ y
    \item siempre que $I\leq J\leq K$, tenemos
    $\phi^J_I\phi^K_J=\phi^K_I$. Esto es: $f|_J|_I=f|_I$.
\end{itemize}

En otras palabras: viendo al copo $\nti\Z$
como una categoría, tenemos un funtor
\[
    \Mod_\Z(-,\Z):(\nti\Z)^\op\to\Mod_\Z
.\]

En general, dado un conjunto dirigido $\scr I$
y una categoría $\cal C$,
un sistema dirigido en $\cal C$ indicado por $\scr I$
es un funtor $F:\scr I\to\cal C$.
Como $\nti\Z$ es codirigido (ya que es cerrado bajo ínfimos),
se sigue que $(\nti\Z)^\op$ es dirigido.
Es decir: el funtor
\[
    \Mod_\Z(-,\Z):(\nti\Z)^\op\to\Mod_\Z
\]
es un sistema dirigido en $\cal C=\Mod_\Z$,
indicado por $\scr I = (\nti\Z)^\op$.

Sean $\scr I$ un conjunto dirigido
y $F:\scr I\to\cal C$ un sistema dirigido.
Denotemos como $\sqsubseteq$ al orden en $\scr I$ y,
para cada morfismo $\alpha:i\to j$ en $\scr I$
(es decir, $i\sqsubseteq j$) usaremos la notación
$\phi_i^j=F(\alpha):F(i)\to F(j)$.
El límite directo de $F$ es un objeto $\cal C$,
comúnmente denotado $\varinjlim F$ o $\varinjlim_{i\in\scr I}F(i)$,
junto con una familia de morfismos
$(\eta_i:F(i)\to\varinjlim F \mid i\in\cal I)$
que satisfacen las siguientes condiciones:
\begin{itemize}
    \item Para cada $i\sqsubseteq j\in\scr I$,
    el siguiente diagrama es conmutativo:
    \[
        \begin{tikzcd}
            F(i) \ar[rr,"\phi_i^j"] \ar[dr,"\eta_i"']
            && F(j) \ar[dl,"\eta_j"] \\
                & \varinjlim F
        \end{tikzcd}
    \]
    Es decir, $\eta_j\phi_i^j=\eta_i$.
    \item Dado un objeto $X$ de $\cal C$
    y una familia de morfismos $(\mu_i:F(i)\to X\mid i\in\cal I)$
    tales que $\mu_j\phi_i^j=\mu_i$ (siempre que $i\sqsubseteq j$),
    entonces existe un único morfismo $\mu:\varinjlim F\to X$
    tal que el siguiente diagrama conmuta:
    \[
        \begin{tikzcd}
            F(i) \ar[rr,"\phi_i^j"] \ar[dr,"\eta_i"']
            \ar[ddr,"\mu_i"',bend right] 
            && F(j) \ar[dl,"\eta_j"] \ar[ddl,"\mu",bend left] \\
                & \varinjlim F \ar[d,"\mu"] \\
                & X
        \end{tikzcd}
    \]
    (siempre que $i\sqsubseteq j\in\scr I$).
\end{itemize}

Se puede demostrar que, para la categoría $\cal C=\Mod_\Z$,
los límites directos siempre existen
y están dados por
\[
    \varinjlim F = \Big(\bigsqcup_{i\in\scr I}F(i)\Big)/\simr
\]
donde $\simr$ es la relación de equivalencia en
$\bigsqcup_{i\in\scr I}F(i)$ definida, para $f\in F(i)$ y $g\in F(j)$,
como
\[
    f\sim g
    \ssi
    \exists k\geq i,j,\; \phi_i^k(f)=\phi_j^k(g)
\]
y donde los morfismos $\eta_i:F(i)\to\varinjlim_{i\in\scr I}F(i)$
son las proyecciones $f\mapsto [f]$ de $f\in F(i)$ a su clase
de equivalencia.

Ahora consideremos el conjunto dirigido $\scr I=(\nti\Z)^\op$
y el sistema dirigido
\begin{align*}
    \Mod_\Z(-,\Z):(\nti\Z)^\op&\to\Mod_\Z \\
    I&\mapsto \Mod_\Z(I,\Z).
\end{align*}
Para cada ideal $\<n\>\in\nti\Z$, definamos el morfismo
$\mu_n:\Mod_\Z(\<n\>,\Z)\to\Q$ dado por $\mu_n(f)=f(n)/n$.

Entonces, si $\<n\>\sqsubseteq \<m\>$ (es decir, $\<m\>\leq\<n\>$),
el diagrama
\[
    \begin{tikzcd}
      \Mod_\Z(\<n\>,\Z) \ar[rr,"{\phi_n^m}"] \ar[dr,"\mu_n"']
      && \Mod_\Z(\<m\>,\Z) \ar[dl,"\mu_m"] \\
      & \Q
    \end{tikzcd}
\]
es conmutativo.

\begin{exe}%[Alfredo $\checkmark$ ]
  Mostrar que el morfismo inducido en el límite directo
  \begin{align*}
      \mu : \varinjlim_{\<n\>\in\nti\Z}\Mod_\Z(\<n\>,\Z)
        &\to \Q \\
      [f] &\mapsto \frac{f(n)}{n}
  \end{align*}
  es un isomorfismo.
\end{exe}
\begin{sol}
    Primero veamos que $\mu$ está bien definida.
    Tomemos morfismos relacionados
    $f\sim g\in\bigsqcup_{\<n\>\in\nti\Z}\Mod_\Z(\<n\>,\Z)$.
    Es decir, $f:\<m\>\to\Z$ y $g:\<n\>\to\Z$ satisfacen
    \[
        f|_{\<k\>} = g|_{\<k\>}
    \]
    para alguna $k\in\Z$ con $m\mid k$, $n\mid k$.
    Es decir, $k=rm$, $k=sn$ para algunos $r,s\in\Z$.
    Luego, tenemos
    \begin{align*}
        \mu([g])
        &= \frac {g(n)} n
        = \frac {sg(n)}{sn} 
        = \frac {g(sn)}{sn} 
        = \frac {g(k)}{k} \\
        &= \frac {f(k)}{k} 
        = \frac {f(rm)}{rm} 
        = \frac {rf(m)}{rm} 
        = \frac {f(m)}{m} 
        = \mu([f]).
    \end{align*}
    Se sigue que $\mu$ está bien definida
    en las clases de equivalencia;
    es decir: no depende del representante.

    Ahora, dado $r/m\in\Q$, consideremos la función
    $f:\<m\>\to\Z$ dada por $am\mapsto ar$.
    En efecto, $f$ respeta sumas y productos por enteros,
    así que podemos considerar $[f]$.
    
    Queremos ver que la asignación $r/m\mapsto [f]$ no
    depende de $r$ y de $m$, sino solo del cociente $r/m$.
    
    Para esto, tomamos $s/n=r/m$ y
    debemos mostrar que $g:\<n\>\to\Z$
    dada como $an\mapsto as$ cumple $[f]=[g]$.
    Como $s/n=r/m$, entonces $sm=rn$, así que $mn$ cumple
    \begin{align*}
        f|_{\<mn\>}(amn)
        &= f(amn)
        = arn
        = asm
        = g(anm)
        = g|_{\<mn\>}(amn),
    \end{align*}
    por lo cual $f|_{\<mn\>}=g|_{\<mn\>}$ y $[f]=[g]$.
    
    Luego, la asignación $r/m\mapsto [(am\mapsto ar)]$
    es una función
    \[
        \xi:\Q\to\varinjlim_{\<n\>\in\nti\Z}\Mod_\Z(\<n\>,\Z)
    .\]
    Notemos que $\xi$ es $\Z$-lineal, ya que
    \begin{align*}
        \xi\left(a\frac r m + \frac s n\right)
        &= \xi\left(\frac{arn + ms}{mn}\right) \\
        &= \left( xmn \mapsto x(arn+ms) \right) \\
        &= (xmn \mapsto xarn+xms) \\
        &= (xmn \mapsto xarn) + (xmn \mapsto xms) \\
        &= a(xmn \mapsto xrn) + (xmn \mapsto xms) \\
        &= a\xi\left(\frac{rn}{mn}\right)
            + \xi\left(\frac{ms}{mn}\right) \\
        &= a\xi\left(\frac{r}{m}\right)
            + \xi\left(\frac{s}{n}\right).
    \end{align*}
    Finalmente, observemos que
    \begin{align*}
        \xi(\mu(r/m))
        &= \xi(am\mapsto ar) \\
        &= \frac{(am\mapsto ar)(m)}{m} \\
        &= \frac{r}{m} \\
        \mu(\xi([f]))
        &= \mu\left(\frac{f(n)} n \right) \\
        &= [an\mapsto af(n)] \\
        &= [an\mapsto f(an)] \\
        &= [f]
    .\end{align*}
    Esto muestra que $\xi$ es la inversa de $\mu$,
    así que tenemos un isomorfismo
    \[
        \begin{tikzcd}
        \mathbb Q \ar[r,shift left,"\mu"] &
        \displaystyle
        \varinjlim_{\<n\>\in\nti\Z}\Mod_\Z(\<n\>,\Z),
        \ar[l,shift left,"\xi"]
       \end{tikzcd} 
    \]
    Esto es lo que se quería.
\end{sol}

Ahora, ¿qué tiene que ver esto con núcleos?

\paragraph{Filtros de Gabriel}
Recordemos que $\nti\Z$ es un filtro de $\Lambda(\Z)$.
De hecho, tiene otras propiedades interesantes:
Dado cualquier ideal $I\in\nti\Z$, tenemos
\[
    (n:I)=\{k\in\Z\mid nk\in I\}\in\nti\Z
\]
para todo $n\in\Z$.
Además, si $J\in\nti\Z$, entonces
\[
    (\forall n\in J,\; (n:I)\in\nti\Z)\implies I\in\nti\Z
.\]
A un filtro con estas dos propiedades se le llama filtro de Gabriel.

\paragraph{Núcleos deferentes}
Se puede demostrar que el operador $j:\Lambda(\Z)\to\Lambda(\Z)$
dado como
\[
    j(I) = \{n\in\Z\mid(n:I)\in\nti\Z\}
\]
es un núcleo en $\Lambda(\Z)$, en el sentido de que es monótono,
infla, es idempotente y preserva ínfimos.
Más aún, el conjunto $N(\Lambda(\Z))$ de los núcleos en $\Z$
es un marco.
Adicionalmente, el núcleo $j$ satisface
\[
    j(n:I) = (n:j(I))
.\]
A un núcleo con esta propiedad se le llama núcleo deferente.

En particular, tomando el núcleo $j$ definido arriba,
se puede demostrar que su conjunto de puntos fijos es
\[
    \Lambda(\Z)_j = \{0\leq \Z\}
,\]
el cual es isomorfo a la retícula $\Lambda(\Q)$ de ideales de $\Q$.

En términos generales, hay una correspondencia
(que no desarrollaremos aquí)
entre los núcleos deferentes de $\Lambda(\Z)$,
los filtros de Gabriel en $\Lambda(\Z)$,
las teorías de torsión hereditaria de $\Mod_\Z$
y las localizaciones de $\Mod_\Z$.

Por ejemplo, al núcleo $j$ le corresponden
el filtro $\nti\Z$, la teoría de torsión
$(\scr T_t,\scr F_t)$ y la localización
$\Mod_\Z\to\Mod_\Q$.

\part{Apéndices}

\chapter{Teoría de categorías}
%\section*{(SESIÓN 1: 7 SEP)}

\section{Categorías}
Una categoría  $\mathcal{C}$ consiste de
\begin{itemize}
  \item una colección $\Ob\cal C$, cuyos elementos son llamados los
  objetos de $\cal C$;
  \item para cada par de objetos $A,B\in\Ob\cal C$, una
    colección $\cal C(A,B)$, cuyos elementos se llaman
    \emph{morfismos (o flechas) de $A$ en $B$}, de
    modo que cada $\cal C(A,B)$ es disjunto de los demás;
    es decir; si $A\neq A'$ o si $B\neq B'$, entonces
    $\cal C(A,B)\cap\cal C(A',B')=\emptyset$;
  \item para cualesquiera objetos $A,B,C\in\Ob\cal C$, una
    función
    \begin{align*}
        \circ:\cal C(B,C)\times\cal C(A,B)&\to\cal C(A,C) \\
        (f,g)&\mapsto f\circ g\equiv fg 
    \end{align*}
    denominada 'composición';
    \item para cada objeto $A\in\Ob\cal C$,
    una flecha distinguida $\id_A\in\cal C(A,A)$ llamada
      \emph{la flecha identidad} de $A$;
\end{itemize}
sujetos a las condiciones:
\begin{itemize}
  \item asociatividad: si $f\in\mathcal{C}(A,B),g\in\mathcal{C}(B,C),h\in\mathcal{C}(C,D)$, entonces $(h\circ g)\circ f = h\circ(g\circ f)$.
  \item identidad: para todo $f\in\mathcal{C}(A,B)$, se cumple
  que $f\id_A=f=\id_B f$.
\end{itemize}

\begin{obs}
Dependiendo del autor, el conjunto de morfismos, que aquí
denotamos como $\cal C(A,B)$, se puede escribir como
$\mathrm{Hom}(A,B)$,
$\mathrm{Hom}_{\cal C}(A,B)$, $(A,B)$, $[A,B]$, etc.
Además, pueden exigir que cada $\cal C(A,B)$ sea un conjunto,
pero para los propósitos de estas notas, esta clase puede no ser
cardinable.
\end{obs}

\begin{exa}\leavevmode
\begin{itemize}
    \item $\mathbb{Z}$ puede ser visto como categoría de, al
    menos, dos formas diferentes:
        \begin{itemize}
            \item Tomando $\Ob(\cal Z)=\{\bullet\}$ y
            $\cal
            Z(\bullet,\bullet)=\{\bullet\overset{n}{\to}\bullet\mid
            n\in\Z\}$, tomando la composición como la
            multiplicación usual en $\Z$ (nótese que aquí
            la composición es conmutativa),
            y la identidad es $1\in\Z$ ($1m=m=m1$
            se cumple trivialmente).
            \item Pensemos a $\Z$ con el orden dado por la divisibilidad, $(\Z, \leq_{div})$, donde $n\leq_{div}m$ si y sólo si $m=nk$ para algún $k\in \Z$.
            Para esta categoría, $\Ob(\Z)=\Z$ y
            $\Z(n,m)=\{(n,m)\}$ si y sólo si $n\leq_{div}m$.
        \end{itemize}
        \item En general, para cualquier conjunto parcialmente ordenado $(A,\leq)$ se puede pensar la categoría $\mathcal{C}$ dada por $\Ob\cal C=A$ y 
        \[
        \cal C(a,b) =
        \begin{cases}
            \{(a,b)\}, & m\leq n \\
            \emptyset, & m\nleq n.
        \end{cases}
        \]
        \item Similarmente, cualquier monoide $M$ se puede
        entender como una categoría con un solo objeto $\bullet$
        y definiendo $\cal C(\bullet,\bullet)=M$ y definiendo la
        composición como la operación del monoide.
        \item La categoría de conjuntos $\Con$, donde $\Ob(\Con)$
        consta de todos los conjuntos, $\Con(A,B)$ son las
        funciones de conjuntos $A\to B$ y utilizando la
        composición usual.
        \item Dado un campo $k$, se tiene la categoría $\Vect_k$,
        cuyos objetos son los espacios vectoriales sobre $k$, y
        las flechas son las transformaciones $k-$lineales.
        \item La categoría $\Top$, tomando como objetos los
        espacios topológicos, y las flechas son las funciones
        continuas.
        \item La categoría de campos $\Fld$, cuyos objetos son
        campos y sus morfismos son morfismos de anillos
        (preservan suma, multiplicación y mandan el $1$ al $1$).
        \item La categoría de extensiones de campos.
        $\Fld^\to$.
        Los objetos de $\Fld^\to$ son las
        extensiones de campos, esto es, los morfismos de $\Fld$.
      Dados $(k\xto f L),(k'\xto gL')\in\Ob(\Fld^\to)$,
      los morfismos de $f$ a $g$ en la categoría $\Fld^\to$
      son morfismos de extensiones; esto es:
      pares de morfismos de campos que son compatibles con
      las extensiones:
      \[
        \Fld^\to(f,g)
        = \left\{
          (u,v)\in \Fld(k,k')\times \Fld(L,L')
          \middle|
          \begin{tikzcd}
            L \ar[r,"v"'] & L' \\
            k \ar[u,"f"'] \ar[r,"u"] & k' \ar[u,"g"]
            \ar[equal,from=1-1,to=2-2,shorten=5mm]
          \end{tikzcd}
        \right\}
      .\]
    Dados $f,g,h\in\Ob(\Fld^\to)$, la composición se hereda de la
    composición en $\Fld$:
    \begin{align*}
      \Fld^\to(f,g)\times\Fld^\to(g,h) &\to \Fld^\to(f,h) \\
      ((u,v) , (x,y)) &\mapsto (x,y)(u,v)=(xu,yv).
    \end{align*}
    En un diagrama:
    \[
        \begin{tikzcd}
          L \ar[r,"v"'] \ar[rr,bend left,"yv"] & L' \ar[r,"y"'] & L''\\
          k \ar[u,"f"'] \ar[r,"u"] \ar[rr,bend right,"xu"']
          & k' \ar[u,"g"] \ar[r,"x"] & k''\ar[u,"h"]
          \ar[equal,from=1-1,to=2-2,shorten=5mm]
          \ar[equal,from=1-2,to=2-3,shorten=5mm]
        \end{tikzcd}
    .\]
    La conmutatividad del rectángulo exterior se hereda de la
    conmutatividad de los dos cuadrados:
      \[
          hxu = ygu = yvf
      .\]
    La asociatividad de la composición se hereda de la
    asociatividad de la composición de morfismos de campos
    \[
        \begin{tikzcd}
          L \ar[r,"v"'] & L' \ar[r,"y"'] & L'' \ar[r,"b"'] & L'''\\
          k \ar[u,"f"'] \ar[r,"u"]
          & k' \ar[u,"g"] \ar[r,"x"]
          & k''\ar[u,"h"] \ar[r,"a"]
          & k''' \ar[u,"j"]
          \ar[equal,from=1-1,to=2-2,shorten=5mm]
          \ar[equal,from=1-2,to=2-3,shorten=5mm]
          \ar[equal,from=1-3,to=2-4,shorten=5mm]
        \end{tikzcd}
    .\]
    Esto es:
    \begin{align*}
        ((a,b)(x,y))(u,v)
        &= (ax,by)(u,v) \\
        &= (axu,byv) \\
        &= (a,b)(xu,yv) \\
        &= (a,b)((x,y)(u,v))
    \end{align*}
    La identidad de la extensión $f:k\to L$ es
    $\id_f = (\id_k,\id_L):f\to f$.
    En efecto, dadas $(u,v):f\to g$ y $(c,d):h\to f$, tenemos
    \begin{align*}
        (u,v)(\id_k,\id_L) &= (u \id_k,v \id_L) = (u,v) \\
        (\id_k,\id_L)(c,d) &= (\id_k c,\id_L d) = (c,d).
    \end{align*}
\end{itemize}
\end{exa}


\section{Funtores}
    Para comparar los objetos de una categoría, utilizamos las
    flechas de la categoría, y ahora, además, para comparar
    categorías, definimos el concepto de funtor.
    Por ejemplo, si tenemos una flecha entre espacios topológicos
    , esta flecha es una función continua, lo que significa que
    respeta la estructura,en el sentido de que la premiagen de
    abiertos es abierta; un morfismo de grupos respeta la
    estructura del grupo; un morfismo de anillos respeta la
    estructura del anillo, etc.
    Con esto en mente, tenemos la definición de funtor:
    \begin{defn}[Funtor]
        Para dos categorías $\mathcal{C,D}$, un funtor $F:\mathcal{C\to D}$ actua sobre los objetos y las flechas, de manera que consiste de lo siguiente:
        \item Una asignación 
            \begin{align*}
                Ob(\mathcal{C}) & \longrightarrow Ob(\mathcal{D}) \\
                A & \to F(A)
            \end{align*}
        \item Para cada $A,A'\in \mathcal{C}$, una asignación
            \begin{align*}
                \mathcal{C}(A,A') & \longrightarrow D(FA,FA') \\
                f & \to F(f) \\
            \end{align*}
        Que además cumple que $F(id_A)=id_{FA}$. 
    \end{defn}
    
    \begin{exa}
    \item Dada cualquier categoría $\cal C$, el functor identidad
        $\id_{\cal C}:\cal C\to\cal C$ manda todo objeto a sí mismo y todo
        morfismo a sí mismo.
    \item En la categoría de grupos abelianos $\Z\ds\Mod$, para
    un grupo abeliano $G$,     definimos a $TG$ como el grupo de
    torsión, que consta de todos los elementos de $G$ de orden
    finito. Si $G=TG$ decimos que $G$ es de torsión, y si $TG=0$
    decimos que $G$ es libre de torsión.
    \end{exa}
    
    \begin{exe}%[Armando $\checkmark$]
        Mostrar que la construcción del grupo de torsión
        es un endo-funtor $T:\Z\ds\Mod\to\Z\ds\Mod$.
        \begin{sol}
    Primero, sean $a,b\in T_G$ arbitrarios, entonces, existen $n,m\in\Z^+$ tales que
    \begin{equation*}
        a^n=e,\ b^m=e,\ e\in G \text{ el neutro de } G.
    \end{equation*}
    Si consideramos a $p:=mn$, tenemos que 
    \begin{align*}
        (ab)^p & = a^p b^p \\
               & = (a^n)^m (b^m)^n \\
               & = e^m e^n \\
               & = e \cdot e = e
    \end{align*}
    con $p=mn\in\Z^+$. Ya que $a,b$ son arbitrarios, se sigue que $ab\in T_G$ y en consecuencia $T_G$ es cerrado bajo el producto de $G$.\\
    Ahora, sea $c\in T_G$ arbitrario, entonces existe $k\in\Z^+$ tal que $c^k=e$. Ahora nótese que:
    \begin{align*}
        cc^{-1} & = e \\
        (cc^{-1})^k & = e^k = e \\
        \underbrace{c^k}_{=e}(c^{-1})^k & = e \\
        (c^{-1})^k & = e,\quad k\in\Z^+.
    \end{align*}
    Así, como $c$ es arbitrario, obtenemos que $c^{-1}\in T_G$ y por ende $T_G$ contiene a los inversos.\\
    Con lo anterior, concluimos que $T_G$ es un subgrupo de $G$ y por lo tanto, ya que $G$ es arbitrario, el functor $T$ manda objetos de $\Z-\mathrm{Mod}$ en objetos de $\Z-\mathrm{Mod}$.
    Continuando, para una función $(A\overset{f}{\to}B)\in \Z-\mathrm{Mod}$, nótese que $(T_A\overset{Tf}{\to}T_B)$ se define cómo $Tf=f\mid_{T_A}$, la restricción de $f$ en $T_A$.
    Ahora, para $a\in T_A$ arbitrario, se cumple que $a^n=e$ para algún $n\in\Z^+$. Luego:
    \begin{align*}
        f(a^n) = f(e) & = e \\
        f\left(\underbrace{a\cdot a \cdots a}_{n \text{ veces}}\right) & = e \\
        \text{Como $f\in Ab$ ,} \underbrace{f(a)f(a)\cdots f(a)}_{n\text{ veces}} & = e \\
        \left(f(a)\right)^n & = e\\
    \end{align*}
    Así, $(Tf)(a)=f(a)\in T_B$, y cómo $a$ es arbitrario, se tiene que $Tf:T_A\to T_B$ está bien definido.\\
    Luego, nótese que $(Tf)(e)=f(e)=e$, y se tiene que $e^1 = e$, por tanto, $Tf$ preserva al neutro.\\
    Con esto, $Tf$ es un morfismo de Grupos Abelianos.\\
    Finalmente, es claro que $T1_A=1_{T_A}$, por lo tanto $T$ preserva morfismos, y en conclusión, es un endo-functor de $\Z-\mathrm{Mod}$. 
\end{sol}
    \end{exe}

Adicionalmente, los functores deben respetar la composición de las categorías en una de dos maneras, que determinan la varianza del functor.
\begin{defn}[Functor covariante y contravariante]
    Dados dos objetos $A,B\in\mathcal{C}$, un functor F es covariante si
    \begin{equation*}
        F(A\overset{f}{\to}B)=FA\overset{Ff}{\to}FB
    \end{equation*}
    y es contravariante si
    \begin{equation*}
        F(A\overset{f}{\to}B)=FA\overset{Ff}{\leftarrow}FB
    \end{equation*}
    para todo $f\in\mathcal{C}(A,B)$.
    Con esto, se tiene que, para cualesquiera dos flechas $f,g$ compatibles (que se pueden componer), se tiene que un functor $F$ cumple que:
    \begin{equation*}
        F(gf)=F(g)F(f)
    \end{equation*}
    si es covariante, y 
    \begin{equation*}
        F(gf)=F(f)F(g)
    \end{equation*}
    si es contravariante.
\end{defn}
Finalmente, introducimos unas propiedades adicionales de los functores.
\begin{defn}[Fidelidad]
    Un functor $F$ es fiel si, para cada $A,A'\in\mathcal{C}$ la función 
    \begin{align*}
        \mathcal{C}(A,A') & \to \mathcal{D}(FA,FA')\\
        f & \to F(f)
    \end{align*}
    es inyectiva.
\end{defn}
\begin{defn}[Plenitud]
    Un functor $F$ es pleno si, para cada $A,A'\in\mathcal{C}$ la función 
    \begin{align*}
        \mathcal{C}(A,A') & \to \mathcal{D}(FA,FA')\\
        f & \to F(f)
    \end{align*}
    es suprayectiva.
\end{defn}

\section{Transformaciones naturales}
    Ahora que podemos comparar categorías mediante los functores, queremos herramientas que nos permitan comparar dos functores entre dos categorías. Para cumplir esta idea, se creó el concepto de transformación natural.
    \begin{defn}[Transformación natural]
        Dados dos functores $F,G:\mathcal{C\to D}$, una transformación natural $\alpha:F\to G$ es una familia $(F(A)\overset{\alpha_A}{\to}G(A))_{A\in\mathcal{C}}$ de flechas de $\mathcal{D}$ tal que, para toda flecha $(A\overset{f}{\to}A')\in\mathcal{C}$, se cumple que:
        \begin{equation*}
            G(f)\circ\alpha_A = \alpha_{A'}\circ F(f).
        \end{equation*}
        Aquí, los $(\alpha_\bullet)_{A\in\mathcal{C}}$ se llaman los componentes de la transformación.
    \end{defn}
    Y además, podemos componer transformaciones naturales:\\
    Si $F,G,H:\mathcal{C\to D}$ son functores, y $\alpha:F\to G$,$\beta:G\to H$ son transformaciones naturales entre los functores, entonces, la composición $\beta\alpha:F\to H$ es una transformación natural que va del functor $F$ al functor $H$.
    
    Estas transformaciones se llaman 'naturales' porque precisamente aparecen de forma 'natural' en el ámbito matemático.
    
    Támbien, se denota por $[\mathcal{C,D}]$ a la clase de todas las transformaciones naturales de $\mathcal{C}$ en $\mathcal{D}$, y támbien se le suele llamar la 'exponenciación', y se denota $\mathcal{D^C}$.
    
    \begin{defn}[Isomorfismo natural]
        Se dice que una transformación natural es un isomorfismo natural precisamente cuando es un isomorfismo en $\mathcal{D^C}$.
    \end{defn}
    \begin{exe}%[Yareli $\checkmark$ ]
    (*) Probar que la exponenciación es una categoría.
\end{exe}
\begin{proof}
  Consideramos la clase de los funtores $F\colon C\to D$. Para las categorías $C,D$ fijas.\\
Consideramos las transformaciones naturales como morfismos.\\
Sean $F,G,H,I:C\to D$ funtores y $\alpha\colon F\to G$, $\beta\colon G\to H$ y $\gamma\colon H\to I$ transformaciones naturales. Tenemos que el siguiente diagrama

\[
\begin{tikzcd}
F(A) \arrow[d, "F(f)"'] \arrow[r, "\alpha_A"] & G(A) \arrow[d, "G(f)" description] \arrow[r, "\beta_A"] & H(A) \arrow[d, "H(f)" description] \arrow[r, "\gamma_A"] & I(A) \arrow[d, "I(f)"] \\
F(A') \arrow[r, "\alpha_{A'}"']               & G(A') \arrow[r, "\beta_{A'}"']                          & H(A') \arrow[r, "\gamma_{A'}"']                          & I(A')                 
\end{tikzcd}
\]

conmuta. Es decir, para cada $A\in C$,
\[\alpha_{A'}\circ F(f)=G(f)\circ \alpha_A \qquad \beta_{A'}\circ G(f)=H(f)\circ \beta_A \qquad \gamma_{A'}\circ H(f)=I(f)\circ \gamma_A.\]
\begin{itemize}
\item[\blacksmiley{}] \textit{La composición es una transformación natural.}\\ Definimos $\beta\alpha\colon F\to H$ a la familia $(F(A)\xrightarrow{\beta_A\circ \alpha_A} H(A))$ de $D$.\\
Sea $(A\xrightarrow{f}A')\in C$. Tenemos que
\begin{align*}
\beta_{A'}\circ(\alpha_{A'}\circ F(f))&=\beta_{A'}\circ(G(f)\circ \alpha_A)\\
&=(\beta_{A'}\circ G(f))\circ \alpha_A\\
&=(H(f)\circ\beta_A)\circ\alpha_A.
\end{align*}
Por lo que $(\beta_{A'}\circ\alpha_{A'})\circ F(f)=H(f)\circ(\beta_A\circ\alpha_A)$, es decir, el siguiente diagrama
\[
\begin{tikzcd}
F(A) \arrow[d, "F(f)"'] \arrow[r, "\beta_A\circ \alpha_A"] & H(A) \arrow[d, "H(f)"] \\
F(A') \arrow[r, "\beta_{A'}\circ\alpha_{A'}"']             & H(A')                 
\end{tikzcd}
\]
conmuta.
\item[\blacksmiley{}] \textit{La composición es asociativa.}\\
Sabemos que $\gamma\circ (\beta\circ\alpha)=(\gamma\circ\beta)\circ\alpha$ ya que $\gamma_A\circ(\beta_A\circ\alpha_A)=(\gamma_A\circ\beta_A)\circ\alpha_A$ para cada $(A\xrightarrow{f} A')\in C$.
\item[\blacksmiley{}] \textit{$I_F$ es una transformación natural.}\\
Sea $F\colon C\to D$ un funtor. Definimos $I_F\colon F\to F$ como la familia $(F(A)\xrightarrow{I_A}F(A))\in D$, donde $I_A$ es el morfismo identidad de $F(A)$, para cada $A\in C$.\\
Sea $(A\xrightarrow{f} A')\in D$. Sabemos que $I_{A'}\circ F(f)=F(f)=F(f)\circ I_A$. Por lo que el diagrama
\[
\begin{tikzcd}
F(A) \arrow[d, "F(f)"'] \arrow[r, "I_A"] & F(A) \arrow[d, "F(f)"] \\
F(A') \arrow[r, "I_{A'}"']               & F(A')                 
\end{tikzcd}
\]
conmuta. Es decir, $I_F$ es una transformación natural.
\item[\blacksmiley{}] \textit{Identidad.}\\
Sean $\alpha\colon F\to G$ y $\beta\colon H\to F$ transformaciones lineales, sabemos que $\alpha\circ I_F=\alpha$ y $I_F\circ \beta=\beta$, ya que $\alpha_A\circ I_A=\alpha_A$ y $I_A\circ\beta_A=\beta_A$, para cada $A\in C$.
\end{itemize}
\end{proof}

Además, dados dos functores $F,G\in[\mathcal{C,D}]$, $F(A)\simeq G(A)$ es la naturalidad en $A$ si $F,G$ son naturalmente isomorfos.

Ahora un ejemplo:
Sean $V\in\Vect_k^{<\infty}$ de la categoría de $k-$espacios vectoriales de dimensión finita, y consideramos su espacio dual $V^*=\Hom(V,k)$, esto es una transformación natural $()^*:\Vect_k^{<\infty}\to\Vect_k^{<\infty}$, y además se tiene un iso-natural $V\overset{\alpha_V}{\simeq} V^{**}$, dado por la evaluación en $v$, $v\in V$:
    \begin{align*}
        \alpha_V(v)\in V^{**} & = \Hom(V^*,k) \\
        \alpha_V(v)(\phi) & = \phi(v)
    \end{align*}
Esto determina una transformación natural $\alpha:\id\to(\bullet)^{**}$, que además es un isomorfismo canónico (se llama así ya que esta dado de forma 'no-arbitraria').

Con estos conceptos, se puede construir la definición de categorías equivalentes.

La idea es como sigue: Queremos que $\mathcal{C\equiv D}$ signifique que existen dos functores $F:\mathcal{C\to D}$, $G:\mathcal{C\leftarrow D}$ tales que $GF\equiv 1_\mathcal{C}$ y $FG\equiv 1_\mathcal{D}$. Esto quiere decir que hay isomorfismos naturales $\eta:1_\mathcal{C}\to Gf$ y $\varepsilon: FG\to1_\mathcal{D}$.

\begin{defn}
    Un functor $F\in [\mathcal{C,D}]$ es escencialmente suprayectivo en objetos si, para todo $D\in\mathcal{D}$, existe un $A\in\mathcal{D}$ tal que $F(A)\simeq D$.
\end{defn}

Con esta definición, podemos observar que un functor es una equivalencia si y sólo si es pleno, fiel y esencialmente suprayectivo en objetos.
\begin{exe}%[Alfredo $\checkmark$ ]
    (**) Probar que un funtor es una equivalencia ssi es
      esencialmente suprayectivo y fielmente pleno.
\end{exe}
\begin{sol}
    Primero probaremos el siguiente lema.
    \begin{lemma}
        Si $\alpha:F\to G$ es un isomorfismo natural entre dos funtores
        $F,G:\cal C\to\cal D$, cada componente $\alpha_A:FA\to GA$ de
        $\alpha$ es un isomorfismo en $\cal D$.
    \end{lemma}
    \begin{proof}
        Como $\alpha:F\to G$ es un isomorfismo, existe una trasformación
        natual $\alpha^{-1}:G\to F$ tal que
        \begin{align*}
            \alpha\alpha^{-1} &= \id_G
                & \alpha\alpha^{-1} &= \id_F
        \end{align*}
        Esto significa que, al fijarnos en
        las componentes en cualquier objeto $A$ de $\cal C$, tenemos
        \begin{align*}
                \alpha_A(\alpha^{-1})_A
                = (\alpha\alpha^{-1})_A
                &= (\id_G)_A
                = \id_{GA} \\
                (\alpha^{-1})_A\alpha_A
                =(\alpha^{-1}\alpha)_A
                &= (\id_{F})_A
                = \id_{FA}
        \end{align*}
        Luego, $\alpha_A$ es un isomorfismo con inverso
        $(\alpha_A)^{-1}=(\alpha^{-1})_A$.
        En particular, la notación $\alpha^{-1}_A$ no es ambigua.
    \end{proof}
    Ahora sí, continuamos con el ejercicio.
    Sea $F:\cal C \to \cal D$ una equivalencia.
    Entonces hay otro funtor $G:\cal D\to \cal C$ e isomorfismos
    \begin{align*}
        \epsilon : FG &\simeq \id_{\cal D} & \eta : \id_{\cal C} &\simeq GF.
    \end{align*}
    \begin{itemize}
        \item 
        Primero probaremos que $F$ es fiel.
        Supongamos que $f,g:A\to B$ son morfismos de $\cal C$ tales que
        $Ff = Fg$.
        Aplicando $G$, obtenemos $GFf=GFg$.
        Luego, como $\eta$ es transformación natural, tenemos los siguientes
        diagramas conmutativos
        \[
        \begin{tikzcd}
            GFA \ar[d,"GFf"'] & A \ar[l,"\eta_A"',"\sim"] \ar[d,"f"] \\
            GFB & B \ar[l,"\eta_B","\sim"']
            \com{1-1}{2-2}
        \end{tikzcd}
        \hspace{20mm}
        \begin{tikzcd}
            GFA \ar[d,"GFg"'] & A \ar[l,"\eta_A"',"\sim"] \ar[d,"g"] \\
            GFB & B \ar[l,"\eta_B","\sim"']
            \com{1-1}{2-2}
        \end{tikzcd}
        ,\]
        donde $\eta_A$ y $\eta_B$ son isomorfismos, por el lema que probamos.
        Recordando que $GFf=Gfg$, tenemos
        \begin{align*}
            f
            &= (\eta_B^{-1})(GFf)(\eta_A) \\
            &= (\eta_B^{-1})(GFg)(\eta_A) \\
            &= g,
        \end{align*}
        como se quería.
        
        \item
        Ahora veremos que $F$ es pleno.
        Sea $g:FA\to FB$ un morfismo en $\cal D$.
        Queremos construir un morfismo $f:A\to B$ tal que $Ff=g$.
        Como $G$ es el inverso de $F$ (salvo iso),
        el candidato natural sería $Gg$.
        El problema es que este es un
        morfismo de $GFA$ en $GFB$.
        Podemos intentar arrerglar esto recordando que los componentes de
        la transformación $\eta:\id_{\cal C} \to GF$ son isomorfimos.
        Consideramos la composición $h=(\eta_B^{-1})(Gg)(\eta_A)$:
        \[
        \begin{tikzcd}
            GFA \ar[d,"Gg"'] & A \ar[l,"\eta_A"',"\sim"] 
            \ar[d,"h",dotted]\\
            GFB & B \ar[l,"\eta_B","\sim"']
        \end{tikzcd}
        .\]
        Aplicando $F$, tenemos
        \[
        \begin{tikzcd}
            FA \ar[d,"g"]
                & \ar[l,"\epsilon_{FA}"',"\sim"] FGFA \ar[d,"FGg"']
                & FA \ar[l,"F\eta_A"',"\sim"]  \ar[d,"Fh"]\\
            FB  & FGFB \ar[l,"\epsilon_{FB}","\sim"']
                & FB \ar[l,"F\eta_B","\sim"']
        \end{tikzcd}
        ,\]
        lo cual nos dice que $Fh$ y $g$ difieren por un isomorfismo.
        Tendríamos $Fh=g$ si fuera el caso que
        $(\epsilon_{FA})(F\eta_A)=\id_{FA}$
        y que $(\epsilon_{FB})(F\eta_B)=\id_{FB}$.
        Sin embargo, esto no es cierto, en general.
        
        Para remediar esto, en lugar de tomar $h$, tomamos la composición
        $f$ como
        \[
        \begin{tikzcd}
            GFA \ar[d,"Gg"']
            & GFGFA \ar[l,"GF\eta_A^{-1}"']
            & GFA \ar[l,"G\epsilon_{FA}^{-1}"']
            & A \ar[l,"\eta_A"']
            \ar[d,"f",dotted]\\
            GFB
            & GFGFB \ar[l,"GF\eta_B^{-1}"']
            & GFB \ar[l,"G\epsilon_{FB}^{-1}"']
            & B \ar[l,"\eta_B"']
        \end{tikzcd}
        ,\]
        de modo que, al aplicar $F$, tenemos
        \[
        \begin{tikzcd}
            FA \ar[d,"g"]
            & FGFA \ar[d,"FGg"'] \ar[l,"\epsilon_{FA}"']
            & FGFGFA \ar[l,"FGF\eta_A^{-1}"']
            & FGFA \ar[l,"FG\epsilon_{FA}^{-1}"']
            & FA \ar[l,"F\eta_A"']
            \ar[d,"Ff",dotted]\\
            FB
            & FGFB \ar[l,"\epsilon_{FB}"']
            & FGFGFB \ar[l,"FGF\eta_B^{-1}"']
            & FGFB \ar[l,"FG\epsilon_{FB}^{-1}"']
            & FB \ar[l,"F\eta_B"']
        \end{tikzcd}
        .\]
        La situación puede parecer peor, pero la naturalidad nos salva.
        Agregando arriba y abajo los cuadrados conmutativos que nos
        da la condición de naturalidad, tenemos
        \[
        \begin{tikzcd}
            & FA \ar[equal,dl]
            & FGFA \ar[l,"F\eta_A^{-1}"']
            & FA \ar[l,"\epsilon_{FA}^{-1}"']
            \\
            FA \ar[d,"g"]
            & FGFA \ar[d,"FGg"'] \ar[u,"\epsilon_{FA}"]\ar[l,"\epsilon_{FA}"']
            & FGFGFA \ar[l,"FGF\eta_A^{-1}"'] \ar[u,"\epsilon_{FGFA}"]
            & FGFA \ar[l,"FG\epsilon_{FA}^{-1}"'] \ar[u,"\epsilon_{FA}"]
            & FA \ar[l,"F\eta_A"']
            \ar[d,"Ff",dotted]
            \\
            FB
            & FGFB \ar[l,"\epsilon_{FB}"']\ar[d,"\epsilon_{FB}"']
            & FGFGFB \ar[l,"FGF\eta_B^{-1}"'] \ar[d,"\epsilon_{FGFB}"]
            & FGFB \ar[l,"FG\epsilon_{FB}^{-1}"'] \ar[d,"\epsilon_{FB}"]
            & FB \ar[l,"F\eta_B"']
            \\
            & FB \ar[equal,ul]
            & FGFB \ar[l,"F\eta_B^{-1}"]
            & FB \ar[l,"\epsilon_{FB}^{-1}"]
        \end{tikzcd}
        .\]
        Siguiendo el camino exterior, obtenemos que
        \[
            (F\eta_B^{-1})(\epsilon_{FB}^{-1})(\epsilon_{FB})(F\eta_B)Ff
            = g(F\eta_A^{-1})(\epsilon_{FA}^{-1})(\epsilon_{FA})(F\eta_A)
        .\]
        Es decir, $Ff=g$.
        
        \item
        Con el lema que probamos, es fácil ver que $F$ es
        esencialmente suprayectivo.
        En efecto, 
        para cualquier objeto $B$ de $\cal D$, el componente
        $\epsilon_B:FGB\to B$ de $\epsilon:FG\to\id_{\cal D}$ es un
        isomorfismo, así que $B$ es isomorfo a un objeto en la
        imagen de $F$.
    \end{itemize}
    Ahora la otra implicación.
    Supongamos que $F:\cal C\to\cal D$ es fielmente pleno
    y esencialmente suprayectivo.
    Queremos definir un funtor $G:\cal C\to \cal D$ que haga de
    inverso de $F$ (salvo iso).
    Como $F$ es esencialmente suprayectivo, el axioma de
    elección nos permite elegir, para cada objeto $B$ de $\cal D$,
    un objeto $GB$ de $\cal C$ y un isomorfismo
    $\epsilon_B:FGB\xrightarrow{\sim} B$.
    
    Falta definir la acción de $G$ en morfismos.
    Dado $g:B_1\to B_2$ en $\cal D$, definimos
    $f=(\epsilon_{B_2})^{-1}g(\epsilon_{B_1}):FGB_1\to FGB_2$, de tal
    modo que
    \[
        \begin{tikzcd}
            B_1 \ar[d,"g"']
            & FGB_1 \ar[l,"\epsilon_{B_1}"'] \ar[d,"f",dotted] \\
            B_2 & FGB_2 \ar[l,"\epsilon_{B_2}"]
            \com{1-1}{2-2}
        \end{tikzcd}
    .\]
    Como $F$ es fielmente pleno, podemos definir a $Gg:GB_1\to GB_2$
    como el único morfismo que satisface $FGg=f:FGB_1\to FGB_2$.
    
    Veremos que $G$ es un funtor.
    Si tomamos morfismos
    \[
        \begin{tikzcd}
            B_1 \ar[d,"g"'] \\
            B_2 \ar[d,"h"'] \\
            B_3
        \end{tikzcd}
    \]
    entonces, por definición, $G(hg)$, $Gh$ y $Gg$
    son los únicos morfismos tales que los diagramas
    \[
        \begin{tikzcd}
            B_1 \ar[d,"g"'] & FGB_1 \ar[l,"\epsilon_{B_1}"'] \ar[dd,"FG(hg)"] \\
            B_2 \ar[d,"h"'] \\
            B_3 & FGB_2 \ar[l,"\epsilon_{B_3}"']
            \com{1-1}{3-2}
        \end{tikzcd}
        \hspace{10mm}
        \begin{tikzcd}
            B_1 \ar[d,"g"'] & FGB_1 \ar[l,"\epsilon_{B_1}"'] \ar[d,"FGg"] \\
            B_2 \ar[d,"h"'] & FGB_2 \ar[l,"\epsilon_{B_2}"'] \ar[d,"FGh"] \\
            B_3 & FGB_2 \ar[l,"\epsilon_{B_3}"']
            \com{1-1}{2-2} \com{2-1}{3-2}
        \end{tikzcd}
    .\]
    Se sigue que $FG(hg)=(FGh)(FGg)$.
    Por funtorialidad de $F$, esto es $FG(hg)=F((Gh)(Gg))$.
    Luego, como $F$ es fiel, tenemos $G(hg)=(Gh)(Gg)$.
    
    Por otro lado, tomando el morfismo identidad
    \[
        \begin{tikzcd}
            B \ar[d,"\id_B"'] \\
            B
        \end{tikzcd}
    \]
    tenemos que $G\id_B$ es el único morfismo $GB\to GB$ que hace conmutar
    el diagrama
    \[
        \begin{tikzcd}
            B \ar[d,"\id_B"'] & FGB \ar[l,"\epsilon_B"'] \ar[d,"FG\id_B"] \\
            B & FGB \ar[l,"\epsilon_B"']
            \com{1-1}{2-2}
        \end{tikzcd}
    \]
    Por lo tanto, $FG\id_B=\id_{FGB}=F\id_{GB}$.
    Como $F$ es fiel, esto implica que $G\id_B =\id_{GB}$.
    
    Por definición de la acción de $G$ en morfismos, para cualquier morfismo
    $g:B_1\to B_2$ en $\cal D$ el diagrama
    \[
        \begin{tikzcd}
            B_1 \ar[d,"g"']
            & FGB_1 \ar[l,"\epsilon_{B_1}"'] \ar[d,"FGg"] \\
            B_2 & FGB_2 \ar[l,"\epsilon_{B_2}"]
            \com{1-1}{2-2}
        \end{tikzcd}
    \]
    es conmutativo.
    Esto significa que la familia de morfismos $(\epsilon_B:FGB\to B)_{B\in\Ob\cal D}$
    es una transformación natural
    \[
        \epsilon : FG\to \id_{\cal D}
    .\]
    Como cada $\epsilon_B$ es un isomorfismo y el diagrama anterior
    es conmutativo, se sigue que $\epsilon$ es un
    isomorfismo natural, cuya inversa
    $\epsilon:\id_{\cal D}\to FG$ tiene componentes dadas por
    \[
        (\epsilon^{-1})_B = (\epsilon_B)^{-1}:B\to FGB
    \]
    para cada objeto $B$ de $\cal D$.
    
    Resta construir un isomorfismo natural $\eta:\id_{\cal C}\to GF$.
    Sea $A$ un objeto de $\cal C$.
    Como $F$ es fielmente pleno y $\epsilon:FG\to\id_{\cal D}$ es un
    isomorfismo, podemos definir $\eta_A$ como el único morfismo
    $\eta_A:A\to GFA$ tal que $F\eta_A=\epsilon_{FA}^{-1}:FA\to FGFA$.
    
    Dado que $F\eta_A$ es un isomorfismo (con inverso $\epsilon_{FA}$),
    se sigue que cada $\eta_A$ es un isomorfismo, cuyo inverso $\eta_A^{-1}$ es el
    único morfismo $\eta_A:A\to GFA$ tal que $F\eta_A^{-1}=\epsilon_{FA}:FGFA\to FA$.
    En efecto, si $f:GFA\to A$ es tal que $Ff=\epsilon$, entonces
    \begin{align*}
        F(\eta_Af)
        &=(F\eta_A)(Ff)=\epsilon_{FA}^{-1}\epsilon_{FA}=\id_{FGFA}=F\id_{GFA} \\
        F(f\eta_A)
        &=(Ff)(F\eta_A)=\epsilon_{FA}\epsilon_{FA}^{-1}=\id_{FA}=F\id_A
    \end{align*}
    así que $\eta_Af=\id_{GFA}$ y $f\eta_A=\id_A$, pues $F$ es fiel,
    por lo cual $f=\eta_A^{-1}$.
    
    Finalmente, observemos que $\eta$ es una transformación natural.
    En efecto, para cualquier morfismo $f:A_1\to A_2$ en $\cal C$,
    $Ff:FA_1\to FA_2$ es un morfismo en $\cal D$, por lo cual el diagrama
    \[
        \begin{tikzcd}
            FA_1 \ar[d,"Ff"']
            & FGFA_1 \ar[l,"\epsilon_{FA_1}"'] \ar[d,"FGFf"] \\
            FA_2 & FGFA_2 \ar[l,"\epsilon_{FA_2}"]
            \com{1-1}{2-2}
        \end{tikzcd}
    \]
    es conmutativo.
    Como observamos antes, $F\eta_A^{-1}=\epsilon_A$ para cualquier $A$, así
    que esto es
    \[
        \begin{tikzcd}
            FA_1 \ar[d,"Ff"']
            & FGFA_1 \ar[l,"F\eta_{A_1}^{-1}"'] \ar[d,"FGFf"] \\
            FA_2 & FGFA_2 \ar[l,"F\eta_{A_2}^{-1}"]
            \com{1-1}{2-2}
        \end{tikzcd}
    .\]
    Es decir,
    \[
        F(f\eta_{A_1}^{-1})
        =(Ff)(F\eta_{A_1}^{-1})
        =(F\eta_{A_2}^{-1})(FGFf)
        =F(\eta_{A_2}^{-1}GFf)
    ,\]
    de modo que $f\eta_{A_1}^{-1}=\eta_{A_2}^{-1}GFf$, pues $F$ es fiel.
    Luego, $\eta_{A_2}f=(GFf)\eta_{A_1}$.
    Es decir, el diagrama
    \[
        \begin{tikzcd}
            A_1 \ar[d,"f"'] \ar[r,"\eta_{A_1}"]
            & GFA_1 \ar[d,"GFf"] \\
            A_2 \ar[r,"\eta_{A_2}"'] & GFA_2
            \com{1-2}{2-1}
        \end{tikzcd}
    \]
    es conmutativo.
    Esta es la condición de naturalidad.
\end{sol}

\section{Adjunciones}
\label{ss:adjunciones}

En general, dadas dos categorías y dos functores entre ellas, es muy díficil saber a priori cuando estos functores forman una equivalencia, por eso se buscó las condiciones mínimas que se pueden exigir para tratar a dichas categorías 'como si fueran equivalentes'. De esta idea surgió el concepto de adjunción.
\begin{defn}
    Dadas dos categorías $\mathcal{C,D}$ y dos functores $F:\mathcal{C\to D}$, $G:\mathcal{C\to D}$, diremos que $F$ es el adjunto izquierdo de $G$, y que $G$ es el adjunto derecho de $F$, denotado $F\dashv G$, si $\mathcal{D}(F(A),B)\simeq \mathcal{C}(A,G(B))$, y esto es natural en $A$ y en $B$.
    Es decir, para cualesquiera morfismos $f:A'\to A$
    en $\cal C$ y $g:B\to B'$ en $\cal D$,
    el siguiente diagrama es conmutativo:
    \[
        \begin{tikzcd}
            \cal D(FA,B)
                \ar[d,"g\circ-\circ Ff"']
                \ar[r,"\sim",shift left]
            & \cal C(A,GB) 
                \ar[d,"Gg\circ-\circ f"]
                \ar[l,"\sim",shift left] \\
            \cal D(FA',B')
                \ar[r,"\sim",shift left]
            & \cal C(A',GB')
                \ar[l,"\sim",shift left]
        \end{tikzcd}
    \]
\end{defn}
La definición anterior quiere decir que hay un iso natural entre los functores:

Si $A\in\mathcal{C}, B\in\mathcal{D}$,
entonces existe una correspondencia biyectiva entre las flechas
$FA\to B$ y $A\to GB$.
Es decir, a cualesquiera morfismos
$(FA\xto p B)\in\cal{D}$
y $(A\xto q GB)\in\mathcal{C}$
les corresponden unas únicas flechas
$(A\xto{\Bar{p}}GB)$
y $(FA\xto{\Bar{q}}B)$,
respectivamente,
tales que $\Bar{\Bar{p}}=p$ y $\Bar{\Bar{q}}=q$.
Esto nos lleva al axioma de naturalidad,
el cual es equivalente a la conmutatividad
del diagrama de arriba.

\begin{axiom}[De naturalidad]
    \leavevmode
    \begin{enumerate}
        \item
        Poniendo $A=A'$ y $f=\id_A:A\to A$ en el diagrama,
        obtenemos la condición de que,
        para cualquier morfismo $p:FA\to B$,
        se tenga $(Gg)\bar p=\ol{gp}$:
        \[
            \Big(GB' \lar{Gg} GB \lar{\bar p} A\Big)
            =
            \ol{\Big(B' \lar g B \lar p FA \Big)}
        .\]
        \item
        Poniendo $B=B'$ y $g=\id_B:B\to B$ en el diagrama,
        obtenemos la condición de que,
        para cualquier morfismo $q:A\to GB$,
        se tenga $\bar q(Ff)=\ol{qf}$:
        \[
            \Big(B\lar{\bar q} FA\lar{Ff}FA'\Big)
            =
            \ol{\Big(GB\lar q A\lar f A'\Big)}
        .\]
    \end{enumerate}
\end{axiom}

\begin{exa}
\begin{itemize}
    \item En álgebra surge mucho el ejemplo $free\dashv forget$. Tomando las categorias $\Vect_k$ y $\Con$, tenemos el functor de olvidar $u:\Vect_k\to\Con$, definido por $u((V,+,\cdot))= V$ (olvida la estructura del espacio y lo considera como conjunto), y el functor libre $F:\Con\to\Vect_k$, definido como $F(U)$ es el espacio libre generado por $U$, y estos functores forman una adjunción.
    
    Para mostrar esto, tomamos $S\in\Con$, $V\in\Vect_k$, y la flecha $g:F(S)\to V$.
    Definamos $\Bar{g}:S\to u(V)=V$, como $\Bar{g}(s)=g(s)$ para cada $s\in S$, lo que implica que tenemos la flecha $\Vect_k(FS,V)\to\Con(S,uV)$ que manda cada $g$ a $\Bar{g}$.
    Ahora sea $f\in\Con(S,uV)$. Entonces definimos $\Bar{f}$:
    \begin{align*}
        \Bar{f}:FS & \to V \\
        \Bar{f}\left(\sum_{s\in S}\lambda_ss\right)=\sum_{s\in S}\lambda_s f(s)
    \end{align*}
    \item Un caso similar se da con grupos ('mismo' functor de olvidar, y el functor que asigna el grupo libre del conjunto).
    \item El funtor del espacio vectorial libre es el
      adjunto izquierdo del de olvidar.
      Tenemos el funtor olvidadizo $\Vect_k\to\Con$ que para cada
      espacio vectorial $V$ “olvida” su estructura y le asocia el
      conjunto subyacente. A cada conjunto $X$ se puede asociar
      el espacio vectorial $k\langle X\rangle$ generado por $X$;
      es decir, el espacio cuya base corresponde a los elementos
      de $X$. En este caso toda aplicación lineal $f:k\langle
      X\rangle\to V$ se define de manera única por los imágenes
      de los elementos de la base.
      \[\begin{tikzcd}
    	{X} & {k\langle X\rangle} \\
    	{V}
    	\arrow["{f}"', from=1-1, to=2-1]
    	\arrow[from=1-1, to=1-2, hook]
    	\arrow["{\exists !}"', from=2-1, to=1-2, dotted]
    \end{tikzcd}\]
    Esto nos da una biyección natural
    $$\Vect_k(k\<X\>, V)
    \cong
    \Con(X,V)$$
    Luego, el funtor $k\<-\>$ es adjunto izquierdo del
    funtor olvidar $\Vect_k\to\Con$.
    
    \item
    Tomando los grupos abelianos $\Z-\mathrm{Mod}$, existe una adjunción con $\Grp$, $F\dashv u$, donde $u$ es el functor de inclusión (olvida que es abeliano), y $F$ asigna a cada grupo $G$ su respectiva 'abelianización', dada por $G/[G,G]$,
    donde $[G,G]=\langle xyx^{-1}y^{-1}\mid x,y\in G\rangle$
    es el subgrupo conmutador.
    \item Sean $A,B,C\in\Con$, y consideremos $f\in\Con(A\times B, C)$, entonces
    \begin{align*}
        f: A\times B & \to C \\
        (a,b) & \to f(a,b)
    \end{align*}
    Si fijamos $a$, consideramos la función:
    \begin{align*}
        f_A: A & \to \Con(B,C)\\
        a & \to f_A(a): B\to C \\
        &\quad = f(a,-)(b)=f(a,b)\in C
    \end{align*}
    Es decir, podemos definir una función de conjuntos
    \begin{align*}
        \Con(A\times B, C) & \xto{\widehat{(-)}} \Con(A,\Con(B,C)) \\
        f&\mapsto \hat{f_{\bullet}}
    \end{align*}
    y recíprocamente, tomamos una función $f:A\to\Con(B,C)$, entonces queremos definir una función
    \begin{align*}
        \Bar{f}:A\times B & \to C \\
        \Bar{f}(a,b) &= f(a)(b)
    \end{align*}
    Así, definimos la función 
    \begin{align*}
        \Con(A,\Con(B,C))
        & \xto{\ol{(-)}}
        \Con(A\times B, C)
    \end{align*}
    y notemos que $\ol{(-)}$ y $\widehat{(-)}$ son inversas una de la otra, por tanto son una biyección, y tenemos una adjunción dada por
    \begin{equation*}
        \Con(A\times B, C)\simeq\Con(A,\Con(B,C))
    \end{equation*}
    donde $\Con(C,B)=:C^B$ se le llama la exponenciación de $C$ en $B$, y los functores son
    \begin{equation*}
        {-}\times B:\Con\to \Con
    \end{equation*}
    y el otro functor es 'exponenciar':
    \begin{equation*}
        ({-})^B:\Con\to \Con
    \end{equation*}
\end{itemize}
\end{exa}
    
Recordemos que cuando dos categorías tiene una adjunción:
\begin{center}
\begin{tikzcd}
    \mathcal{A} \arrow[dd, "F"', bend right] \\
    \dashv \\
    \mathcal{B} \arrow[uu, "G"', bend right]
\end{tikzcd}
\end{center}
Se cumple que $\mathcal{B}(FA,B)\simeq\mathcal{A}(A,GB)$, y supongamos que tenemos la configuración:
\begin{equation*}
    FA\overset{g}{\longrightarrow}B\overset{q}{\longrightarrow}B'
\end{equation*}
entonces, la composición $qg$ le corresponde una única flecha:
\begin{equation*}
    \overline{qg}:A\longrightarrow GB'
\end{equation*}
o támbien podemos considerar solamente la única flecha de $g$:
\begin{equation*}
    \overline{g}:A\longrightarrow GB
\end{equation*}
y luego componerla con $G(q):GB\to GB'$ para obtener una nueva flecha
\begin{center}
    \begin{tikzcd}
A \arrow[r, "\overline{g}"] \arrow[rd, "G(q)\circ\overline{g}"', bend right] & GB \arrow[d, "G(q)"] \\
                                                                             & GB'                 
\end{tikzcd}
\end{center}
y la compatibilidad dice que deberiamos obtener la misma flecha, es decir $\overline{qg}=G(q)\circ\overline{g}$.
Ahora, nótese que para cualquier $A\in\mathcal{A}$, se tiene una flecha:
\begin{equation*}
    A\underset{\eta_A}{\longrightarrow}GFA
\end{equation*}
y por lo anterior, esta flecha es la que le corresponde a la identidad, $\eta_A=\overline{1_{FA}}$, y tenemos el caso para  cada $B\in\mathcal{B}$, es decir
\begin{align*}
    \panth{A\underset{\eta_A}{\longrightarrow}GFA} & = \overline{\panth{F(A)\overset{1_{FA}}{\longrightarrow}F(A)}} \\
    \panth{FGB\underset{\varepsilon_B}{\longrightarrow}B} & = \overline{\panth{G(B)\overset{1_{GB}}{\longrightarrow}G(B)}}
\end{align*}
entonces, esto define las transformaciones naturales en cada componente:
\begin{align*}
    \eta_\bullet: 1_\mathcal{A}\longrightarrow GF \\
    \varepsilon_\bullet: FG\longrightarrow 1_\mathcal{B}
\end{align*}
que son, respectivamente, la \textbf{unidad} y la \textbf{co-unidad} de adjunción.

Por ejemplo, tomemos la adjunción:
\begin{center}
    \begin{tikzcd}
\mathrm{Vect}_k \arrow[dd, "u"', bend right] \\
\vdash                               \\
\mathrm{Set} \arrow[uu, "F"', bend right]   
\end{tikzcd}
\end{center}
del functor que olvida $u$ y el functor de la realización libre $F$.
Aquí, la unidad y la co-unidad son:
\begin{align*}
    & \eta_S : S\longrightarrow uF(S)=\pangle{\sum\lambda_s s\mid s\in S} \\
    & \varepsilon_V: Fu(V)\longrightarrow V.
\end{align*}

Ahora, consideremos una adjunción $F\dashv G$ entre categorías, con su unidad y co-unidad $\eta,\varepsilon$, entonces los diagramas
\[
\begin{tikzcd}
    F \arrow[r, "F\eta"] \arrow[rd, "1_F"'] & FGF \arrow[d, "\varepsilon F"] & G \arrow[r, "\eta G"] \arrow[rd, "1_G"'] & GFG \arrow[d, "G\varepsilon"] \\
     & F & & G                            
\end{tikzcd}
\]
tienen que conmutar, pues si evaluamos la unidad en cada objeto $\panth{A\overset{\eta_A}{\to}GFA}\in\cal{A}$ y le aplicamos $F$, tenemos $FA\overset{F\eta_A}{\to}FGFA$.
Por otro lado, buscando al transpuesto de $GFA\overset{1_{GFA}}{\to}GFA$, obtenemos
\begin{align*}
    \overline{1_{GFA}}: FGFA\to FA
\end{align*}
pero esto es precisamente la co-unidad $\eta_{FA}$, y al componerlo con $F\eta_A$
\begin{center}
    \begin{tikzcd}
FA \arrow[r, "F\eta_A"] \arrow[rd, bend right] & FGFA \arrow[d, "\varepsilon_{FA}"] \\
                                               & FA                                
\end{tikzcd}
\end{center}
Entonces, por definición de transposiciones, obtenemos que $\overline{\eta_A}=\overline{\overline{1_{FA}}} = 1_{FA}$, y la conmutatividad del otro diagrama se prueba de manera análoga.

Esto nos dice que, para cualquier adjunción 
\begin{center}
    \begin{tikzcd}
\mathcal{A} \arrow[dd, "F"', bend right] \\
\dashv                           \\
\mathcal{B} \arrow[uu, "G"', bend right]
\end{tikzcd}
\end{center}
con unidad $\eta$ y co-unidad $\varepsilon$, se cumple que la transposición es inducida por $\eta$ como $\overline{g}=G(g)\eta_A$, para cualquier $g\in\mathcal{B}\panth{FA,B}$, y dualmente por $\varepsilon$ como $\overline{f}=\varepsilon_BF(f)$, para cualquier $f\in\mathcal{A}\panth{A,GB}$.
\begin{exe}%[Yareli $\checkmark$ ]
  Las transposiciones inducidas por la
  unidad y counidad coinciden con las transposiciones
  originales.
\end{exe}
\begin{proof}
    Recordemos que, por compatibilidad:
    \begin{align*}
        \left(\ol{F(A)\xto g B \xto q B'}\right)
        &=
        \left(A\xto{\ol g} G(B) \xto{G(q)}G(B')\right) \\
        \left(\ol{A'\xto p A \xto f G(B)}\right)
        &=
        \left(F(A')\xto{F(p)} F(A) \xto{\ol f}B\right),
    \end{align*}
    es decir, $\ol{qg}=G(q)\ol g$ y $\ol{fp}=\ol f F(p)$.\\
    Debemos demostrar que $\overline{g}=G(g)\eta_A$ y $\overline{f}=\epsilon_BF(f)$ para $g\colon F(A)\to B$ y $f\colon A\to G(B)$.\\
Tenemos que
\begin{align*}
G(g)\eta_A&=G(g)\overline{\id}_{F(A)}\\
&=\overline{g\circ \id}_{F(A)}\\
&=\overline{g}.
\end{align*}
Además, 
\begin{align*}
\epsilon_B F(f)&=\overline{\id}_{G(B)}F(f)\\
&=\overline{\id_{F(A)}\circ f}\\
&=\overline{f}.
\end{align*}
\end{proof}


\chapter{Ordinales}

%\section{VIDEO 4: ordinales: (4 OCT)}
\begin{defn}[Conjuntos linealmente ordenados]
\leavevmode
\begin{itemize}
  \item Un conjunto parcialmente ordenado $(A,\leq)$ es linealmente ordenado si para cualesquiera $a,b\in A$ se tiene $a\leq b$ o $b\leq a$. 

\item Para un conjunto linealmente ordenado $(A,\leq)$, su opuesto es el mismo conjunto $A$ junto con el orden $\leq^{op}$ definido como 
$$a\leq^{op}b\iff b\leq a$$
El opuesto de $A$ es llamado simplemente $A^*$.
\item $(A,\leq)$ es bien ordenado si todo subconjunto de $A$ tiene por lo menos un primer elemento. Nótese que cualquier conjunto linealmente ordenado finito es bien ordenado.
\end{itemize} 
\end{defn}
\begin{exe}%[Dante $\checkmark$ ]
    \label{exe:sucesor}
  Sea $A$ un conjunto linealmente ordenado. $A$ es bien ordenado si y sólo si $A^{\star}=A\cup \{\star\}$, donde $\star$ es un elemento genérico, también lo es.
\end{exe}
\begin{sol}
    $\Rightarrow$\\
    Sea $(A,\leq^{\prime})$ bien ordenado y considérese la relación $\leq\subset A^\star\times A^\star$ definida como $\leq^{\prime} \cup \{(\star,a):a \ \in A\}\cup \{(\star,\star)\}$. 
    \begin{enumerate}
        \item Claramente, $\leq$ es una relación de orden.
        \item Sean $x,y\in A^\star$. Si $x,y \neq \star$, como $A$ es totalmente ordenado, $x\leq y$ o $y\leq y$. Si $x\neq \star, y=\star$, entonces $y\leq x$,  si $x,y=\star$, entonces $x\leq y $ y $y\leq x$.
        \item Sea $B\subset A$. Si $\star\in B, \star\leq b \ \forall \ b\in B$, y por como está definida $\leq$, no existe ningún $b\in B$ tal que $b\leq \star$, por lo que $\star$ es el menor elemento de $B$.
        Si $\star\not\in B$, entonces $B\subset A$, y como $\leq$ es equivalente a $\leq^{\prime}$ sobre $A$, entonces $B$ tiene un menor elemento en $B\subset A \subset A^\star$.
    \end{enumerate}
    Por lo anterior, $A^\star$ es bien ordenado.\vspace{3mm}
    
    $\Leftarrow$\vspace{3mm}
    
    Si $(A^\star,\leq)$ es bien ordenado, defínase el orden $\leq^{\prime}\subset A\times A$ como
    \[
        \leq^{\prime}=\leq\setminus \left( \{(\star,a):a\in A\} \cup \{(a,\star):a\in A\}\right)
    .\]
    \begin{enumerate}
        \item Claramente, $\leq^{\prime} $ es una relación de orden total.
        \item Sea $B\subset A$. Como $A\subset A^\star$, entonces $B\subset A^\star$, por lo que $\exists b\in B$ que es el menor elemento de $B$.
    \end{enumerate}
    Por lo anterior, $A$ es bien ordenado.
\end{sol}
\begin{defn}[Isomorfismo de conjuntos linealmente ordenados]
Un morfismo $f:A\to B$ entre conjuntos linealmente ordenados es una biyección monótona.
\end{defn}
\begin{defn}[Tipo de orden]
  Para un conjunto linealmente ordenado $A$, el tipo de orden $\iota(A)$ es la clase de equivalencia de $A$ bajo la relación de equivalencia $\simeq$ definida como
  $$A\simeq B \iff \exists f: A\to B \ \text{tal que f es isomorfismo}$$
  Si $\alpha=\iota(A)$, entonces $\alpha^*=\iota(A^*)$.
\end{defn}
\begin{exa}[Construcción Von Neumann de $\mathbb{N}$]
$\mathbb{N}$ es un conjunto bien ordenado, pensado como la siguiente construcción:
$$0=\emptyset$$
$$1=\{\emptyset\}=\{0\}$$
$$2=\{\{\emptyset\}\}=1\cup\{1\}$$
$$3=\{\{\emptyset\},\{\{\emptyset\}\}\}=2\cup\{2\}$$
$$\vdots$$
$$n+1=n\cup \{n\}$$
$$\vdots$$
Así, $\mathbb{N}=\{0,1,\cdots\}$ es un conjunto bien ordenado con el orden $\leq$ definido como 
$$a\leq b \iff a\subset b$$
Y esta construcción también cumple con los axiomas de Peano.
\end{exa}
\begin{exa}[Algunos tipos de orden]
$\mathbb{N},\mathbb{Q}$ y $\mathbb{R}$ son conjuntos linealmente ordenados, y sus tipos de orden son 
\begin{itemize}
    \item $\omega=\iota(\mathbb{N})$
    \item $\eta=\iota(\mathbb{Q})$
    \item $\zeta=\iota(\mathbb{R})$
\end{itemize}
\end{exa}
\begin{defn}[Sucesor]
  Para $(A,\leq)$ con $\alpha=\iota(A)$, por el ejercicio \ref{exe:sucesor} $A^+=A\cup\{A\}$ es también linealmente ordenado. $A^+$ es llamad sucesor de $A$, y $\alpha^+=\iota(A^+)=\alpha\cup\{\alpha\}$
\end{defn}
Claramente la construcción de Von Neumann de $\mathbb{N}$ es compatible con esta definición de sucesor, y cualquier $n\in\mathbb{N}$ tiene la forma $n=\{0,1,\cdots,n-1\}$. Por lo tanto, se puede pensar en el tipo de orden de $\mathbb{N}$ como 
$$\omega=\bigcup\{n:n\mathbb{N}\}$$
Y a través de la operación sucesor se pueden obtener los ordinales
\begin{align*}
    \omega+1&=\omega^+=\omega\cup\{\omega\}\\
    \omega+2&=(\omega+1)^+=\omega\cup\{\omega\}\cup\{\omega+1\}\\
    &\vdots\\
    \omega\cdot2&=\omega+\omega=\bigcup\{\omega+n : n<\omega\}\\
    &\vdots\\
    \omega^2&=\omega\cdot\omega=\bigcup\{\omega^n:nz\omega\}\\
    &\vdots
\end{align*}
\begin{defn}[Ordinal]
  Un ordinal es el tipo de orden de un conjunto bien ordenado.
\end{defn}
\begin{defn}[Operaciones con conjuntos linealmente ordenados]
  Sean $A,B$ conjuntos linealmente ordenados, con tipos de orden $\alpha$ y $\beta$ respectivamente.
  \begin{itemize}
      \item La unión ajena de $A$ y $B$ es $A\dot\cup B=(B\times\{0\})\cup(A\times\{1\})$.
      \item La suma de $A$ y $B$ es el conjunto linealmente ordenado $B+A=(B\dot\cup A)$ junto con la relación $\leq$ definida como
      $$(x,i)\leq(y,j)\iff\begin{cases}
          i<j\\
          \text{o}\\
          i=j \ \text{y} \ x\leq y
      \end{cases}$$
      Nótese que si $A$ y $B$ son bien ordenados, $B+A$ también lo es. Más aún, si $A\simeq A^\prime$ y $B\simeq B^\prime$, entonces $B+A\simeq B^\prime+A^\prime$. Por lo tanto, se puede definir el ordinal
      $$\alpha+\beta=\iota(B+A)$$
  \end{itemize}
\end{defn}
Ya que se ha definido la suma de ordinales, vale la pena hacer algunas observaciones con los ordinales conocidos.
\begin{exa}[Algunas propiedades de la suma de ordinales]
    \leavevmode
   \begin{itemize}
       \item Si $A$ y $B$ son conjuntos finitos, la suma de los ordinales $\alpha$ y $\beta$ funciona como la suma usual de números naturales.
       \item $1+\omega=\omega$
       \item $\omega+1\neq\omega$
       \item $\eta+1\neq \eta \neq 1+\eta$
       \item $\eta+\eta=\eta$
       \item $\zeta+\zeta\neq\zeta$
   \end{itemize} 
   También, para cualesquiera $\alpha,\beta,\gamma$ ordinales, se cumples que 
   $$(\gamma+\beta)+\alpha=\gamma+\beta+\alpha)$$
\end{exa}
\begin{defn}[Producto y potencias de ordinales]
  Es fácil ver que para dos conjuntos bien ordenados $A$ y $B$con tipos de orden $\alpha$ y $\beta$ respectivamente, el conjunto $B\times A$ es bien ordenado con un orden que compara los elementos de $B\times A$ entrada por entrada. Así, se puede definir el producto de ordinales
  $$\beta\alpha=\iota(B\times A)$$
  Es fácil ver que el producto de ordinales es asociativo, distributivo y además que 
  $$(\beta\alpha)^*=\beta^*\alpha^*$$
  Tomando en cuenta esta definición del producto, se pueden definir las potencias de un ordinal $\beta$ como
  \begin{align*}
      \beta^0&=1\\
      \beta^{a+1}&=\beta^{a}\beta
  \end{align*}
  para cualquier $a\in\mathbb{N}$.
\end{defn}
Nótese que bajo esta definición de potencia, se cumple que 
$$\omega^a+\omega^b=\omega^b$$
para cualesquiera $a,b\in\mathbb{N}$.
La clase de ordinales $\mathbb{O}rd$ es una clase no cardinable, y es bien ordenada.
\begin{defn}[Encaje bien ordenado]
Un encajebien ordenado entre dos conjuntos bien ordenados $A$ y $B$ es una función $f:A\to B$ si es monótona, inyectiva y se $f(A)\simeq A$ es una sección inferior de $B$.
Si existe un encaje bien ordenado $fA\to B$, se dice que $A$ es un sub-orden de $B$, o $A\trianglelefteq B$.
Es fácil ver que si $A\trianglelefteq B$ y también $B\trianglelefteq A$, entonces $A\simeq B$, con un isomorfismo único.
\end{defn}
\begin{exe}%[Yareli $\checkmark$ ]
  Sean $A, B$ conjuntos bien ordenados, y $f,g:A\to B$ dos encajes. Entonces $f=g$.
\end{exe}
\begin{proof}
Sea $a_0\in A$. Como $B$ es bien ordenado, los elementos $f(a_0)$ y $g(a_0)$ son comparables. Sin perder generalidad, supongamos que $f(a_0)\leq g(a_0)$.\\
Entonces $f(a_0)=g(a_1)\leq g(a_0)$ para algún $a_1\in A$ ya que $g[A]$ es sección inferior. Además $a_1\leq a_0$ ya que, en caso contrario, se tiene que $g(a_1)>g(a_0)$, lo cual es una contradiccion.\\
Notemos que $f(a_1)\in g[A]$ ya que $f(a_1)\leq f(a_0)$, es decir, existe un $a_2\in A$ tal que $f(a_1)=g(a_2)$. Repitiendo este proceso obtenemos las siguientes cadenas:
\[
\begin{tikzcd}[row sep=3mm]
                  &  &                                & g(a_0)               \\
a_0               &  & f(a_0) \arrow[r,equal]               & g(a_1) \arrow[u,no head]     \\
a_1 \arrow[u,no head]     &  & f(a_1) \arrow[u,no head] \arrow[r,equal]     & g(a_2) \arrow[u,no head]     \\
a_2 \arrow[u,no head]     &  & f(a_2) \arrow[u,no head] \arrow[r,equal]     & g(a_3) \arrow[u,no head]     \\
\vdots \arrow[u,no head]  &  & \vdots \arrow[u,no head]               & \vdots \arrow[u,no head]     \\
a_{n-2} \arrow[u,no head] &  & f(a_{n-2}) \arrow[u,no head] \arrow[r,equal] & g(a_{n-1}) \arrow[u,no head] \\
a_{n-1} \arrow[u,no head] &  & f(a_{n-1}) \arrow[u,no head] \arrow[r,equal] & g(a_n) \arrow[u,no head]     \\
a_{n} \arrow[u,no head]   &  & f(a_n) \arrow[u,no head] \arrow[r,equal]     & g(a_{n+1}) \arrow[u,no head] \\
a_{n+1} \arrow[u,no head] &  & f(a_{n+1}) \arrow[u,no head] \arrow[r,equal] & g(a_{n+2}) \arrow[u,no head] \\
\vdots \arrow[u,no head]  &  & \vdots \arrow[u,no head]               & \vdots \arrow[u,no head]    
\end{tikzcd}
\]
Como $A$ es bien ordenado, la cadena de la izquierda tiene un mínimo. Si $a_n$ es el mínimo de esta cadena, entonces $a_n=a_{n+1}$.
Tenemos que
\begin{align*}
a_{n+1}=a_n&\Rightarrow f(a_n)=g(a_{n+1})=g(a_n)=f(a_{n-1})\\
\Rightarrow a_n=a_{n-1}, \textit{ por inyectividad de f}&\Rightarrow f(a_{n-1})=g(a_n)=g(a_{n-1})=f(a_{n-2})\\
\Rightarrow a_{n-1}=a_{n-2},\textit{ por inyectividad de f}&\Rightarrow f(a_{n-2})=g(a_{n-1})=g(a_{n-2})=f(a_{n-3})\\
&\vdots\\
\Rightarrow a_2=a_1,\textit{ por inyectividad de f}&\Rightarrow f(a_1)=g(a_2)=g(a_1)=f(a_0)\\
\Rightarrow a_1=a_0&\Rightarrow g(a_0)=g(a_1)=f(a_0)
\end{align*}
Como el elemento $a_0\in A$ es arbitrario, concluimos que $f$ y $g$ tienen la misma regla de correspondencia, es decir, $f=g$.
\end{proof}

\end{document}
